
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Git e CI/CD com GitHub Actions &#8212; Programação Orientada a Objetos II (Avançado)</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=a8e58a58"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/aulas/aula-05-06-git-ci-cd-github-actions/README';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.9.0/dist/mermaid.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Refatoração de Códigos, Code Smells e Integração com SonarCloud" href="../aula-07-08-refatoracao-code-smells-sonarcloud/README.html" />
    <link rel="prev" title="Ambiente Profissional de Projetos Python" href="../aula-03-04-ambiente-profissional-python/README.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../README.html">
  
  
  
  
  
  
    <p class="title logo__title">Programação Orientada a Objetos II (Avançado)</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../README.html">
                    Programação Orientada a Objetos II (POOII) - Python
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Aulas da Disciplina</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../aula-01-02-boas-praticas-design-patters/README.html">Boas Práticas e Design Patterns Clássicos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aula-03-04-ambiente-profissional-python/README.html">Ambiente Profissional de Projetos Python</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Git e CI/CD com GitHub Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aula-07-08-refatoracao-code-smells-sonarcloud/README.html">Refatoração de Códigos, Code Smells e Integração com SonarCloud</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Git e CI/CD com GitHub Actions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sumario-completo">Sumário Completo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-1-abertura-e-engajamento">Seção 1: Abertura e Engajamento</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problema-motivador-o-caos-do-desenvolvimento-sem-versionamento">1.1. Problema Motivador: O Caos do Desenvolvimento Sem Versionamento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#contexto-historico-e-relevancia-atual-de-linus-torvalds-a-nuvem">1.2. Contexto Histórico e Relevância Atual: De Linus Torvalds à Nuvem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-2-fundamentos-teoricos">Seção 2: Fundamentos Teóricos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#revisao-pratica-de-git">2.1. Revisão Prática de Git</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#terminologia-essencial-e-definicoes-formais">2.1.1. Terminologia Essencial e Definições Formais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-conceitual-o-grafo-aciclico-direcionado-dag">2.1.2. Estrutura Conceitual: O Grafo Acíclico Direcionado (DAG)</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#diagrama-de-um-repositorio-git">Diagrama de um Repositório Git</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-consequencias-estrategias-de-branching">2.1.3. Análise de Consequências: Estratégias de Branching</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-critica-armadilhas-comuns-no-git">2.1.4. Análise Crítica: Armadilhas Comuns no Git</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#perguntas-frequentes-faq">Perguntas Frequentes (FAQ)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conventional-commits-estruturando-mensagens-de-commit">2.2. Conventional Commits: Estruturando Mensagens de Commit</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#o-que-sao-conventional-commits">2.2.1. O Que São Conventional Commits?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-comuns-de-commits">2.2.2. Tipos Comuns de Commits</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ferramentas-para-implementacao">2.2.3. Ferramentas para Implementação</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#beneficios">2.2.4. Benefícios</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ci-cd-integracao-e-entrega-continua">2.3. CI/CD: Integração e Entrega Contínua</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2.3.1. Terminologia Essencial e Definições Formais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-conceitual-anatomia-de-um-pipeline-ci-cd">2.3.2. Estrutura Conceitual: Anatomia de um Pipeline CI/CD</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-consequencias-modelos-de-delivery">2.3.3. Análise de Consequências: Modelos de Delivery</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows-do-github-actions-automacao-e-integracao">2.4. Workflows do GitHub Actions: Automação e Integração</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.4.1. Terminologia Essencial e Definições Formais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-conceitual-anatomia-de-um-workflow">2.4.2. Estrutura Conceitual: Anatomia de um Workflow</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-consequencias-estrategias-de-workflow">2.4.3. Análise de Consequências: Estratégias de Workflow</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-critica-armadilhas-e-limitacoes-comuns">2.4.4. Análise Crítica: Armadilhas e Limitações Comuns</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracao-avancada-actions-customizadas-e-reutilizacao">2.4.5. Configuração Avançada: Actions Customizadas e Reutilização</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-3-aplicacao-pratica-e-implementacao-avancada">Seção 3: Aplicação Prática e Implementação Avançada</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#projeto-integrador-sistema-de-gerenciamento-de-tarefas-empresarial">3.1. Projeto Integrador: Sistema de Gerenciamento de Tarefas Empresarial</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#arquitetura-do-sistema-e-analise-de-requisitos">3.1.1. Arquitetura do Sistema e Análise de Requisitos</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-do-projeto-e-organizacao-do-repositorio">3.1.2. Estrutura do Projeto e Organização do Repositório</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#implementacao-do-backend-fastapi-com-padroes-empresariais">3.1.3. Implementação do Backend: FastAPI com Padrões Empresariais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#database-layer-com-sqlalchemy-avancado">3.1.4. Database Layer com SQLAlchemy Avançado</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#frontend-react-com-typescript-avancado">3.1.5. Frontend React com TypeScript Avançado</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows-avancados-de-ci-cd">3.1.6. Workflows Avançados de CI/CD</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-resultados-e-licoes-aprendidas">3.2. Análise de Resultados e Lições Aprendidas</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#impacto-quantitativo-das-praticas-implementadas">3.2.1. Impacto Quantitativo das Práticas Implementadas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#roi-return-on-investment-da-implementacao">3.2.2. ROI (Return on Investment) da Implementação</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-qualitativa-transformacao-cultural">3.2.3. Análise Qualitativa: Transformação Cultural</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusao-da-implementacao-pratica">3.3. Conclusão da Implementação Prática</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sintese-dos-resultados-obtidos">3.3.1. Síntese dos Resultados Obtidos</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#licoes-criticas-para-implementacao">3.3.2. Lições Críticas para Implementação</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusao-final">3.3.3. Conclusão Final</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-4-topicos-avancados-e-nuances">Seção 4: Tópicos Avançados e Nuances</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#desafios-comuns-e-anti-padroes">4.1. Desafios Comuns e “Anti-Padrões”</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#anti-padroes-em-git-e-controle-de-versao">4.1.1. Anti-Padrões em Git e Controle de Versão</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variacoes-e-arquiteturas-especializadas">4.2. Variações e Arquiteturas Especializadas</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gitops-git-como-source-of-truth">4.2.1. GitOps: Git como Source of Truth</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-cloud-e-hybrid-cloud-strategies">4.2.2. Multi-Cloud e Hybrid Cloud Strategies</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edge-computing-e-cdn-integration">4.2.3. Edge Computing e CDN Integration</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-performance-e-otimizacao">4.3. Análise de Performance e Otimização</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metricas-de-pipeline-performance">4.3.1. Métricas de Pipeline Performance</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-scaling-de-runners">4.3.2. Auto-Scaling de Runners</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-5-sintese-e-perspectivas-futuras">Seção 5: Síntese e Perspectivas Futuras</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conexoes-com-outras-areas-da-computacao">5.1. Conexões com Outras Áreas da Computação</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#devops-e-site-reliability-engineering-sre">5.1.1. DevOps e Site Reliability Engineering (SRE)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning-e-data-science">5.1.2. Machine Learning e Data Science</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seguranca-da-informacao-e-compliance">5.1.3. Segurança da Informação e Compliance</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-fronteira-da-pesquisa-e-o-futuro">5.2. A Fronteira da Pesquisa e o Futuro</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inteligencia-artificial-em-devops-aiops">5.2.1. Inteligência Artificial em DevOps (AIOps)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#quantum-computing-e-devops">5.2.2. Quantum Computing e DevOps</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edge-computing-e-iot-integration">5.2.3. Edge Computing e IoT Integration</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resumo-do-capitulo-e-mapa-mental">5.3. Resumo do Capítulo e Mapa Mental</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pontos-chave-do-capitulo">5.3.1. Pontos-Chave do Capítulo</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mapa-mental-dos-conceitos">5.3.2. Mapa Mental dos Conceitos</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#referencias-e-leituras-adicionais">5.4. Referências e Leituras Adicionais</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#livros-fundamentais">5.4.1. Livros Fundamentais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#documentacao-oficial-e-recursos-online">5.4.2. Documentação Oficial e Recursos Online</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ferramentas-e-plataforms">5.4.3. Ferramentas e Plataforms</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comunidades-e-eventos">5.4.4. Comunidades e Eventos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="git-e-ci-cd-com-github-actions">
<h1>Git e CI/CD com GitHub Actions<a class="headerlink" href="#git-e-ci-cd-com-github-actions" title="Link to this heading">#</a></h1>
<section id="sumario-completo">
<h2>Sumário Completo<a class="headerlink" href="#sumario-completo" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#git-e-cicd-com-github-actions"><span class="xref myst">Git e CI/CD com GitHub Actions</span></a></p>
<ul>
<li><p><a class="reference internal" href="#sum%C3%A1rio-completo"><span class="xref myst">Sumário Completo</span></a></p></li>
<li><p><a class="reference internal" href="#se%C3%A7%C3%A3o-1-abertura-e-engajamento"><span class="xref myst">Seção 1: Abertura e Engajamento</span></a></p>
<ul>
<li><p><a class="reference internal" href="#11-problema-motivador-o-caos-do-desenvolvimento-sem-versionamento"><span class="xref myst">1.1. Problema Motivador: O Caos do Desenvolvimento Sem Versionamento</span></a></p></li>
<li><p><a class="reference internal" href="#12-contexto-hist%C3%B3rico-e-relev%C3%A2ncia-atual-de-linus-torvalds-%C3%A0-nuvem"><span class="xref myst">1.2. Contexto Histórico e Relevância Atual: De Linus Torvalds à Nuvem</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#se%C3%A7%C3%A3o-2-fundamentos-te%C3%B3ricos"><span class="xref myst">Seção 2: Fundamentos Teóricos</span></a></p>
<ul>
<li><p><a class="reference internal" href="#21-revis%C3%A3o-pr%C3%A1tica-de-git"><span class="xref myst">2.1. Revisão Prática de Git</span></a></p>
<ul>
<li><p><a class="reference internal" href="#211-terminologia-essencial-e-defini%C3%A7%C3%B5es-formais"><span class="xref myst">2.1.1. Terminologia Essencial e Definições Formais</span></a></p></li>
<li><p><a class="reference internal" href="#212-estrutura-conceitual-o-grafo-ac%C3%ADclico-direcionado-dag"><span class="xref myst">2.1.2. Estrutura Conceitual: O Grafo Acíclico Direcionado (DAG)</span></a></p>
<ul>
<li><p><a class="reference internal" href="#diagrama-de-um-reposit%C3%B3rio-git"><span class="xref myst">Diagrama de um Repositório Git</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#213-an%C3%A1lise-de-consequ%C3%AAncias-estrat%C3%A9gias-de-branching"><span class="xref myst">2.1.3. Análise de Consequências: Estratégias de Branching</span></a></p></li>
<li><p><a class="reference internal" href="#214-an%C3%A1lise-cr%C3%ADtica-armadilhas-comuns-no-git"><span class="xref myst">2.1.4. Análise Crítica: Armadilhas Comuns no Git</span></a></p>
<ul>
<li><p><a class="reference internal" href="#perguntas-frequentes-faq"><span class="xref myst">Perguntas Frequentes (FAQ)</span></a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#22-conventional-commits-estruturando-mensagens-de-commit"><span class="xref myst">2.2. Conventional Commits: Estruturando Mensagens de Commit</span></a></p>
<ul>
<li><p><a class="reference internal" href="#221-o-que-s%C3%A3o-conventional-commits"><span class="xref myst">2.2.1. O Que São Conventional Commits?</span></a></p></li>
<li><p><a class="reference internal" href="#222-tipos-comuns-de-commits"><span class="xref myst">2.2.2. Tipos Comuns de Commits</span></a></p></li>
<li><p><a class="reference internal" href="#223-ferramentas-para-implementa%C3%A7%C3%A3o"><span class="xref myst">2.2.3. Ferramentas para Implementação</span></a></p></li>
<li><p><a class="reference internal" href="#224-benef%C3%ADcios"><span class="xref myst">2.2.4. Benefícios</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#23-cicd-integra%C3%A7%C3%A3o-e-entrega-cont%C3%ADnua"><span class="xref myst">2.3. CI/CD: Integração e Entrega Contínua</span></a></p>
<ul>
<li><p><a class="reference internal" href="#231-terminologia-essencial-e-defini%C3%A7%C3%B5es-formais"><span class="xref myst">2.3.1. Terminologia Essencial e Definições Formais</span></a></p></li>
<li><p><a class="reference internal" href="#232-estrutura-conceitual-anatomia-de-um-pipeline-cicd"><span class="xref myst">2.3.2. Estrutura Conceitual: Anatomia de um Pipeline CI/CD</span></a></p></li>
<li><p><a class="reference internal" href="#233-an%C3%A1lise-de-consequ%C3%AAncias-modelos-de-delivery"><span class="xref myst">2.3.3. Análise de Consequências: Modelos de Delivery</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#24-workflows-do-github-actions-automa%C3%A7%C3%A3o-e-integra%C3%A7%C3%A3o"><span class="xref myst">2.4. Workflows do GitHub Actions: Automação e Integração</span></a></p>
<ul>
<li><p><a class="reference internal" href="#241-terminologia-essencial-e-defini%C3%A7%C3%B5es-formais"><span class="xref myst">2.4.1. Terminologia Essencial e Definições Formais</span></a></p></li>
<li><p><a class="reference internal" href="#242-estrutura-conceitual-anatomia-de-um-workflow"><span class="xref myst">2.4.2. Estrutura Conceitual: Anatomia de um Workflow</span></a></p></li>
<li><p><a class="reference internal" href="#243-an%C3%A1lise-de-consequ%C3%AAncias-estrat%C3%A9gias-de-workflow"><span class="xref myst">2.4.3. Análise de Consequências: Estratégias de Workflow</span></a></p></li>
<li><p><a class="reference internal" href="#244-an%C3%A1lise-cr%C3%ADtica-armadilhas-e-limita%C3%A7%C3%B5es-comuns"><span class="xref myst">2.4.4. Análise Crítica: Armadilhas e Limitações Comuns</span></a></p></li>
<li><p><a class="reference internal" href="#245-configura%C3%A7%C3%A3o-avan%C3%A7ada-actions-customizadas-e-reutiliza%C3%A7%C3%A3o"><span class="xref myst">2.4.5. Configuração Avançada: Actions Customizadas e Reutilização</span></a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#se%C3%A7%C3%A3o-3-aplica%C3%A7%C3%A3o-pr%C3%A1tica-e-implementa%C3%A7%C3%A3o-avan%C3%A7ada"><span class="xref myst">Seção 3: Aplicação Prática e Implementação Avançada</span></a></p>
<ul>
<li><p><a class="reference internal" href="#31-projeto-integrador-sistema-de-gerenciamento-de-tarefas-empresarial"><span class="xref myst">3.1. Projeto Integrador: Sistema de Gerenciamento de Tarefas Empresarial</span></a></p>
<ul>
<li><p><a class="reference internal" href="#311-arquitetura-do-sistema-e-an%C3%A1lise-de-requisitos"><span class="xref myst">3.1.1. Arquitetura do Sistema e Análise de Requisitos</span></a></p></li>
<li><p><a class="reference internal" href="#312-estrutura-do-projeto-e-organiza%C3%A7%C3%A3o-do-reposit%C3%B3rio"><span class="xref myst">3.1.2. Estrutura do Projeto e Organização do Repositório</span></a></p></li>
<li><p><a class="reference internal" href="#313-implementa%C3%A7%C3%A3o-do-backend-fastapi-com-padr%C3%B5es-empresariais"><span class="xref myst">3.1.3. Implementação do Backend: FastAPI com Padrões Empresariais</span></a></p></li>
<li><p><a class="reference internal" href="#314-database-layer-com-sqlalchemy-avan%C3%A7ado"><span class="xref myst">3.1.4. Database Layer com SQLAlchemy Avançado</span></a></p></li>
<li><p><a class="reference internal" href="#315-frontend-react-com-typescript-avan%C3%A7ado"><span class="xref myst">3.1.5. Frontend React com TypeScript Avançado</span></a></p></li>
<li><p><a class="reference internal" href="#316-workflows-avan%C3%A7ados-de-cicd"><span class="xref myst">3.1.6. Workflows Avançados de CI/CD</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#32-an%C3%A1lise-de-resultados-e-li%C3%A7%C3%B5es-aprendidas"><span class="xref myst">3.2. Análise de Resultados e Lições Aprendidas</span></a></p>
<ul>
<li><p><a class="reference internal" href="#321-impacto-quantitativo-das-pr%C3%A1ticas-implementadas"><span class="xref myst">3.2.1. Impacto Quantitativo das Práticas Implementadas</span></a></p></li>
<li><p><a class="reference internal" href="#322-roi-return-on-investment-da-implementa%C3%A7%C3%A3o"><span class="xref myst">3.2.2. ROI (Return on Investment) da Implementação</span></a></p></li>
<li><p><a class="reference internal" href="#323-an%C3%A1lise-qualitativa-transforma%C3%A7%C3%A3o-cultural"><span class="xref myst">3.2.3. Análise Qualitativa: Transformação Cultural</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#33-conclus%C3%A3o-da-implementa%C3%A7%C3%A3o-pr%C3%A1tica"><span class="xref myst">3.3. Conclusão da Implementação Prática</span></a></p>
<ul>
<li><p><a class="reference internal" href="#331-s%C3%ADntese-dos-resultados-obtidos"><span class="xref myst">3.3.1. Síntese dos Resultados Obtidos</span></a></p></li>
<li><p><a class="reference internal" href="#332-li%C3%A7%C3%B5es-cr%C3%ADticas-para-implementa%C3%A7%C3%A3o"><span class="xref myst">3.3.2. Lições Críticas para Implementação</span></a></p></li>
<li><p><a class="reference internal" href="#333-conclus%C3%A3o-final"><span class="xref myst">3.3.3. Conclusão Final</span></a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#se%C3%A7%C3%A3o-4-t%C3%B3picos-avan%C3%A7ados-e-nuances"><span class="xref myst">Seção 4: Tópicos Avançados e Nuances</span></a></p>
<ul>
<li><p><a class="reference internal" href="#41-desafios-comuns-e-anti-padr%C3%B5es"><span class="xref myst">4.1. Desafios Comuns e “Anti-Padrões”</span></a></p>
<ul>
<li><p><a class="reference internal" href="#411-anti-padr%C3%B5es-em-git-e-controle-de-vers%C3%A3o"><span class="xref myst">4.1.1. Anti-Padrões em Git e Controle de Versão</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#42-varia%C3%A7%C3%B5es-e-arquiteturas-especializadas"><span class="xref myst">4.2. Variações e Arquiteturas Especializadas</span></a></p>
<ul>
<li><p><a class="reference internal" href="#421-gitops-git-como-source-of-truth"><span class="xref myst">4.2.1. GitOps: Git como Source of Truth</span></a></p></li>
<li><p><a class="reference internal" href="#422-multi-cloud-e-hybrid-cloud-strategies"><span class="xref myst">4.2.2. Multi-Cloud e Hybrid Cloud Strategies</span></a></p></li>
<li><p><a class="reference internal" href="#423-edge-computing-e-cdn-integration"><span class="xref myst">4.2.3. Edge Computing e CDN Integration</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#43-an%C3%A1lise-de-performance-e-otimiza%C3%A7%C3%A3o"><span class="xref myst">4.3. Análise de Performance e Otimização</span></a></p>
<ul>
<li><p><a class="reference internal" href="#431-m%C3%A9tricas-de-pipeline-performance"><span class="xref myst">4.3.1. Métricas de Pipeline Performance</span></a></p></li>
<li><p><a class="reference internal" href="#432-auto-scaling-de-runners"><span class="xref myst">4.3.2. Auto-Scaling de Runners</span></a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#se%C3%A7%C3%A3o-5-s%C3%ADntese-e-perspectivas-futuras"><span class="xref myst">Seção 5: Síntese e Perspectivas Futuras</span></a></p>
<ul>
<li><p><a class="reference internal" href="#51-conex%C3%B5es-com-outras-%C3%A1reas-da-computa%C3%A7%C3%A3o"><span class="xref myst">5.1. Conexões com Outras Áreas da Computação</span></a></p>
<ul>
<li><p><a class="reference internal" href="#511-devops-e-site-reliability-engineering-sre"><span class="xref myst">5.1.1. DevOps e Site Reliability Engineering (SRE)</span></a></p></li>
<li><p><a class="reference internal" href="#512-machine-learning-e-data-science"><span class="xref myst">5.1.2. Machine Learning e Data Science</span></a></p></li>
<li><p><a class="reference internal" href="#513-seguran%C3%A7a-da-informa%C3%A7%C3%A3o-e-compliance"><span class="xref myst">5.1.3. Segurança da Informação e Compliance</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#52-a-fronteira-da-pesquisa-e-o-futuro"><span class="xref myst">5.2. A Fronteira da Pesquisa e o Futuro</span></a></p>
<ul>
<li><p><a class="reference internal" href="#521-intelig%C3%AAncia-artificial-em-devops-aiops"><span class="xref myst">5.2.1. Inteligência Artificial em DevOps (AIOps)</span></a></p></li>
<li><p><a class="reference internal" href="#522-quantum-computing-e-devops"><span class="xref myst">5.2.2. Quantum Computing e DevOps</span></a></p></li>
<li><p><a class="reference internal" href="#523-edge-computing-e-iot-integration"><span class="xref myst">5.2.3. Edge Computing e IoT Integration</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#53-resumo-do-cap%C3%ADtulo-e-mapa-mental"><span class="xref myst">5.3. Resumo do Capítulo e Mapa Mental</span></a></p>
<ul>
<li><p><a class="reference internal" href="#531-pontos-chave-do-cap%C3%ADtulo"><span class="xref myst">5.3.1. Pontos-Chave do Capítulo</span></a></p></li>
<li><p><a class="reference internal" href="#532-mapa-mental-dos-conceitos"><span class="xref myst">5.3.2. Mapa Mental dos Conceitos</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#54-refer%C3%AAncias-e-leituras-adicionais"><span class="xref myst">5.4. Referências e Leituras Adicionais</span></a></p>
<ul>
<li><p><a class="reference internal" href="#541-livros-fundamentais"><span class="xref myst">5.4.1. Livros Fundamentais</span></a></p></li>
<li><p><a class="reference internal" href="#542-documenta%C3%A7%C3%A3o-oficial-e-recursos-online"><span class="xref myst">5.4.2. Documentação Oficial e Recursos Online</span></a></p></li>
<li><p><a class="reference internal" href="#543-ferramentas-e-plataforms"><span class="xref myst">5.4.3. Ferramentas e Plataforms</span></a></p></li>
<li><p><a class="reference internal" href="#544-comunidades-e-eventos"><span class="xref myst">5.4.4. Comunidades e Eventos</span></a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="secao-1-abertura-e-engajamento">
<h2>Seção 1: Abertura e Engajamento<a class="headerlink" href="#secao-1-abertura-e-engajamento" title="Link to this heading">#</a></h2>
<section id="problema-motivador-o-caos-do-desenvolvimento-sem-versionamento">
<h3>1.1. Problema Motivador: O Caos do Desenvolvimento Sem Versionamento<a class="headerlink" href="#problema-motivador-o-caos-do-desenvolvimento-sem-versionamento" title="Link to this heading">#</a></h3>
<p>Imagine uma equipe de três desenvolvedores — Ana, Bruno e Carla — trabalhando em um novo sistema de e-commerce. Sem um sistema de controle de versão, o fluxo de trabalho deles é um pesadelo. Ana cria uma nova funcionalidade de carrinho de compras e envia seu código para Bruno por e-mail, em um arquivo chamado <code class="docutils literal notranslate"><span class="pre">sistema_ana_v2.zip</span></code>. Enquanto isso, Carla, sem saber do trabalho de Ana, corrige um bug no sistema de login e envia sua versão, <code class="docutils literal notranslate"><span class="pre">sistema_carla_correcao.zip</span></code>, para o mesmo repositório compartilhado na rede. Bruno, agora com duas versões diferentes, tenta mesclar o trabalho de ambos manualmente. Ele passa horas comparando arquivos, copiando e colando trechos de código, e inevitavelmente, reintroduz o bug que Carla havia corrigido. Uma semana depois, o cliente relata um problema crítico, mas ninguém sabe qual versão do código está em produção ou quem fez a última alteração que causou o erro. O projeto está mergulhado no caos: arquivos duplicados, perda de código, conflitos constantes e nenhuma rastreabilidade.</p>
<p>Este cenário, embora pareça extremo, ilustra a realidade de projetos de software sem um controle de versão robusto. A falta de um histórico claro, a dificuldade de colaboração e a ausência de uma “única fonte da verdade” transformam o desenvolvimento em um exercício de frustração e ineficiência. Como garantir que o trabalho de todos seja integrado de forma segura? Como reverter para uma versão estável quando algo dá errado? E mais importante, como automatizar as verificações de qualidade para que o código de Ana e Carla seja testado <em>antes</em> de ser mesclado, prevenindo que bugs cheguem à produção? A necessidade de uma ferramenta que organize essa complexidade e automatize a garantia de qualidade é o que nos leva diretamente ao Git e aos pipelines de CI/CD.</p>
</section>
<section id="contexto-historico-e-relevancia-atual-de-linus-torvalds-a-nuvem">
<h3>1.2. Contexto Histórico e Relevância Atual: De Linus Torvalds à Nuvem<a class="headerlink" href="#contexto-historico-e-relevancia-atual-de-linus-torvalds-a-nuvem" title="Link to this heading">#</a></h3>
<p>A história do Git começa em 2005, nascida de uma necessidade crítica no desenvolvimento do kernel do Linux. Linus Torvalds, o criador do Linux, e sua vasta equipe de desenvolvedores distribuídos globalmente precisavam de um sistema de controle de versão que fosse rápido, distribuído e capaz de lidar com um projeto de enorme escala e complexidade. As ferramentas existentes na época, como CVS e Subversion, eram centralizadas e lentas, tornando-se um gargalo para a equipe. Em uma demonstração de sua genialidade pragmática, Torvalds desenvolveu os conceitos e a primeira versão do Git em poucas semanas. Seu design era revolucionário: um sistema distribuído onde cada desenvolvedor tem uma cópia completa do histórico do repositório, permitindo operações offline rápidas e um modelo de branching e merging extremamente eficiente.</p>
<p>Avançando para os dias de hoje, o Git se tornou o padrão de fato para controle de versão no mundo do desenvolvimento de software, com plataformas como GitHub, GitLab e Bitbucket solidificando seu domínio. No entanto, o versionamento é apenas metade da história. A ascensão da computação em nuvem e das práticas de DevOps trouxe consigo a necessidade de automação. A Integração Contínua (CI) e a Entrega Contínua (CD) emergiram como práticas essenciais para garantir que o código versionado seja constantemente testado, integrado e, se possível, implantado automaticamente. O GitHub, percebendo essa necessidade, lançou o GitHub Actions em 2018, integrando a automação de CI/CD diretamente ao fluxo de trabalho do Git. Hoje, não basta apenas “commitar” o código; é esperado que esse commit acione um pipeline que verifica a qualidade, executa testes, analisa a segurança e constrói o software, fornecendo feedback quase instantâneo. Esta combinação de Git e CI/CD é a espinha dorsal do desenvolvimento de software moderno, permitindo que equipes entreguem produtos de alta qualidade em alta velocidade.</p>
</section>
</section>
<hr class="docutils" />
<section id="secao-2-fundamentos-teoricos">
<h2>Seção 2: Fundamentos Teóricos<a class="headerlink" href="#secao-2-fundamentos-teoricos" title="Link to this heading">#</a></h2>
<section id="revisao-pratica-de-git">
<h3>2.1. Revisão Prática de Git<a class="headerlink" href="#revisao-pratica-de-git" title="Link to this heading">#</a></h3>
<p>O Git é a base sobre a qual o desenvolvimento de software colaborativo moderno é construído. Compreender sua estrutura e comandos não é apenas uma habilidade técnica, mas um requisito fundamental para qualquer desenvolvedor.</p>
<section id="terminologia-essencial-e-definicoes-formais">
<h4>2.1.1. Terminologia Essencial e Definições Formais<a class="headerlink" href="#terminologia-essencial-e-definicoes-formais" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>Repositório (Repository):</strong> Uma estrutura de dados que armazena metadados e um conjunto de arquivos e diretórios que compõem um projeto. Formalmente, é um banco de dados de objetos (commits, árvores, blobs) e referências (branches, tags) que representam o histórico completo do projeto.</p></li>
<li><p><strong>Commit:</strong> Um “instantâneo” (snapshot) do estado de todos os arquivos do repositório em um determinado momento. Cada commit possui um identificador único (hash SHA-1), uma mensagem descritiva, um autor, um carimbo de data/hora e um ou mais “pais” (commits anteriores), formando um histórico conectado.</p></li>
<li><p><strong>Branch:</strong> Um ponteiro leve e móvel para um commit. É uma linha de desenvolvimento independente. O branch padrão é geralmente chamado de <code class="docutils literal notranslate"><span class="pre">main</span></code> ou <code class="docutils literal notranslate"><span class="pre">master</span></code>. A criação de branches permite o desenvolvimento de novas funcionalidades ou correções de bugs em paralelo, sem afetar a linha de desenvolvimento principal.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">clone</span></code>:</strong> Cria uma cópia local completa de um repositório remoto, incluindo todo o histórico de commits e branches.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">add</span></code>:</strong> Adiciona alterações do diretório de trabalho (working directory) para a área de preparação (staging area). A área de preparação permite que você agrupe alterações relacionadas em um único commit, mesmo que elas tenham sido feitas em momentos diferentes.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">commit</span></code>:</strong> Grava o “instantâneo” da área de preparação no histórico do repositório.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">push</span></code>:</strong> Envia os commits do seu repositório local para um repositório remoto, atualizando o branch correspondente.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pull</span></code>:</strong> Busca as alterações de um repositório remoto e as mescla (merge) no seu branch local. É uma combinação dos comandos <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span></code> e <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>.</p></li>
</ul>
</section>
<section id="estrutura-conceitual-o-grafo-aciclico-direcionado-dag">
<h4>2.1.2. Estrutura Conceitual: O Grafo Acíclico Direcionado (DAG)<a class="headerlink" href="#estrutura-conceitual-o-grafo-aciclico-direcionado-dag" title="Link to this heading">#</a></h4>
<p>No coração do Git está uma estrutura de dados chamada Grafo Acíclico Direcionado (DAG - Directed Acyclic Graph). Entender isso é a chave para desmistificar como o Git gerencia o histórico.</p>
<ul class="simple">
<li><p><strong>Grafo:</strong> É um conjunto de nós (vértices) conectados por arestas. No Git, os <strong>nós são os commits</strong>.</p></li>
<li><p><strong>Direcionado:</strong> As arestas têm uma direção. No Git, cada commit “aponta” para seu(s) commit(s) pai(s). Essa direção vai do presente para o passado.</p></li>
<li><p><strong>Acíclico:</strong> Não há ciclos. É impossível começar em um commit, seguir as setas e voltar para o mesmo commit. Isso garante que o histórico do projeto sempre avance no tempo e nunca entre em um loop infinito.</p></li>
</ul>
<p>Um branch, portanto, é simplesmente um ponteiro para um nó específico (commit) nesse grafo. Quando você cria um novo commit, o Git faz duas coisas:</p>
<ol class="arabic simple">
<li><p>Cria um novo nó (o novo commit).</p></li>
<li><p>Faz o ponteiro do branch atual apontar para este novo nó.</p></li>
</ol>
<p>O <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> é outro ponteiro especial que indica em qual branch (e, portanto, em qual commit) você está trabalhando atualmente.</p>
<section id="diagrama-de-um-repositorio-git">
<h5>Diagrama de um Repositório Git<a class="headerlink" href="#diagrama-de-um-repositorio-git" title="Link to this heading">#</a></h5>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph LR
    subgraph Repositório Git
        direction LR
        A[C1] --&gt; B(C2)
        B --&gt; C(C3)
        C --&gt; E(C5)
        B --&gt; D(C4)
        D --&gt; E
    end

    subgraph Ponteiros (Branches)
        direction LR
        main --&gt; C
        feature --&gt; D
        HEAD --&gt; feature
    end

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#f9f,stroke:#333,stroke-width:2px
    style C fill:#ccf,stroke:#333,stroke-width:2px
    style D fill:#cfc,stroke:#333,stroke-width:2px
    style E fill:#f99,stroke:#333,stroke-width:2px
</pre></div>
</div>
<p><strong>Interpretação do Diagrama:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">C1</span></code> e <code class="docutils literal notranslate"><span class="pre">C2</span></code> são commits na linha principal.</p></li>
<li><p>Em <code class="docutils literal notranslate"><span class="pre">C2</span></code>, um novo branch <code class="docutils literal notranslate"><span class="pre">feature</span></code> foi criado.</p></li>
<li><p>O commit <code class="docutils literal notranslate"><span class="pre">C3</span></code> foi feito no branch <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p></li>
<li><p>O commit <code class="docutils literal notranslate"><span class="pre">C4</span></code> foi feito no branch <code class="docutils literal notranslate"><span class="pre">feature</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C5</span></code> é um “merge commit”, que une o trabalho de <code class="docutils literal notranslate"><span class="pre">main</span></code> (em <code class="docutils literal notranslate"><span class="pre">C3</span></code>) e <code class="docutils literal notranslate"><span class="pre">feature</span></code> (em <code class="docutils literal notranslate"><span class="pre">C4</span></code>). Ele tem dois pais.</p></li>
<li><p>O <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> aponta para <code class="docutils literal notranslate"><span class="pre">feature</span></code>, indicando que este é o branch ativo.</p></li>
</ul>
</section>
</section>
<section id="analise-de-consequencias-estrategias-de-branching">
<h4>2.1.3. Análise de Consequências: Estratégias de Branching<a class="headerlink" href="#analise-de-consequencias-estrategias-de-branching" title="Link to this heading">#</a></h4>
<p>A forma como uma equipe gerencia seus branches (sua “estratégia de branching”) tem um impacto profundo na colaboração, na velocidade de entrega e na estabilidade do código. Não existe uma única estratégia “perfeita”; a escolha depende do tamanho da equipe, da natureza do projeto e da cultura de desenvolvimento.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Estratégia</p></th>
<th class="head text-left"><p>Descrição</p></th>
<th class="head text-left"><p>Vantagens</p></th>
<th class="head text-left"><p>Desvantagens</p></th>
<th class="head text-left"><p>Ideal para</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><strong>GitFlow</strong></p></td>
<td class="text-left"><p>Modelo rigoroso com branches dedicados para <code class="docutils literal notranslate"><span class="pre">main</span></code>, <code class="docutils literal notranslate"><span class="pre">develop</span></code>, <code class="docutils literal notranslate"><span class="pre">feature</span></code>, <code class="docutils literal notranslate"><span class="pre">release</span></code> e <code class="docutils literal notranslate"><span class="pre">hotfix</span></code>.</p></td>
<td class="text-left"><p>- <strong>Organização:</strong> Histórico claro e estruturado.<br>- <strong>Estabilidade:</strong> <code class="docutils literal notranslate"><span class="pre">main</span></code> está sempre em estado de produção.<br>- <strong>Paralelismo:</strong> Múltiplas features e releases podem ser trabalhadas em paralelo.</p></td>
<td class="text-left"><p>- <strong>Complexidade:</strong> Muitos branches para gerenciar.<br>- <strong>Lentidão:</strong> O processo para levar uma feature à produção pode ser longo.<br>- <strong>Overhead:</strong> Pode ser excessivo para projetos pequenos.</p></td>
<td class="text-left"><p>Equipes grandes, projetos com ciclos de release definidos (ex: software de desktop, aplicativos móveis).</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><strong>GitHub Flow</strong></p></td>
<td class="text-left"><p>Modelo simples: <code class="docutils literal notranslate"><span class="pre">main</span></code> é o branch de produção. Novas features são desenvolvidas em branches criados a partir de <code class="docutils literal notranslate"><span class="pre">main</span></code> e mesclados de volta via Pull Request.</p></td>
<td class="text-left"><p>- <strong>Simplicidade:</strong> Fácil de entender e usar.<br>- <strong>Rapidez:</strong> O caminho para a produção é curto.<br>- <strong>CI/CD:</strong> Alinha-se perfeitamente com a entrega contínua.</p></td>
<td class="text-left"><p>- <strong>Risco em <code class="docutils literal notranslate"><span class="pre">main</span></code>:</strong> Requer testes automatizados robustos, pois <code class="docutils literal notranslate"><span class="pre">main</span></code> é implantado diretamente.<br>- <strong>Menos Estrutura:</strong> O histórico pode se tornar linear e menos descritivo.</p></td>
<td class="text-left"><p>Projetos web, equipes que praticam entrega contínua, projetos de código aberto.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><strong>Trunk-Based Development</strong></p></td>
<td class="text-left"><p>Todos os desenvolvedores trabalham em um único branch (<code class="docutils literal notranslate"><span class="pre">trunk</span></code> ou <code class="docutils literal notranslate"><span class="pre">main</span></code>). Features são controladas por “feature flags”.</p></td>
<td class="text-left"><p>- <strong>Integração Contínua Real:</strong> O código é integrado constantemente.<br>- <strong>Feedback Rápido:</strong> Evita “infernos de merge”.<br>- <strong>Simplicidade Máxima:</strong> Sem complexidade de gerenciamento de branches.</p></td>
<td class="text-left"><p>- <strong>Disciplina Exigida:</strong> Requer testes automatizados de altíssima qualidade e disciplina da equipe.<br>- <strong>Feature Flags:</strong> Adiciona complexidade ao código-fonte.</p></td>
<td class="text-left"><p>Equipes de alta maturidade, projetos que exigem velocidade extrema, gigantes da tecnologia (Google, Facebook).</p></td>
</tr>
</tbody>
</table>
</div>
<p>A escolha da estratégia de branching é uma decisão de arquitetura de workflow. Para a maioria dos projetos modernos, especialmente aqueles que visam a integração contínua, o <strong>GitHub Flow</strong> oferece um excelente equilíbrio entre simplicidade e poder.</p>
</section>
<section id="analise-critica-armadilhas-comuns-no-git">
<h4>2.1.4. Análise Crítica: Armadilhas Comuns no Git<a class="headerlink" href="#analise-critica-armadilhas-comuns-no-git" title="Link to this heading">#</a></h4>
<p>Apesar de sua potência, o Git pode ser confuso, e existem várias armadilhas nas quais os desenvolvedores, tanto novatos quanto experientes, podem cair.</p>
<ul class="simple">
<li><p><strong>Conflitos de Merge (<code class="docutils literal notranslate"><span class="pre">Merge</span> <span class="pre">Conflicts</span></code>):</strong> Ocorrem quando o Git não consegue resolver automaticamente as diferenças no código entre dois commits que estão sendo mesclados.</p>
<ul>
<li><p><strong>Causa Comum:</strong> Dois desenvolvedores alteram a mesma linha de código em branches diferentes.</p></li>
<li><p><strong>Prevenção:</strong> Fazer <code class="docutils literal notranslate"><span class="pre">pull</span></code> frequentemente do branch principal para o seu branch de feature (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">origin</span> <span class="pre">main</span></code>) e manter os branches de feature curtos e focados.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">HEAD</span></code> Destacado (<code class="docutils literal notranslate"><span class="pre">Detached</span> <span class="pre">HEAD</span></code>):</strong> Ocorre quando você faz checkout de um commit específico em vez de um branch. O <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> aponta diretamente para um commit, não para um branch.</p>
<ul>
<li><p><strong>Perigo:</strong> Se você fizer novos commits neste estado, eles não pertencerão a nenhum branch. Se você mudar para outro branch, esses commits podem ser “perdidos” e eventualmente limpos pelo coletor de lixo do Git.</p></li>
<li><p><strong>Solução:</strong> Se você fez commits em um estado de <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> destacado, crie um novo branch a partir desse ponto antes de mudar para outro: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">&lt;novo-branch&gt;</span></code> e depois <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">&lt;novo-branch&gt;</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Versionamento de Arquivos Grandes ou Binários:</strong> O Git não é otimizado para lidar com arquivos binários grandes (vídeos, imagens de alta resolução, bancos de dados).</p>
<ul>
<li><p><strong>Problema:</strong> Cada versão do arquivo é armazenada integralmente no histórico, inflando o tamanho do repositório rapidamente e tornando operações como <code class="docutils literal notranslate"><span class="pre">clone</span></code> extremamente lentas.</p></li>
<li><p><strong>Solução:</strong> Usar uma extensão como o <strong>Git Large File Storage (LFS)</strong>. O Git LFS armazena os arquivos grandes em um servidor separado e coloca apenas pequenos arquivos de ponteiro no repositório Git.</p></li>
</ul>
</li>
</ul>
<section id="perguntas-frequentes-faq">
<h5>Perguntas Frequentes (FAQ)<a class="headerlink" href="#perguntas-frequentes-faq" title="Link to this heading">#</a></h5>
<ul class="simple">
<li><p><strong>Qual a diferença entre <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> e <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code>?</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> une dois branches criando um novo “merge commit”. Ele preserva o histórico exatamente como aconteceu, mas pode resultar em um grafo complexo e “poluído”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code> move ou “replica” uma sequência de commits para uma nova base. Ele reescreve o histórico para criar uma linha de commits linear e limpa. É poderoso, mas perigoso se usado em branches compartilhados, pois altera o histórico. A regra de ouro é: <strong>nunca faça rebase em um branch público/compartilhado como <code class="docutils literal notranslate"><span class="pre">main</span></code></strong>.</p></li>
</ul>
</li>
<li><p><strong>O que é <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span></code>?</strong></p>
<ul>
<li><p>É um comando para salvar temporariamente as alterações que você ainda não está pronto para commitar, permitindo que você mude de branch para trabalhar em outra coisa. Depois, você pode voltar e aplicar as alterações salvas com <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">pop</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Como eu desfaço um commit?</strong></p>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code>:</strong> Move o ponteiro do branch para um commit anterior, efetivamente “apagando” os commits posteriores. Use com cuidado, especialmente a opção <code class="docutils literal notranslate"><span class="pre">--hard</span></code>, que descarta todas as alterações.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code>:</strong> Cria um <em>novo</em> commit que desfaz as alterações de um commit anterior. É a maneira mais segura de desfazer alterações em um branch público, pois não reescreve o histórico.</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<hr class="docutils" />
<section id="conventional-commits-estruturando-mensagens-de-commit">
<h3>2.2. Conventional Commits: Estruturando Mensagens de Commit<a class="headerlink" href="#conventional-commits-estruturando-mensagens-de-commit" title="Link to this heading">#</a></h3>
<section id="o-que-sao-conventional-commits">
<h4>2.2.1. O Que São Conventional Commits?<a class="headerlink" href="#o-que-sao-conventional-commits" title="Link to this heading">#</a></h4>
<p>Os Conventional Commits são um padrão para escrever mensagens de commit que seguem uma estrutura semântica. Eles ajudam a criar um histórico de commits mais legível e consistente, facilitando a colaboração e a automação de processos como geração de changelogs e versionamento semântico.</p>
<p><strong>Estrutura Básica:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tipo</span><span class="p">(</span><span class="n">opcional</span> <span class="n">escopo</span><span class="p">):</span> <span class="n">descrição</span>

<span class="p">[</span><span class="n">corpo</span> <span class="n">opcional</span><span class="p">]</span>
<span class="p">[</span><span class="n">rodapé</span> <span class="n">opcional</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Exemplo:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">feat</span><span class="p">(</span><span class="n">auth</span><span class="p">):</span> <span class="n">adiciona</span> <span class="n">suporte</span> <span class="n">ao</span> <span class="n">login</span> <span class="n">com</span> <span class="n">OAuth</span>

<span class="n">Adiciona</span> <span class="n">suporte</span> <span class="n">ao</span> <span class="n">login</span> <span class="n">com</span> <span class="n">OAuth</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">permitindo</span> <span class="n">autenticação</span> <span class="n">via</span> <span class="n">Google</span> <span class="n">e</span> <span class="n">Facebook</span><span class="o">.</span>

<span class="n">BREAKING</span> <span class="n">CHANGE</span><span class="p">:</span> <span class="n">altera</span> <span class="n">a</span> <span class="n">estrutura</span> <span class="n">do</span> <span class="n">banco</span> <span class="n">de</span> <span class="n">dados</span> <span class="n">para</span> <span class="n">suportar</span> <span class="n">múltiplos</span> <span class="n">provedores</span> <span class="n">de</span> <span class="n">autenticação</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="tipos-comuns-de-commits">
<h4>2.2.2. Tipos Comuns de Commits<a class="headerlink" href="#tipos-comuns-de-commits" title="Link to this heading">#</a></h4>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Tipo</p></th>
<th class="head"><p>Descrição</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">feat</span></code></p></td>
<td><p>Adiciona uma nova funcionalidade.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fix</span></code></p></td>
<td><p>Corrige um bug.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docs</span></code></p></td>
<td><p>Atualiza ou adiciona documentação.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">style</span></code></p></td>
<td><p>Alterações de estilo (espaços, formatação, etc.) que não afetam o código.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">refactor</span></code></p></td>
<td><p>Refatoração de código sem alterar funcionalidade ou corrigir bugs.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">test</span></code></p></td>
<td><p>Adiciona ou altera testes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">chore</span></code></p></td>
<td><p>Alterações de manutenção que não afetam o código de produção.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="ferramentas-para-implementacao">
<h4>2.2.3. Ferramentas para Implementação<a class="headerlink" href="#ferramentas-para-implementacao" title="Link to this heading">#</a></h4>
<p>Para garantir que as mensagens de commit sigam o padrão, é possível utilizar ferramentas como:</p>
<ul class="simple">
<li><p><strong>Commitlint:</strong> Valida mensagens de commit.</p></li>
<li><p><strong>Husky:</strong> Configura hooks de Git para executar validações antes de commits ou pushes.</p></li>
</ul>
</section>
<section id="beneficios">
<h4>2.2.4. Benefícios<a class="headerlink" href="#beneficios" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>Automação:</strong> Facilita a geração de changelogs e o versionamento semântico.</p></li>
<li><p><strong>Consistência:</strong> Cria um histórico de commits mais organizado.</p></li>
<li><p><strong>Colaboração:</strong> Melhora a comunicação entre membros da equipe.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="ci-cd-integracao-e-entrega-continua">
<h3>2.3. CI/CD: Integração e Entrega Contínua<a class="headerlink" href="#ci-cd-integracao-e-entrega-continua" title="Link to this heading">#</a></h3>
<section id="id1">
<h4>2.3.1. Terminologia Essencial e Definições Formais<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<p>CI/CD representa uma das mais significativas evoluções nas práticas de desenvolvimento de software moderno, estabelecendo uma ponte automatizada entre o desenvolvimento de código e sua entrega ao usuário final.</p>
<p><strong>Definições Formais:</strong></p>
<ul class="simple">
<li><p><strong>Integração Contínua (Continuous Integration - CI):</strong> Uma prática de desenvolvimento onde os desenvolvedores integram código em um repositório compartilhado frequentemente, preferencialmente várias vezes ao dia. Cada integração é verificada por uma build automatizada (incluindo testes) para detectar erros de integração o mais rapidamente possível.</p></li>
<li><p><strong>Entrega Contínua (Continuous Delivery - CD):</strong> Uma extensão da integração contínua que garante que o código esteja sempre em um estado deployável. O software pode ser liberado para produção a qualquer momento através de um processo de deploy automatizado.</p></li>
<li><p><strong>Deployment Contínuo (Continuous Deployment):</strong> Um passo além da entrega contínua, onde cada mudança que passa por todos os estágios do pipeline de produção é liberada automaticamente para os clientes, sem intervenção humana.</p></li>
<li><p><strong>Pipeline:</strong> Uma sequência de processos automatizados que leva o código desde o commit inicial até o deployment em produção. Cada estágio do pipeline deve ser bem-sucedido antes que o código possa avançar para o próximo.</p></li>
<li><p><strong>Build:</strong> O processo de transformar código-fonte em artefatos executáveis. Inclui compilação, empacotamento, e criação de artefatos deployáveis.</p></li>
<li><p><strong>Artefato:</strong> O resultado tangível de um processo de build - pode ser um arquivo executável, uma imagem Docker, um pacote ZIP, ou qualquer outro formato deployável.</p></li>
</ul>
<blockquote>
<div><p><strong>Analogia para Entender:</strong></p>
<p>Imagine o CI/CD como uma <strong>linha de produção industrial moderna</strong>. O <em>código-fonte</em> é a <strong>matéria-prima</strong>, a <em>integração contínua</em> é a <strong>linha de montagem</strong> que verifica constantemente a qualidade durante a produção, a <em>entrega contínua</em> é o <strong>controle de qualidade final</strong> que garante que o produto está pronto para venda, e o <em>deployment contínuo</em> é o <strong>sistema de distribuição automática</strong> que leva o produto diretamente às prateleiras das lojas assim que sai da linha de produção.</p>
</div></blockquote>
</section>
<section id="estrutura-conceitual-anatomia-de-um-pipeline-ci-cd">
<h4>2.3.2. Estrutura Conceitual: Anatomia de um Pipeline CI/CD<a class="headerlink" href="#estrutura-conceitual-anatomia-de-um-pipeline-ci-cd" title="Link to this heading">#</a></h4>
<p>Um pipeline CI/CD bem estruturado é composto por estágios sequenciais, cada um com responsabilidades específicas e critérios de sucesso bem definidos.</p>
<p><strong>Estágios Fundamentais:</strong></p>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph LR
    A[Source Code] --&gt; B[Build]
    B --&gt; C[Unit Tests]
    C --&gt; D[Integration Tests]
    D --&gt; E[Security Scan]
    E --&gt; F[Package]
    F --&gt; G[Deploy Staging]
    G --&gt; H[E2E Tests]
    H --&gt; I[Deploy Production]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#e8f5e8
    style E fill:#fff3e0
    style F fill:#f3e5f5
    style G fill:#e3f2fd
    style H fill:#e8f5e8
    style I fill:#e8f5e8
</pre></div>
</div>
<p><strong>1. Estágio de Source Control:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Trigger do pipeline baseado em eventos do Git</span>
<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">develop</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;src/**&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tests/**&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;docs/**&#39;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">types</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">opened</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">synchronize</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">reopened</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>2. Estágio de Build e Compilação:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exemplo de script de build Python</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Build Script para Aplicação Python</span>
<span class="sd">Este script demonstra as etapas típicas de build.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="k">def</span><span class="w"> </span><span class="nf">setup_environment</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configura o ambiente de build, incluindo variáveis e dependências.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Idempotência</span>
<span class="sd">    O build deve ser reproduzível - executar o mesmo build múltiplas vezes</span>
<span class="sd">    deve produzir o mesmo resultado. Isso garante consistência entre</span>
<span class="sd">    ambientes de desenvolvimento, staging e produção.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Garante que estamos no diretório correto</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
    
    <span class="c1"># Define variáveis de ambiente específicas do build</span>
    <span class="n">build_env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">build_env</span><span class="p">[</span><span class="s1">&#39;PYTHONPATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;src&#39;</span><span class="p">)</span>
    <span class="n">build_env</span><span class="p">[</span><span class="s1">&#39;BUILD_NUMBER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;GITHUB_RUN_NUMBER&#39;</span><span class="p">,</span> <span class="s1">&#39;local&#39;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">build_env</span>

<span class="k">def</span><span class="w"> </span><span class="nf">install_dependencies</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instala dependências de forma determinística.</span>
<span class="sd">    </span>
<span class="sd">    BENEFÍCIO: Usar lock files (requirements.txt com versões fixas) </span>
<span class="sd">    garante que todos os ambientes tenham exatamente as mesmas versões.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;📦 Instalando dependências...&quot;</span><span class="p">)</span>
    
    <span class="c1"># Upgrade do pip para versão específica (reproduzibilidade)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;pip&#39;</span><span class="p">,</span> <span class="s1">&#39;install&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;--upgrade&#39;</span><span class="p">,</span> <span class="s1">&#39;pip==23.3.1&#39;</span>
    <span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Instalação de dependências com hash checking (segurança)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;pip&#39;</span><span class="p">,</span> <span class="s1">&#39;install&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="s1">&#39;requirements.txt&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--require-hashes&#39;</span>  <span class="c1"># Verifica integridade dos pacotes</span>
    <span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">static_analysis</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executa análise estática do código.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Shift-Left Testing</span>
<span class="sd">    Detectar problemas o mais cedo possível no pipeline reduz custos</span>
<span class="sd">    e tempo de feedback.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;🔍 Executando análise estática...&quot;</span><span class="p">)</span>
    
    <span class="c1"># Type checking com mypy</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;mypy&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;src/&#39;</span><span class="p">,</span> <span class="s1">&#39;--strict&#39;</span>
    <span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Linting com flake8</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;flake8&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;src/&#39;</span><span class="p">,</span> <span class="s1">&#39;tests/&#39;</span><span class="p">,</span> <span class="s1">&#39;--max-complexity=10&#39;</span>
    <span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Security linting com bandit</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;bandit&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="s1">&#39;src/&#39;</span><span class="p">,</span> <span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;security-report.json&#39;</span>
    <span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">run_tests</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executa suite completa de testes com coverage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;🧪 Executando testes...&quot;</span><span class="p">)</span>
    
    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;pytest&#39;</span><span class="p">,</span>
        <span class="s1">&#39;tests/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--cov=src&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--cov-report=xml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--cov-report=html&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--cov-report=term-missing&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--cov-fail-under=80&#39;</span><span class="p">,</span>  <span class="c1"># Falha se cobertura &lt; 80%</span>
        <span class="s1">&#39;--junitxml=test-results.xml&#39;</span>
    <span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">setup_environment</span><span class="p">()</span>
    <span class="n">install_dependencies</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="n">static_analysis</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="n">run_tests</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ Build concluído com sucesso!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>3. Estágio de Testes Automatizados:</strong></p>
<p>Os testes em um pipeline CI/CD são organizados em uma pirâmide hierárquica, onde cada nível tem características específicas:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exemplo de estrutura de testes hierárquica</span>

<span class="c1"># NÍVEL 1: Testes Unitários (Base da Pirâmide)</span>
<span class="c1"># - Rápidos (&lt; 1s cada)</span>
<span class="c1"># - Isolados (sem dependências externas)  </span>
<span class="c1"># - Numerosos (70-80% dos testes)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">unittest.mock</span><span class="w"> </span><span class="kn">import</span> <span class="n">patch</span><span class="p">,</span> <span class="n">MagicMock</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.task_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskManager</span><span class="p">,</span> <span class="n">Task</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TestTaskManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Testes unitários para o TaskManager.</span>
<span class="sd">    </span>
<span class="sd">    PRINCÍPIO: Testes unitários devem ser FIRST:</span>
<span class="sd">    - Fast: Execução rápida</span>
<span class="sd">    - Independent: Não dependem de outros testes</span>
<span class="sd">    - Repeatable: Resultados consistentes</span>
<span class="sd">    - Self-validating: Pass/fail claro</span>
<span class="sd">    - Timely: Escritos junto com o código</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">test_add_task_success</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Testa adição bem-sucedida de tarefa.&quot;&quot;&quot;</span>
        <span class="c1"># Arrange</span>
        <span class="n">manager</span> <span class="o">=</span> <span class="n">TaskManager</span><span class="p">()</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Test Task&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Test Description&quot;</span><span class="p">)</span>
        
        <span class="c1"># Act</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
        
        <span class="c1"># Assert</span>
        <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">title</span> <span class="o">==</span> <span class="s2">&quot;Test Task&quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">manager</span><span class="o">.</span><span class="n">get_all_tasks</span><span class="p">())</span> <span class="o">==</span> <span class="mi">1</span>
    
    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;src.task_manager.database&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_add_task_database_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_db</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Testa comportamento quando banco de dados falha.&quot;&quot;&quot;</span>
        <span class="c1"># Arrange</span>
        <span class="n">mock_db</span><span class="o">.</span><span class="n">save</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">DatabaseError</span><span class="p">(</span><span class="s2">&quot;Connection failed&quot;</span><span class="p">)</span>
        <span class="n">manager</span> <span class="o">=</span> <span class="n">TaskManager</span><span class="p">()</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Test Task&quot;</span><span class="p">)</span>
        
        <span class="c1"># Act &amp; Assert</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">TaskCreationError</span><span class="p">):</span>
            <span class="n">manager</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

<span class="c1"># NÍVEL 2: Testes de Integração (Meio da Pirâmide)</span>
<span class="c1"># - Moderadamente rápidos (1-10s cada)</span>
<span class="c1"># - Testam interação entre componentes</span>
<span class="c1"># - Moderada quantidade (15-25% dos testes)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">testcontainers.postgres</span><span class="w"> </span><span class="kn">import</span> <span class="n">PostgresContainer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TestTaskManagerIntegration</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Testes de integração usando containers reais.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Test Containers</span>
<span class="sd">    Usar containers Docker para simular dependências reais</span>
<span class="sd">    garante que os testes sejam mais próximos do ambiente de produção.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">postgres_container</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fixture que provisiona banco PostgreSQL real para testes.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">PostgresContainer</span><span class="p">(</span><span class="s2">&quot;postgres:15&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">postgres</span><span class="p">:</span>
            <span class="c1"># Configuração do banco para testes</span>
            <span class="n">connection_url</span> <span class="o">=</span> <span class="n">postgres</span><span class="o">.</span><span class="n">get_connection_url</span><span class="p">()</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;TEST_DATABASE_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">connection_url</span>
            
            <span class="c1"># Executa migrações</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
                <span class="s1">&#39;alembic&#39;</span><span class="p">,</span> <span class="s1">&#39;upgrade&#39;</span><span class="p">,</span> <span class="s1">&#39;head&#39;</span>
            <span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;DATABASE_URL&#39;</span><span class="p">:</span> <span class="n">connection_url</span><span class="p">},</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            
            <span class="k">yield</span> <span class="n">postgres</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">test_task_crud_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">postgres_container</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Testa operações CRUD completas contra banco real.&quot;&quot;&quot;</span>
        <span class="n">manager</span> <span class="o">=</span> <span class="n">TaskManager</span><span class="p">()</span>
        
        <span class="c1"># Create</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Integration Test&quot;</span><span class="p">))</span>
        <span class="k">assert</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        
        <span class="c1"># Read</span>
        <span class="n">retrieved</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_task</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">retrieved</span><span class="o">.</span><span class="n">title</span> <span class="o">==</span> <span class="s2">&quot;Integration Test&quot;</span>
        
        <span class="c1"># Update</span>
        <span class="n">retrieved</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Updated Task&quot;</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">update_task</span><span class="p">(</span><span class="n">retrieved</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">updated</span><span class="o">.</span><span class="n">title</span> <span class="o">==</span> <span class="s2">&quot;Updated Task&quot;</span>
        
        <span class="c1"># Delete</span>
        <span class="n">manager</span><span class="o">.</span><span class="n">delete_task</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_task</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>

<span class="c1"># NÍVEL 3: Testes End-to-End (Topo da Pirâmide)</span>
<span class="c1"># - Lentos (10s-minutos cada)</span>
<span class="c1"># - Testam fluxos completos do usuário</span>
<span class="c1"># - Poucos (5-15% dos testes)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">selenium</span><span class="w"> </span><span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.webdriver.common.by</span><span class="w"> </span><span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.webdriver.support.ui</span><span class="w"> </span><span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.webdriver.support</span><span class="w"> </span><span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TestTaskManagerE2E</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Testes end-to-end simulando interação real do usuário.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: User Journey Testing</span>
<span class="sd">    Testes E2E devem simular jornadas reais do usuário,</span>
<span class="sd">    não apenas clicar em todos os botões da interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">browser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configura navegador para testes E2E.&quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
        <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--headless&#39;</span><span class="p">)</span>  <span class="c1"># Para CI/CD</span>
        <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--no-sandbox&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--disable-dev-shm-usage&#39;</span><span class="p">)</span>
        
        <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        
        <span class="k">yield</span> <span class="n">driver</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">test_complete_task_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">browser</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Testa fluxo completo: login → criar tarefa → marcar como concluída.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Navega para a aplicação</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://localhost:8000&quot;</span><span class="p">)</span>
        
        <span class="c1"># Login</span>
        <span class="n">username_field</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">)</span>
        <span class="n">password_field</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span>
        <span class="n">login_button</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;//button[@type=&#39;submit&#39;]&quot;</span><span class="p">)</span>
        
        <span class="n">username_field</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;testuser&quot;</span><span class="p">)</span>
        <span class="n">password_field</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;testpass&quot;</span><span class="p">)</span>
        <span class="n">login_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        
        <span class="c1"># Aguarda redirecionamento para dashboard</span>
        <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span>
            <span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;task-list&quot;</span><span class="p">))</span>
        <span class="p">)</span>
        
        <span class="c1"># Cria nova tarefa</span>
        <span class="n">new_task_button</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;new-task-btn&quot;</span><span class="p">)</span>
        <span class="n">new_task_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        
        <span class="n">task_title</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">)</span>
        <span class="n">task_description</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
        <span class="n">save_button</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;save-task&quot;</span><span class="p">)</span>
        
        <span class="n">task_title</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;E2E Test Task&quot;</span><span class="p">)</span>
        <span class="n">task_description</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;Created by automated test&quot;</span><span class="p">)</span>
        <span class="n">save_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        
        <span class="c1"># Verifica que tarefa foi criada</span>
        <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span>
            <span class="n">EC</span><span class="o">.</span><span class="n">text_to_be_present_in_element</span><span class="p">(</span>
                <span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;task-list&quot;</span><span class="p">),</span> <span class="s2">&quot;E2E Test Task&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        
        <span class="c1"># Marca tarefa como concluída</span>
        <span class="n">task_checkbox</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span>
            <span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;//input[@type=&#39;checkbox&#39; and @data-task=&#39;E2E Test Task&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="n">task_checkbox</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        
        <span class="c1"># Verifica estado visual da conclusão</span>
        <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span>
            <span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">(</span>
                <span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;//li[contains(@class, &#39;completed&#39;)]&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
</pre></div>
</div>
<p><strong>4. Estágio de Deploy e Entrega:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exemplo de estágio de deploy com estratégias diferentes</span>
<span class="nt">deploy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy Application</span>
<span class="w">  </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">  </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">test</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">security-scan</span><span class="p p-Indicator">]</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">      </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">staging</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">production</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">include</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">staging</span>
<span class="w">          </span><span class="nt">deployment-strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blue-green</span>
<span class="w">          </span><span class="nt">health-check-timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
<span class="w">          </span><span class="nt">deployment-strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canary</span>
<span class="w">          </span><span class="nt">health-check-timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy with ${{ matrix.deployment-strategy }} strategy</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Blue-Green Deployment para staging</span>
<span class="w">        </span><span class="no">if [ &quot;${{ matrix.environment }}&quot; == &quot;staging&quot; ]; then</span>
<span class="w">          </span><span class="no">echo &quot;Executando Blue-Green deployment...&quot;</span>
<span class="w">          </span><span class="no">./scripts/deploy-blue-green.sh ${{ matrix.environment }}</span>
<span class="w">        </span>
<span class="w">        </span><span class="no"># Canary Deployment para produção</span>
<span class="w">        </span><span class="no">elif [ &quot;${{ matrix.environment }}&quot; == &quot;production&quot; ]; then</span>
<span class="w">          </span><span class="no">echo &quot;Executando Canary deployment...&quot;</span>
<span class="w">          </span><span class="no">./scripts/deploy-canary.sh ${{ matrix.environment }}</span>
<span class="w">        </span><span class="no">fi</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Health Check</span>
<span class="w">      </span><span class="nt">timeout-minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.health-check-timeout }}</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Aguarda aplicação estar saudável</span>
<span class="w">        </span><span class="no">./scripts/health-check.sh ${{ matrix.environment }}</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollback on failure</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">failure()</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">echo &quot;Deploy falhou, executando rollback...&quot;</span>
<span class="w">        </span><span class="no">./scripts/rollback.sh ${{ matrix.environment }}</span>
</pre></div>
</div>
</section>
<section id="analise-de-consequencias-modelos-de-delivery">
<h4>2.3.3. Análise de Consequências: Modelos de Delivery<a class="headerlink" href="#analise-de-consequencias-modelos-de-delivery" title="Link to this heading">#</a></h4>
<p>A escolha do modelo de CI/CD tem impacto profundo na velocidade de entrega, confiabilidade e capacidade de resposta a problemas em produção.</p>
<p><strong>Modelos Comparativos:</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Modelo</p></th>
<th class="head"><p>Frequência de Deploy</p></th>
<th class="head"><p>Automação</p></th>
<th class="head"><p>Risco</p></th>
<th class="head"><p>Feedback Time</p></th>
<th class="head"><p>Ideal para</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Traditional Release</strong></p></td>
<td><p>Mensal/Trimestral</p></td>
<td><p>Baixa (manual)</p></td>
<td><p>Alto (grandes lotes)</p></td>
<td><p>Semanas/Meses</p></td>
<td><p>Sistemas legados, regulamentação rígida</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Continuous Integration</strong></p></td>
<td><p>Semanal</p></td>
<td><p>Média (build/test automatizado)</p></td>
<td><p>Médio-Alto</p></td>
<td><p>Dias</p></td>
<td><p>Equipes em transição</p></td>
</tr>
<tr class="row-even"><td><p><strong>Continuous Delivery</strong></p></td>
<td><p>Diário</p></td>
<td><p>Alta (deploy manual aprovado)</p></td>
<td><p>Médio</p></td>
<td><p>Horas</p></td>
<td><p>Sistemas críticos com aprovação humana</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Continuous Deployment</strong></p></td>
<td><p>Por commit</p></td>
<td><p>Máxima (totalmente automatizada)</p></td>
<td><p>Baixo (pequenos lotes)</p></td>
<td><p>Minutos</p></td>
<td><p>Aplicações web, SaaS, equipes maduras</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Impactos Quantificáveis:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simulação dos impactos de diferentes modelos de delivery</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DeliveryMetrics</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calcula métricas de delivery baseadas no modelo escolhido.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: DORA Metrics</span>
<span class="sd">    DevOps Research and Assessment identificou 4 métricas chave:</span>
<span class="sd">    1. Deployment Frequency</span>
<span class="sd">    2. Lead Time for Changes  </span>
<span class="sd">    3. Change Failure Rate</span>
<span class="sd">    4. Recovery Time</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">model_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_metrics</span><span class="p">()</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcula métricas baseadas no modelo de delivery.&quot;&quot;&quot;</span>
        
        <span class="n">models</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;traditional&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;deployment_frequency_days&#39;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>  <span class="c1"># Trimestral</span>
                <span class="s1">&#39;lead_time_hours&#39;</span><span class="p">:</span> <span class="mi">720</span><span class="p">,</span>           <span class="c1"># 30 dias</span>
                <span class="s1">&#39;change_failure_rate&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span>      <span class="c1"># 30% das releases falham</span>
                <span class="s1">&#39;recovery_time_hours&#39;</span><span class="p">:</span> <span class="mi">168</span>        <span class="c1"># 1 semana para resolver</span>
            <span class="p">},</span>
            <span class="s1">&#39;continuous_integration&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;deployment_frequency_days&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>   <span class="c1"># Semanal</span>
                <span class="s1">&#39;lead_time_hours&#39;</span><span class="p">:</span> <span class="mi">168</span><span class="p">,</span>           <span class="c1"># 1 semana</span>
                <span class="s1">&#39;change_failure_rate&#39;</span><span class="p">:</span> <span class="mf">0.20</span><span class="p">,</span>      <span class="c1"># 20% das releases falham</span>
                <span class="s1">&#39;recovery_time_hours&#39;</span><span class="p">:</span> <span class="mi">48</span>         <span class="c1"># 2 dias para resolver</span>
            <span class="p">},</span>
            <span class="s1">&#39;continuous_delivery&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;deployment_frequency_days&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>   <span class="c1"># Diário</span>
                <span class="s1">&#39;lead_time_hours&#39;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>            <span class="c1"># 1 dia</span>
                <span class="s1">&#39;change_failure_rate&#39;</span><span class="p">:</span> <span class="mf">0.10</span><span class="p">,</span>      <span class="c1"># 10% das releases falham</span>
                <span class="s1">&#39;recovery_time_hours&#39;</span><span class="p">:</span> <span class="mi">12</span>         <span class="c1"># 12 horas para resolver</span>
            <span class="p">},</span>
            <span class="s1">&#39;continuous_deployment&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;deployment_frequency_days&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="c1"># Múltiplos por dia</span>
                <span class="s1">&#39;lead_time_hours&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>             <span class="c1"># 2 horas</span>
                <span class="s1">&#39;change_failure_rate&#39;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>      <span class="c1"># 5% das releases falham</span>
                <span class="s1">&#39;recovery_time_hours&#39;</span><span class="p">:</span> <span class="mi">1</span>          <span class="c1"># 1 hora para resolver</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="n">models</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_type</span><span class="p">,</span> <span class="n">models</span><span class="p">[</span><span class="s1">&#39;traditional&#39;</span><span class="p">])</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_annual_impact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features_per_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calcula impacto anual do modelo de delivery.</span>
<span class="sd">        </span>
<span class="sd">        BENEFÍCIO: Quantificar o valor do CI/CD ajuda a justificar</span>
<span class="sd">        investimento em automação e ferramentas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span>
        
        <span class="c1"># Cálculos de produtividade</span>
        <span class="n">deployments_per_year</span> <span class="o">=</span> <span class="mi">365</span> <span class="o">/</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;deployment_frequency_days&#39;</span><span class="p">]</span>
        <span class="n">features_delivered</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">features_per_year</span><span class="p">,</span> <span class="n">deployments_per_year</span><span class="p">)</span>
        
        <span class="c1"># Cálculos de qualidade</span>
        <span class="n">failed_deployments</span> <span class="o">=</span> <span class="n">deployments_per_year</span> <span class="o">*</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;change_failure_rate&#39;</span><span class="p">]</span>
        <span class="n">total_downtime_hours</span> <span class="o">=</span> <span class="n">failed_deployments</span> <span class="o">*</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;recovery_time_hours&#39;</span><span class="p">]</span>
        
        <span class="c1"># Cálculos de time-to-market</span>
        <span class="n">average_time_to_market</span> <span class="o">=</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;lead_time_hours&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">24</span>  <span class="c1"># em dias</span>
        
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;deployments_per_year&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">deployments_per_year</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;features_delivered&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">features_delivered</span><span class="p">),</span>
            <span class="s1">&#39;failed_deployments&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">failed_deployments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;total_downtime_hours&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">total_downtime_hours</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;average_time_to_market_days&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">average_time_to_market</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;delivery_efficiency&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">features_delivered</span> <span class="o">/</span> <span class="n">features_per_year</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">}</span>

<span class="c1"># Exemplo de uso para comparar modelos</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;traditional&#39;</span><span class="p">,</span> <span class="s1">&#39;continuous_integration&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;continuous_delivery&#39;</span><span class="p">,</span> <span class="s1">&#39;continuous_deployment&#39;</span><span class="p">]</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Comparação de Modelos de Delivery (100 features/ano):&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="n">DeliveryMetrics</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="n">impact</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">calculate_annual_impact</span><span class="p">()</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Deployments/ano: </span><span class="si">{</span><span class="n">impact</span><span class="p">[</span><span class="s1">&#39;deployments_per_year&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Features entregues: </span><span class="si">{</span><span class="n">impact</span><span class="p">[</span><span class="s1">&#39;features_delivered&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Falhas: </span><span class="si">{</span><span class="n">impact</span><span class="p">[</span><span class="s1">&#39;failed_deployments&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Downtime total: </span><span class="si">{</span><span class="n">impact</span><span class="p">[</span><span class="s1">&#39;total_downtime_hours&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">h&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Time-to-market: </span><span class="si">{</span><span class="n">impact</span><span class="p">[</span><span class="s1">&#39;average_time_to_market_days&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> dias&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Eficiência: </span><span class="si">{</span><span class="n">impact</span><span class="p">[</span><span class="s1">&#39;delivery_efficiency&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="workflows-do-github-actions-automacao-e-integracao">
<h3>2.4. Workflows do GitHub Actions: Automação e Integração<a class="headerlink" href="#workflows-do-github-actions-automacao-e-integracao" title="Link to this heading">#</a></h3>
<section id="id2">
<h4>2.4.1. Terminologia Essencial e Definições Formais<a class="headerlink" href="#id2" title="Link to this heading">#</a></h4>
<p>O GitHub Actions é uma plataforma de automação e CI/CD integrada diretamente ao GitHub, que permite definir fluxos de trabalho personalizados através de arquivos YAML. Compreender sua arquitetura e terminologia é fundamental para aproveitar todo seu potencial.</p>
<p><strong>Definições Formais:</strong></p>
<ul class="simple">
<li><p><strong>Workflow:</strong> Um processo automatizado configurável que executa um ou mais jobs. Workflows são definidos por arquivos YAML armazenados no diretório <code class="docutils literal notranslate"><span class="pre">.github/workflows/</span></code> do repositório. Cada workflow é identificado por um nome único e pode ser acionado por eventos específicos.</p></li>
<li><p><strong>Event (Evento):</strong> Uma atividade específica no repositório que dispara a execução de um workflow. Eventos podem ser push de código, criação de pull requests, agendamentos temporais (cron), ou até mesmo webhooks externos.</p></li>
<li><p><strong>Job:</strong> Uma unidade de trabalho que agrupa uma série de steps (etapas) relacionados. Jobs são executados em paralelo por padrão, mas podem ser configurados para executar sequencialmente usando dependências (<code class="docutils literal notranslate"><span class="pre">needs</span></code>).</p></li>
<li><p><strong>Step:</strong> A menor unidade executável dentro de um job. Pode ser um comando shell simples ou a execução de uma action pré-construída.</p></li>
<li><p><strong>Action:</strong> Aplicações reutilizáveis que executam tarefas específicas. Actions podem ser desenvolvidas pela comunidade, pelo GitHub, ou personalizadas pela própria equipe.</p></li>
<li><p><strong>Runner:</strong> O ambiente de execução onde os jobs são processados. GitHub oferece runners hospedados (Ubuntu, Windows, macOS) ou permite o uso de runners auto-hospedados.</p></li>
</ul>
<blockquote>
<div><p><strong>Analogia para Entender:</strong></p>
<p>Imagine o GitHub Actions como uma <strong>fábrica de produção automatizada</strong>. O <em>workflow</em> é a <strong>linha de produção completa</strong>, os <em>jobs</em> são <strong>estações de trabalho</strong> que podem operar simultaneamente, os <em>steps</em> são <strong>operações específicas</strong> em cada estação, e as <em>actions</em> são <strong>ferramentas especializadas</strong> que cada operador pode usar. Os <em>events</em> são os <strong>sinais</strong> que iniciam a produção (como a chegada de matéria-prima), e os <em>runners</em> são os <strong>operários</strong> que executam o trabalho.</p>
</div></blockquote>
</section>
<section id="estrutura-conceitual-anatomia-de-um-workflow">
<h4>2.4.2. Estrutura Conceitual: Anatomia de um Workflow<a class="headerlink" href="#estrutura-conceitual-anatomia-de-um-workflow" title="Link to this heading">#</a></h4>
<p>A estrutura de um workflow do GitHub Actions segue uma hierarquia bem definida que determina como a automação será executada. Vamos analisar cada componente em detalhes.</p>
<p><strong>Estrutura Hierárquica:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Nome do Workflow</span><span class="w">           </span><span class="c1"># Identificação do workflow</span>
<span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">eventos</span><span class="p p-Indicator">]</span><span class="w">                    </span><span class="c1"># Triggers que disparam o workflow</span>
<span class="nt">env</span><span class="p">:</span><span class="w">                             </span><span class="c1"># Variáveis de ambiente globais</span>
<span class="w">  </span><span class="nt">GLOBAL_VAR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">valor</span>

<span class="nt">jobs</span><span class="p">:</span><span class="w">                            </span><span class="c1"># Coleção de jobs</span>
<span class="w">  </span><span class="nt">job-id</span><span class="p">:</span><span class="w">                        </span><span class="c1"># Identificador único do job</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Nome do Job</span><span class="w">            </span><span class="c1"># Nome descritivo do job</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span><span class="w">       </span><span class="c1"># Especifica o runner</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">outros-jobs</span><span class="p p-Indicator">]</span><span class="w">         </span><span class="c1"># Dependências (jobs que devem executar antes)</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w">                         </span><span class="c1"># Variáveis específicas do job</span>
<span class="w">      </span><span class="nt">JOB_VAR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">valor</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w">                    </span><span class="c1"># Configurações de matriz (execução paralela)</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3.8</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.10</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">                       </span><span class="c1"># Sequência de etapas</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Nome do Step</span><span class="w">       </span><span class="c1"># Nome descritivo da etapa</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">action@version</span><span class="w">     </span><span class="c1"># Action externa a ser usada</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">                    </span><span class="c1"># Parâmetros para a action</span>
<span class="w">          </span><span class="nt">param</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">valor</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Comando Shell</span><span class="w">      </span><span class="c1"># Etapa com comando personalizado</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w">                  </span><span class="c1"># Script shell a ser executado</span>
<span class="w">          </span><span class="no">echo &quot;Executando comando&quot;</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span><span class="w">                     </span><span class="c1"># Variáveis específicas do step</span>
<span class="w">          </span><span class="nt">STEP_VAR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">valor</span>
</pre></div>
</div>
<p><strong>Exemplo Detalhado de Workflow Python:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Python CI/CD Pipeline</span>

<span class="c1"># EVENTOS: Define quando o workflow será executado</span>
<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">develop</span><span class="w"> </span><span class="p p-Indicator">]</span><span class="w">          </span><span class="c1"># Push em branches específicos</span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&#39;src/**&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tests/**&#39;</span><span class="w"> </span><span class="p p-Indicator">]</span><span class="w">      </span><span class="c1"># Apenas quando arquivos específicos mudaram</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p p-Indicator">]</span><span class="w">                   </span><span class="c1"># Pull requests para main</span>
<span class="w">    </span><span class="nt">types</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">opened</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">synchronize</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">reopened</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Tipos específicos de PR events</span>
<span class="w">  </span><span class="nt">schedule</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cron</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">1&#39;</span><span class="w">                 </span><span class="c1"># Execução agendada (Segunda-feira às 2h)</span>
<span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span><span class="w">                     </span><span class="c1"># Permite execução manual</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Environment</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">deploy&#39;</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;staging&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">choice</span>
<span class="w">        </span><span class="nt">options</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">staging</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>

<span class="c1"># VARIÁVEIS DE AMBIENTE GLOBAIS</span>
<span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PYTHON_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span>
<span class="w">  </span><span class="nt">POETRY_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1.7.1&#39;</span>

<span class="c1"># JOBS: Unidades de trabalho paralelas</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># JOB 1: Validação de Código</span>
<span class="w">  </span><span class="nt">code-quality</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Code Quality &amp; Security</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># STEP 1: Checkout do código</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout repository</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fetch-depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">  </span><span class="c1"># Necessário para análise de histórico</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP 2: Configuração do Python</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python ${{ env.PYTHON_VERSION }}</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.PYTHON_VERSION }}</span>
<span class="w">        </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pip&#39;</span><span class="w">  </span><span class="c1"># Cache automático de dependências</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP 3: Instalação de dependências</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">python -m pip install --upgrade pip</span>
<span class="w">        </span><span class="no">pip install poetry==${{ env.POETRY_VERSION }}</span>
<span class="w">        </span><span class="no">poetry config virtualenvs.create false</span>
<span class="w">        </span><span class="no">poetry install --with dev</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP 4: Análise de código com múltiplas ferramentas</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run code formatting check</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Verificação de formatação com black</span>
<span class="w">        </span><span class="no">black --check --diff .</span>
<span class="w">        </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run import sorting check</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Verificação de imports com isort</span>
<span class="w">        </span><span class="no">isort --check-only --diff .</span>
<span class="w">        </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run static type checking</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Verificação de tipos com mypy</span>
<span class="w">        </span><span class="no">mypy src/</span>
<span class="w">        </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run linting</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Linting com flake8</span>
<span class="w">        </span><span class="no">flake8 src/ tests/</span>
<span class="w">        </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run security analysis</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Análise de segurança com bandit</span>
<span class="w">        </span><span class="no">bandit -r src/ -f json -o bandit-report.json</span>
<span class="w">        </span>
<span class="w">    </span><span class="c1"># STEP 5: Upload de artefatos para análise posterior</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload security report</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always()</span><span class="w">  </span><span class="c1"># Executa mesmo se steps anteriores falharam</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">security-report</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bandit-report.json</span>
<span class="w">        </span><span class="nt">retention-days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="w">  </span><span class="c1"># JOB 2: Execução de Testes (Matrix Strategy)</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Tests (Python ${{ matrix.python-version }})</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.os }}</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code-quality</span><span class="w">  </span><span class="c1"># Aguarda validação de código</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># ESTRATÉGIA DE MATRIZ: Testa múltiplas versões/sistemas</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">fail-fast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w">  </span><span class="c1"># Não para se uma combinação falhar</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">ubuntu-latest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">windows-latest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">macos-latest</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3.10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;3.11&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">exclude</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Exclui combinações desnecessárias</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">macos-latest</span>
<span class="w">            </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.10&#39;</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout repository</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python ${{ matrix.python-version }}</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.python-version }}</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">python -m pip install --upgrade pip</span>
<span class="w">        </span><span class="no">pip install poetry</span>
<span class="w">        </span><span class="no">poetry install</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP: Testes com cobertura</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests with coverage</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Execução de testes com pytest e coverage</span>
<span class="w">        </span><span class="no">poetry run pytest \</span>
<span class="w">          </span><span class="no">--cov=src \</span>
<span class="w">          </span><span class="no">--cov-report=xml \</span>
<span class="w">          </span><span class="no">--cov-report=html \</span>
<span class="w">          </span><span class="no">--cov-report=term-missing \</span>
<span class="w">          </span><span class="no">--junitxml=pytest-results.xml \</span>
<span class="w">          </span><span class="no">tests/</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP: Upload de resultados de teste</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload test results</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always()</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-results-${{ matrix.python-version }}-${{ matrix.os }}</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">pytest-results.xml</span>
<span class="w">          </span><span class="no">htmlcov/</span>
<span class="w">          </span><span class="no">.coverage</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP: Publicação de cobertura (apenas Ubuntu/Python 3.12)</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload coverage to Codecov</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">matrix.os == &#39;ubuntu-latest&#39; &amp;&amp; matrix.python-version == &#39;3.12&#39;</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">codecov/codecov-action@v3</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./coverage.xml</span>
<span class="w">        </span><span class="nt">flags</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unittests</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">codecov-umbrella</span>

<span class="w">  </span><span class="c1"># JOB 3: Build e Packaging</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build &amp; Package</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">code-quality</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">tests</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Aguarda múltiplos jobs</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span><span class="w">  </span><span class="c1"># Define outputs para outros jobs</span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.version.outputs.version }}</span>
<span class="w">      </span><span class="nt">artifact-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.build.outputs.artifact-name }}</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout repository</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fetch-depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">  </span><span class="c1"># Necessário para versionamento baseado em git</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.PYTHON_VERSION }}</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP: Determinação de versão dinâmica</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Determine version</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">version</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Usa git describe para versionamento semântico</span>
<span class="w">        </span><span class="no">VERSION=$(git describe --tags --always --dirty)</span>
<span class="w">        </span><span class="no">echo &quot;version=$VERSION&quot; &gt;&gt; $GITHUB_OUTPUT</span>
<span class="w">        </span><span class="no">echo &quot;Determined version: $VERSION&quot;</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install build dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">python -m pip install --upgrade pip</span>
<span class="w">        </span><span class="no">pip install poetry build</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP: Build do pacote</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build package</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Build com poetry</span>
<span class="w">        </span><span class="no">poetry version ${{ steps.version.outputs.version }}</span>
<span class="w">        </span><span class="no">poetry build</span>
<span class="w">        </span>
<span class="w">        </span><span class="no"># Define nome do artefato</span>
<span class="w">        </span><span class="no">ARTIFACT_NAME=&quot;package-${{ steps.version.outputs.version }}&quot;</span>
<span class="w">        </span><span class="no">echo &quot;artifact-name=$ARTIFACT_NAME&quot; &gt;&gt; $GITHUB_OUTPUT</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP: Upload do pacote construído</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload package artifacts</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.build.outputs.artifact-name }}</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dist/</span>
<span class="w">        </span><span class="nt">retention-days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">90</span>

<span class="w">  </span><span class="c1"># JOB 4: Deploy Condicional</span>
<span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to ${{ github.event.inputs.environment || &#39;staging&#39; }}</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">build</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.ref == &#39;refs/heads/main&#39; &amp;&amp; github.event_name != &#39;pull_request&#39;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.event.inputs.environment || &#39;staging&#39; }}</span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://app-${{ github.event.inputs.environment || &#39;staging&#39; }}.exemplo.com</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Download package artifacts</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/download-artifact@v3</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ needs.build.outputs.artifact-name }}</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dist/</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to environment</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">echo &quot;Deploying version ${{ needs.build.outputs.version }}&quot;</span>
<span class="w">        </span><span class="no">echo &quot;to environment ${{ github.event.inputs.environment || &#39;staging&#39; }}&quot;</span>
<span class="w">        </span><span class="no"># Aqui viria a lógica real de deploy</span>
<span class="w">        </span><span class="no">ls -la dist/</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># STEP: Notificação de sucesso</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Notify deployment success</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success()</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">echo &quot;🚀 Deployment successful!&quot;</span>
<span class="w">        </span><span class="no">echo &quot;Version: ${{ needs.build.outputs.version }}&quot;</span>
<span class="w">        </span><span class="no">echo &quot;Environment: ${{ github.event.inputs.environment || &#39;staging&#39; }}&quot;</span>
</pre></div>
</div>
</section>
<section id="analise-de-consequencias-estrategias-de-workflow">
<h4>2.4.3. Análise de Consequências: Estratégias de Workflow<a class="headerlink" href="#analise-de-consequencias-estrategias-de-workflow" title="Link to this heading">#</a></h4>
<p>A arquitetura de workflows tem impacto direto na eficiência, confiabilidade e custo da automação. Diferentes estratégias se adequam a diferentes contextos e necessidades.</p>
<p><strong>Estratégias Principais:</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Estratégia</p></th>
<th class="head"><p>Descrição</p></th>
<th class="head"><p>Vantagens</p></th>
<th class="head"><p>Desvantagens</p></th>
<th class="head"><p>Ideal para</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Monolítico</strong></p></td>
<td><p>Um único workflow com todos os jobs sequenciais</p></td>
<td><p>- <strong>Simplicidade:</strong> Fácil de entender e debugar<br>- <strong>Ordem Garantida:</strong> Execução linear previsível<br>- <strong>Compartilhamento Fácil:</strong> Artefatos passados entre steps</p></td>
<td><p>- <strong>Lentidão:</strong> Não aproveita paralelismo<br>- <strong>Falha Única:</strong> Um erro para todo o pipeline<br>- <strong>Inflexibilidade:</strong> Difícil de personalizar partes</p></td>
<td><p>Projetos pequenos, pipelines simples, equipes iniciantes</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Paralelo</strong></p></td>
<td><p>Múltiplos jobs executando simultaneamente</p></td>
<td><p>- <strong>Velocidade:</strong> Aproveita paralelismo máximo<br>- <strong>Eficiência:</strong> Reduz tempo total de execução<br>- <strong>Isolamento:</strong> Falhas não afetam outros jobs</p></td>
<td><p>- <strong>Complexidade:</strong> Dependências podem ser confusas<br>- <strong>Recursos:</strong> Pode esgotar runners disponíveis<br>- <strong>Debugging:</strong> Mais difícil rastrear problemas</p></td>
<td><p>Projetos médios/grandes, testes independentes, equipes experientes</p></td>
</tr>
<tr class="row-even"><td><p><strong>Híbrido</strong></p></td>
<td><p>Combinação de execução paralela e sequencial estratégica</p></td>
<td><p>- <strong>Flexibilidade:</strong> Otimiza onde faz sentido<br>- <strong>Controle:</strong> Balanceia velocidade e dependências<br>- <strong>Escalabilidade:</strong> Adapta-se ao crescimento</p></td>
<td><p>- <strong>Planejamento:</strong> Requer análise cuidadosa<br>- <strong>Manutenção:</strong> Mais complexo de manter<br>- <strong>Documentação:</strong> Necessita documentação detalhada</p></td>
<td><p>Projetos complexos, múltiplos ambientes, equipes maduras</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Exemplo de Workflow Híbrido Otimizado:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hybrid Optimized Pipeline</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">develop</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># FASE 1: Validação Rápida (Paralelo)</span>
<span class="w">  </span><span class="nt">fast-checks</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Fast Quality Checks</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run fast linting</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># Linting rápido apenas em arquivos modificados</span>
<span class="w">          </span><span class="no">git diff --name-only HEAD~1 | grep &#39;\.py$&#39; | xargs flake8</span>

<span class="w">  </span><span class="nt">security-scan</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Security Analysis</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run security scan</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bandit -r . -f json</span>

<span class="w">  </span><span class="c1"># FASE 2: Testes Completos (Aguarda Fase 1)</span>
<span class="w">  </span><span class="nt">comprehensive-tests</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Full Test Suite</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">fast-checks</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">security-scan</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Só executa se validação passou</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">test-type</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">unit</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">integration</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">e2e</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run ${{ matrix.test-type }} tests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest tests/${{ matrix.test-type }}/</span>

<span class="w">  </span><span class="c1"># FASE 3: Deploy (Sequencial, apenas main)</span>
<span class="w">  </span><span class="nt">deploy-staging</span><span class="p">:</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.ref == &#39;refs/heads/main&#39;</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comprehensive-tests</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to staging</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;Deploying to staging...&quot;</span>

<span class="w">  </span><span class="nt">deploy-production</span><span class="p">:</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.ref == &#39;refs/heads/main&#39;</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy-staging</span><span class="w">  </span><span class="c1"># Aguarda staging</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span><span class="w">  </span><span class="c1"># Requer aprovação manual</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to production</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;Deploying to production...&quot;</span>
</pre></div>
</div>
</section>
<section id="analise-critica-armadilhas-e-limitacoes-comuns">
<h4>2.4.4. Análise Crítica: Armadilhas e Limitações Comuns<a class="headerlink" href="#analise-critica-armadilhas-e-limitacoes-comuns" title="Link to this heading">#</a></h4>
<p>O GitHub Actions, apesar de poderoso, possui limitações e armadilhas que podem impactar significativamente a eficiência e confiabilidade dos workflows.</p>
<p><strong>Limitações de Recursos:</strong></p>
<ul class="simple">
<li><p><strong>Tempo de Execução:</strong> Jobs têm limite de 6 horas (runners hospedados) ou 35 dias (self-hosted). Workflows completos são limitados a 72 horas.</p></li>
<li><p><strong>Uso Mensal:</strong> Contas gratuitas têm limite de 2000 minutos/mês para runners hospedados. Contas pagas têm cotas baseadas no plano.</p></li>
<li><p><strong>Concurrent Jobs:</strong> Limite de jobs simultâneos varia por plano (20 para contas gratuitas, até 180 para Enterprise).</p></li>
<li><p><strong>Artefatos:</strong> Limite de 10GB por artefato, retenção máxima de 400 dias (configurável).</p></li>
</ul>
<p><strong>Armadilhas Comuns:</strong></p>
<ol class="arabic simple">
<li><p><strong>Dependências Circulares em Jobs:</strong></p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ ERRO: Dependência circular</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">job-a</span><span class="p">:</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job-b</span>
<span class="w">  </span><span class="nt">job-b</span><span class="p">:</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job-a</span><span class="w">  </span><span class="c1"># Isso criará um deadlock</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Uso Ineficiente de Matrix Strategy:</strong></p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ PROBLEMÁTICO: Matrix desnecessariamente grande</span>
<span class="nt">strategy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">ubuntu-latest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">windows-latest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">macos-latest</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">python</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3.8&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;3.9&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;3.10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;3.11&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">node</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;16&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;18&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;20&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="c1"># Isso criará 45 jobs! (3 × 5 × 3)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Secrets e Variáveis de Ambiente Inseguras:</strong></p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ PERIGOSO: Exposição de secrets em logs</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Debug info</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">echo &quot;Database URL: ${{ secrets.DATABASE_URL }}&quot;  # Aparecerá nos logs!</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Falta de Tratamento de Erro:</strong></p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ PROBLEMÁTICO: Não trata falhas adequadamente</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">deploy.sh</span>
<span class="w">    </span><span class="no"># Se deploy.sh falhar, o workflow para aqui sem cleanup</span>
</pre></div>
</div>
<p><strong>Soluções e Boas Práticas:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ✅ BOM: Workflow bem estruturado</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Robust Pipeline</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>

<span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Variáveis centralizadas</span>
<span class="w">  </span><span class="nt">PYTHON_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span>
<span class="w">  </span><span class="nt">NODE_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;18&#39;</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">validate</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Quick Validation</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">should-deploy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.check.outputs.should-deploy }}</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fetch-depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">  </span><span class="c1"># Para comparação com commit anterior</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check if deployment needed</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Lógica para determinar se precisa fazer deploy</span>
<span class="w">        </span><span class="no">if git diff --name-only HEAD~1 | grep -E &quot;(src/|docker/)&quot; &gt; /dev/null; then</span>
<span class="w">          </span><span class="no">echo &quot;should-deploy=true&quot; &gt;&gt; $GITHUB_OUTPUT</span>
<span class="w">        </span><span class="no">else</span>
<span class="w">          </span><span class="no">echo &quot;should-deploy=false&quot; &gt;&gt; $GITHUB_OUTPUT</span>
<span class="w">        </span><span class="no">fi</span>

<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test Suite</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># Matrix otimizada</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">fail-fast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">test-group</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">unit</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">integration</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">include</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">test-group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unit</span>
<span class="w">            </span><span class="nt">pytest-args</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tests/unit</span><span class="nv"> </span><span class="s">--maxfail=5&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">test-group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integration</span>
<span class="w">            </span><span class="nt">pytest-args</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tests/integration</span><span class="nv"> </span><span class="s">--maxfail=1&quot;</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.PYTHON_VERSION }}</span>
<span class="w">        </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">pip install -r requirements.txt</span>
<span class="w">        </span><span class="no">pip install pytest pytest-cov</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># Tratamento robusto de erros</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">set -e  # Para na primeira falha</span>
<span class="w">        </span><span class="no">pytest ${{ matrix.pytest-args }} \</span>
<span class="w">          </span><span class="no">--cov=src \</span>
<span class="w">          </span><span class="no">--cov-report=xml \</span>
<span class="w">          </span><span class="no">--cov-fail-under=80</span>
<span class="w">      </span><span class="nt">continue-on-error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.test-group == &#39;integration&#39; }}</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># Sempre faz upload dos resultados, mesmo em caso de falha</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload test results</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always()</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-results-${{ matrix.test-group }}</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">coverage.xml</span>
<span class="w">          </span><span class="no">.coverage</span>

<span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy Application</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">validate</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">test</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">needs.validate.outputs.should-deploy == &#39;true&#39; &amp;&amp; github.ref == &#39;refs/heads/main&#39;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># Uso seguro de secrets</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Configure deployment</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="nt">DEPLOY_KEY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.DEPLOY_PRIVATE_KEY }}</span>
<span class="w">        </span><span class="nt">DB_CONNECTION</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.DATABASE_URL }}</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no"># Secrets nunca são ecoados</span>
<span class="w">        </span><span class="no">echo &quot;Configuring deployment...&quot;</span>
<span class="w">        </span><span class="no">echo &quot;Deploy key length: ${#DEPLOY_KEY}&quot;</span>
<span class="w">        </span><span class="no"># Salva em arquivo temporário seguro</span>
<span class="w">        </span><span class="no">echo &quot;$DEPLOY_KEY&quot; &gt; /tmp/deploy_key</span>
<span class="w">        </span><span class="no">chmod 600 /tmp/deploy_key</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy with rollback capability</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">set -e</span>
<span class="w">        </span>
<span class="w">        </span><span class="no"># Backup da versão atual</span>
<span class="w">        </span><span class="no">./scripts/backup-current.sh</span>
<span class="w">        </span>
<span class="w">        </span><span class="no"># Deploy da nova versão</span>
<span class="w">        </span><span class="no">if ! ./scripts/deploy.sh; then</span>
<span class="w">          </span><span class="no">echo &quot;Deploy failed, rolling back...&quot;</span>
<span class="w">          </span><span class="no">./scripts/rollback.sh</span>
<span class="w">          </span><span class="no">exit 1</span>
<span class="w">        </span><span class="no">fi</span>
<span class="w">        </span>
<span class="w">        </span><span class="no"># Verificação de saúde</span>
<span class="w">        </span><span class="no">if ! ./scripts/health-check.sh; then</span>
<span class="w">          </span><span class="no">echo &quot;Health check failed, rolling back...&quot;</span>
<span class="w">          </span><span class="no">./scripts/rollback.sh</span>
<span class="w">          </span><span class="no">exit 1</span>
<span class="w">        </span><span class="no">fi</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1"># Cleanup sempre executa</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cleanup</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always()</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">rm -f /tmp/deploy_key</span>
<span class="w">        </span><span class="no">./scripts/cleanup.sh</span>
</pre></div>
</div>
</section>
<section id="configuracao-avancada-actions-customizadas-e-reutilizacao">
<h4>2.4.5. Configuração Avançada: Actions Customizadas e Reutilização<a class="headerlink" href="#configuracao-avancada-actions-customizadas-e-reutilizacao" title="Link to this heading">#</a></h4>
<p>Para projetos complexos, a criação de actions customizadas e estratégias de reutilização se tornam essenciais para manter a eficiência e consistência.</p>
<p><strong>Actions Customizadas:</strong></p>
<p>As actions customizadas permitem encapsular lógica complexa em componentes reutilizáveis. Existem três tipos principais:</p>
<ol class="arabic simple">
<li><p><strong>JavaScript Actions:</strong> Executam diretamente no runner</p></li>
<li><p><strong>Docker Container Actions:</strong> Executam em container isolado</p></li>
<li><p><strong>Composite Actions:</strong> Combinam múltiplos steps</p></li>
</ol>
<p><strong>Exemplo de Composite Action:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># .github/actions/setup-python-env/action.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Setup</span><span class="nv"> </span><span class="s">Python</span><span class="nv"> </span><span class="s">Environment&#39;</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Sets</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">Python</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">caching</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">installs</span><span class="nv"> </span><span class="s">dependencies&#39;</span>
<span class="nt">inputs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">python-version</span><span class="p">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Python</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">use&#39;</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span>
<span class="w">  </span><span class="nt">requirements-file</span><span class="p">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Path</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">requirements</span><span class="nv"> </span><span class="s">file&#39;</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;requirements.txt&#39;</span>
<span class="w">  </span><span class="nt">cache-key-suffix</span><span class="p">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Additional</span><span class="nv"> </span><span class="s">suffix</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">cache</span><span class="nv"> </span><span class="s">key&#39;</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>

<span class="nt">outputs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cache-hit</span><span class="p">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Whether</span><span class="nv"> </span><span class="s">cache</span><span class="nv"> </span><span class="s">was</span><span class="nv"> </span><span class="s">hit&#39;</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.cache.outputs.cache-hit }}</span>
<span class="w">  </span><span class="nt">python-path</span><span class="p">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Path</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Python</span><span class="nv"> </span><span class="s">executable&#39;</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.setup.outputs.python-path }}</span>

<span class="nt">runs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;composite&#39;</span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python ${{ inputs.python-version }}</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">setup</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ inputs.python-version }}</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cache dependencies</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cache</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/cache@v3</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~/.cache/pip</span>
<span class="w">        </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip-${{ runner.os }}-${{ inputs.python-version }}-${{ hashFiles(inputs.requirements-file) }}-${{ inputs.cache-key-suffix }}</span>
<span class="w">        </span><span class="nt">restore-keys</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">pip-${{ runner.os }}-${{ inputs.python-version }}-</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">      </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">python -m pip install --upgrade pip</span>
<span class="w">        </span><span class="no">if [ -f &quot;${{ inputs.requirements-file }}&quot; ]; then</span>
<span class="w">          </span><span class="no">pip install -r ${{ inputs.requirements-file }}</span>
<span class="w">        </span><span class="no">fi</span>
<span class="w">        </span><span class="no">pip list  # Para debugging</span>
</pre></div>
</div>
<p><strong>Uso da Action Customizada:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Workflow principal</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup Python Environment</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">setup-python</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./.github/actions/setup-python-env</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span>
<span class="w">        </span><span class="nt">requirements-file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;requirements-dev.txt&#39;</span>
<span class="w">        </span><span class="nt">cache-key-suffix</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;dev&#39;</span>
<span class="w">    </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Show setup results</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">echo &quot;Cache hit: ${{ steps.setup-python.outputs.cache-hit }}&quot;</span>
<span class="w">        </span><span class="no">echo &quot;Python path: ${{ steps.setup-python.outputs.python-path }}&quot;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="secao-3-aplicacao-pratica-e-implementacao-avancada">
<h2>Seção 3: Aplicação Prática e Implementação Avançada<a class="headerlink" href="#secao-3-aplicacao-pratica-e-implementacao-avancada" title="Link to this heading">#</a></h2>
<section id="projeto-integrador-sistema-de-gerenciamento-de-tarefas-empresarial">
<h3>3.1. Projeto Integrador: Sistema de Gerenciamento de Tarefas Empresarial<a class="headerlink" href="#projeto-integrador-sistema-de-gerenciamento-de-tarefas-empresarial" title="Link to this heading">#</a></h3>
<p>Esta seção apresenta a implementação completa de um sistema real de gerenciamento de tarefas, aplicando todas as práticas de Git, CI/CD e GitHub Actions estudadas anteriormente. O projeto simula um ambiente empresarial com múltiplos ambientes, estratégias de deploy sofisticadas e monitoramento completo.</p>
<section id="arquitetura-do-sistema-e-analise-de-requisitos">
<h4>3.1.1. Arquitetura do Sistema e Análise de Requisitos<a class="headerlink" href="#arquitetura-do-sistema-e-analise-de-requisitos" title="Link to this heading">#</a></h4>
<p><strong>Visão Geral do Sistema:</strong></p>
<p>O Sistema de Gerenciamento de Tarefas Empresarial é uma aplicação web full-stack que integra:</p>
<ul class="simple">
<li><p><strong>Backend API RESTful</strong> (Python/FastAPI) com autenticação JWT</p></li>
<li><p><strong>Frontend SPA</strong> (React/TypeScript) com interface responsiva</p></li>
<li><p><strong>Banco de Dados</strong> (PostgreSQL) com migrations automatizadas</p></li>
<li><p><strong>Cache distribuído</strong> (Redis) para performance</p></li>
<li><p><strong>Sistema de monitoramento</strong> (Prometheus/Grafana) para observabilidade</p></li>
<li><p><strong>Documentação automática</strong> (OpenAPI/Swagger) para APIs</p></li>
</ul>
<p><strong>Requisitos Funcionais:</strong></p>
<ul class="simple">
<li><p>Gerenciamento completo de tarefas (CRUD)</p></li>
<li><p>Sistema de autenticação e autorização</p></li>
<li><p>Notificações em tempo real</p></li>
<li><p>Relatórios e dashboards</p></li>
<li><p>API pública com rate limiting</p></li>
<li><p>Suporte a múltiplos projetos e equipes</p></li>
</ul>
<p><strong>Requisitos Não-Funcionais:</strong></p>
<ul class="simple">
<li><p>Disponibilidade: 99.9% uptime</p></li>
<li><p>Performance: &lt; 200ms response time para 95% das requests</p></li>
<li><p>Escalabilidade: Suporte a 10,000+ usuários simultâneos</p></li>
<li><p>Segurança: Conformidade com OWASP Top 10</p></li>
<li><p>Manutenibilidade: Cobertura de testes &gt; 85%</p></li>
</ul>
<blockquote>
<div><p><strong>Contexto Empresarial:</strong></p>
<p>Este projeto simula um cenário real onde uma empresa de médio porte (200-500 desenvolvedores) precisa implementar uma solução robusta de gestão de tarefas. A solução deve suportar múltiplas equipes, integrar-se com ferramentas existentes (Slack, JIRA, GitHub), e seguir padrões de segurança e compliance empresariais.</p>
</div></blockquote>
</section>
<section id="estrutura-do-projeto-e-organizacao-do-repositorio">
<h4>3.1.2. Estrutura do Projeto e Organização do Repositório<a class="headerlink" href="#estrutura-do-projeto-e-organizacao-do-repositorio" title="Link to this heading">#</a></h4>
<p><strong>Estrutura Monorepo Organizada:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>task-management-system/
├── .github/
│   ├── workflows/
│   │   ├── ci-backend.yml
│   │   ├── ci-frontend.yml
│   │   ├── cd-staging.yml
│   │   ├── cd-production.yml
│   │   ├── security-scan.yml
│   │   └── dependency-update.yml
│   ├── actions/
│   │   ├── setup-node-cache/
│   │   ├── setup-python-env/
│   │   ├── docker-build-push/
│   │   └── notify-deployment/
│   ├── ISSUE_TEMPLATE/
│   │   ├── bug_report.md
│   │   ├── feature_request.md
│   │   └── security_vulnerability.md
│   └── pull_request_template.md
├── backend/
│   ├── src/
│   │   ├── api/
│   │   │   ├── __init__.py
│   │   │   ├── auth/
│   │   │   ├── tasks/
│   │   │   ├── users/
│   │   │   └── projects/
│   │   ├── core/
│   │   │   ├── config.py
│   │   │   ├── database.py
│   │   │   ├── security.py
│   │   │   └── exceptions.py
│   │   ├── models/
│   │   │   ├── user.py
│   │   │   ├── task.py
│   │   │   └── project.py
│   │   ├── services/
│   │   │   ├── task_service.py
│   │   │   ├── auth_service.py
│   │   │   └── notification_service.py
│   │   └── utils/
│   │       ├── validators.py
│   │       ├── decorators.py
│   │       └── helpers.py
│   ├── tests/
│   │   ├── unit/
│   │   ├── integration/
│   │   ├── e2e/
│   │   └── performance/
│   ├── migrations/
│   ├── docker/
│   │   ├── Dockerfile
│   │   ├── Dockerfile.dev
│   │   └── entrypoint.sh
│   ├── scripts/
│   │   ├── build.py
│   │   ├── test.py
│   │   ├── deploy.py
│   │   └── health-check.py
│   ├── requirements/
│   │   ├── base.txt
│   │   ├── dev.txt
│   │   ├── test.txt
│   │   └── prod.txt
│   └── pyproject.toml
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── hooks/
│   │   ├── services/
│   │   ├── utils/
│   │   └── types/
│   ├── public/
│   ├── tests/
│   │   ├── unit/
│   │   ├── integration/
│   │   └── e2e/
│   ├── docker/
│   ├── package.json
│   ├── tsconfig.json
│   └── vite.config.ts
├── infrastructure/
│   ├── terraform/
│   │   ├── environments/
│   │   │   ├── staging/
│   │   │   └── production/
│   │   ├── modules/
│   │   │   ├── vpc/
│   │   │   ├── eks/
│   │   │   ├── rds/
│   │   │   └── redis/
│   │   └── main.tf
│   ├── kubernetes/
│   │   ├── manifests/
│   │   ├── helm-charts/
│   │   └── kustomize/
│   └── monitoring/
│       ├── prometheus/
│       ├── grafana/
│       └── alertmanager/
├── docs/
│   ├── api/
│   ├── deployment/
│   ├── development/
│   └── architecture/
├── scripts/
│   ├── setup-dev-env.sh
│   ├── run-tests.sh
│   ├── build-all.sh
│   └── deploy.sh
├── docker-compose.yml
├── docker-compose.dev.yml
├── Makefile
├── README.md
├── CONTRIBUTING.md
├── SECURITY.md
└── .gitignore
</pre></div>
</div>
<p><strong>Configuração Git Avançada:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># .gitignore empresarial abrangente</span>
<span class="c1"># ========================================</span>

<span class="c1"># Dependências</span>
node_modules/
venv/
env/
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
pip-log.txt
pip-delete-this-directory.txt

<span class="c1"># Logs</span>
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

<span class="c1"># Configurações de IDE</span>
.vscode/
.idea/
*.swp
*.swo
*~

<span class="c1"># Dados sensíveis</span>
.env
.env.local
.env.staging
.env.production
secrets/
*.key
*.pem
config/local.json

<span class="c1"># Build artifacts</span>
dist/
build/
*.egg-info/
.coverage
htmlcov/
.pytest_cache/
.mypy_cache/

<span class="c1"># Dados temporários</span>
tmp/
temp/
*.tmp
*.temp
.DS_Store
Thumbs.db

<span class="c1"># Arquivos grandes</span>
*.zip
*.tar.gz
*.rar
*.iso
*.dmg
*.exe

<span class="c1"># Terraform</span>
*.tfstate
*.tfstate.backup
.terraform/
.terraform.lock.hcl

<span class="c1"># Kubernetes</span>
kubeconfig
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># .gitattributes para controle fino</span>
<span class="c1"># ================================</span>

<span class="c1"># Texto files</span>
*.md<span class="w"> </span>text
*.txt<span class="w"> </span>text
*.json<span class="w"> </span>text
*.yml<span class="w"> </span>text
*.yaml<span class="w"> </span>text
*.xml<span class="w"> </span>text
*.csv<span class="w"> </span>text

<span class="c1"># Scripts devem sempre usar LF</span>
*.sh<span class="w"> </span>text<span class="w"> </span><span class="nv">eol</span><span class="o">=</span>lf
*.py<span class="w"> </span>text<span class="w"> </span><span class="nv">eol</span><span class="o">=</span>lf
*.js<span class="w"> </span>text<span class="w"> </span><span class="nv">eol</span><span class="o">=</span>lf
*.ts<span class="w"> </span>text<span class="w"> </span><span class="nv">eol</span><span class="o">=</span>lf

<span class="c1"># Imagens são binary</span>
*.png<span class="w"> </span>binary
*.jpg<span class="w"> </span>binary
*.jpeg<span class="w"> </span>binary
*.gif<span class="w"> </span>binary
*.ico<span class="w"> </span>binary
*.svg<span class="w"> </span>text

<span class="c1"># Fonts são binary</span>
*.woff<span class="w"> </span>binary
*.woff2<span class="w"> </span>binary
*.ttf<span class="w"> </span>binary
*.otf<span class="w"> </span>binary

<span class="c1"># Archives são binary</span>
*.zip<span class="w"> </span>binary
*.tar.gz<span class="w"> </span>binary
*.7z<span class="w"> </span>binary

<span class="c1"># Configurações de merge para arquivos específicos</span>
package-lock.json<span class="w"> </span><span class="nv">merge</span><span class="o">=</span>ours
yarn.lock<span class="w"> </span><span class="nv">merge</span><span class="o">=</span>ours
</pre></div>
</div>
</section>
<section id="implementacao-do-backend-fastapi-com-padroes-empresariais">
<h4>3.1.3. Implementação do Backend: FastAPI com Padrões Empresariais<a class="headerlink" href="#implementacao-do-backend-fastapi-com-padroes-empresariais" title="Link to this heading">#</a></h4>
<p><strong>Configuração Principal da Aplicação:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># backend/src/main.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Sistema de Gerenciamento de Tarefas Empresarial</span>
<span class="sd">==============================================</span>

<span class="sd">Aplicação FastAPI com arquitetura limpa, seguindo padrões empresariais</span>
<span class="sd">para escalabilidade, manutenibilidade e observabilidade.</span>

<span class="sd">Características Principais:</span>
<span class="sd">- Arquitetura hexagonal (ports and adapters)</span>
<span class="sd">- Dependency injection com FastAPI</span>
<span class="sd">- Observabilidade completa (logs, metrics, traces)</span>
<span class="sd">- Rate limiting e throttling</span>
<span class="sd">- Versionamento de API</span>
<span class="sd">- Documentação automática</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">contextlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">asynccontextmanager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">Request</span><span class="p">,</span> <span class="n">Response</span><span class="p">,</span> <span class="n">status</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.middleware.cors</span><span class="w"> </span><span class="kn">import</span> <span class="n">CORSMiddleware</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.middleware.gzip</span><span class="w"> </span><span class="kn">import</span> <span class="n">GZipMiddleware</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.middleware.trustedhost</span><span class="w"> </span><span class="kn">import</span> <span class="n">TrustedHostMiddleware</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.responses</span><span class="w"> </span><span class="kn">import</span> <span class="n">JSONResponse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.security</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPBearer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">prometheus_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">Histogram</span><span class="p">,</span> <span class="n">generate_latest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">starlette.middleware.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseHTTPMiddleware</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.core.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.core.database</span><span class="w"> </span><span class="kn">import</span> <span class="n">init_db</span><span class="p">,</span> <span class="n">close_db</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.core.logging_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup_logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.core.security</span><span class="w"> </span><span class="kn">import</span> <span class="n">SecurityManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.api.auth.router</span><span class="w"> </span><span class="kn">import</span> <span class="n">router</span> <span class="k">as</span> <span class="n">auth_router</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.api.tasks.router</span><span class="w"> </span><span class="kn">import</span> <span class="n">router</span> <span class="k">as</span> <span class="n">tasks_router</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.api.users.router</span><span class="w"> </span><span class="kn">import</span> <span class="n">router</span> <span class="k">as</span> <span class="n">users_router</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.api.projects.router</span><span class="w"> </span><span class="kn">import</span> <span class="n">router</span> <span class="k">as</span> <span class="n">projects_router</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.api.health.router</span><span class="w"> </span><span class="kn">import</span> <span class="n">router</span> <span class="k">as</span> <span class="n">health_router</span>

<span class="c1"># Configuração de logging</span>
<span class="n">setup_logging</span><span class="p">()</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Métricas Prometheus</span>
<span class="n">REQUEST_COUNT</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span>
    <span class="s1">&#39;http_requests_total&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;Total HTTP requests&#39;</span><span class="p">,</span> 
    <span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">REQUEST_DURATION</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
    <span class="s1">&#39;http_request_duration_seconds&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;HTTP request duration in seconds&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MetricsMiddleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Middleware para coleta de métricas de performance.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Observabilidade</span>
<span class="sd">    Collecting metrics is essential for understanding system behavior,</span>
<span class="sd">    identifying bottlenecks, and ensuring SLAs are met.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        
        <span class="c1"># Processa request</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        
        <span class="c1"># Calcula duração</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
        
        <span class="c1"># Atualiza métricas</span>
        <span class="n">REQUEST_COUNT</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
            <span class="n">method</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
        <span class="p">)</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>
        
        <span class="n">REQUEST_DURATION</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span>
            <span class="n">method</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span>
        <span class="p">)</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        
        <span class="c1"># Adiciona headers de performance</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;X-Process-Time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;X-Request-ID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;request_id&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">response</span>

<span class="k">class</span><span class="w"> </span><span class="nc">RateLimitMiddleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Middleware para rate limiting por IP e usuário.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Proteção contra Abuso</span>
<span class="sd">    Rate limiting prevents API abuse and ensures fair resource allocation</span>
<span class="sd">    among all users.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">,</span> <span class="n">calls</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calls</span> <span class="o">=</span> <span class="n">calls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="n">period</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
        <span class="n">client_ip</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        
        <span class="c1"># Cleanup old entries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">ip</span><span class="p">:</span> <span class="n">timestamps</span> <span class="k">for</span> <span class="n">ip</span><span class="p">,</span> <span class="n">timestamps</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">timestamps</span> <span class="ow">and</span> <span class="n">timestamps</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span>
        <span class="p">}</span>
        
        <span class="c1"># Check rate limit</span>
        <span class="k">if</span> <span class="n">client_ip</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="c1"># Remove old timestamps</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ts</span> <span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_ip</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">ts</span> <span class="o">&gt;</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span>
            <span class="p">]</span>
            
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_ip</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rate limit exceeded for IP: </span><span class="si">{</span><span class="n">client_ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_429_TOO_MANY_REQUESTS</span><span class="p">,</span>
                    <span class="n">content</span><span class="o">=</span><span class="p">{</span>
                        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Rate limit exceeded&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Too many requests. Limit: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="si">}</span><span class="s2"> per </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="si">}</span><span class="s2"> seconds&quot;</span>
                    <span class="p">}</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1"># Add current timestamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_ip</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

<span class="nd">@asynccontextmanager</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">lifespan</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gerencia ciclo de vida da aplicação.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Graceful Startup/Shutdown</span>
<span class="sd">    Proper resource management ensures clean startup and shutdown,</span>
<span class="sd">    preventing data corruption and resource leaks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Startup</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;🚀 Iniciando Task Management System...&quot;</span><span class="p">)</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Inicializar banco de dados</span>
        <span class="k">await</span> <span class="n">init_db</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ Banco de dados inicializado&quot;</span><span class="p">)</span>
        
        <span class="c1"># Verificar dependências externas</span>
        <span class="n">security_manager</span> <span class="o">=</span> <span class="n">SecurityManager</span><span class="p">()</span>
        <span class="k">await</span> <span class="n">security_manager</span><span class="o">.</span><span class="n">verify_external_services</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ Serviços externos verificados&quot;</span><span class="p">)</span>
        
        <span class="c1"># Inicializar cache</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">.core.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">init_cache</span>
        <span class="k">await</span> <span class="n">init_cache</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ Cache inicializado&quot;</span><span class="p">)</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;🎉 Aplicação iniciada com sucesso!&quot;</span><span class="p">)</span>
        
        <span class="k">yield</span>  <span class="c1"># Aplicação está rodando</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ Erro durante inicialização: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># Shutdown</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;🔄 Finalizando aplicação...&quot;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">close_db</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ Banco de dados finalizado&quot;</span><span class="p">)</span>
            
            <span class="kn">from</span><span class="w"> </span><span class="nn">.core.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">close_cache</span>
            <span class="k">await</span> <span class="n">close_cache</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ Cache finalizado&quot;</span><span class="p">)</span>
            
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ Erro durante finalização: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;👋 Aplicação finalizada&quot;</span><span class="p">)</span>

<span class="c1"># Configuração da aplicação</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">get_settings</span><span class="p">()</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Task Management System API&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Sistema Empresarial de Gerenciamento de Tarefas</span>
<span class="s2">    </span>
<span class="s2">    ## Características</span>
<span class="s2">    </span>
<span class="s2">    * **Autenticação JWT** - Segurança robusta com refresh tokens</span>
<span class="s2">    * **Rate Limiting** - Proteção contra abuso de API</span>
<span class="s2">    * **Versionamento** - Suporte a múltiplas versões da API</span>
<span class="s2">    * **Observabilidade** - Métricas, logs e traces integrados</span>
<span class="s2">    * **Documentação** - OpenAPI/Swagger automático</span>
<span class="s2">    </span>
<span class="s2">    ## Ambiente</span>
<span class="s2">    </span>
<span class="s2">    - **Ambiente**: </span><span class="si">{environment}</span>
<span class="s2">    - **Versão**: </span><span class="si">{version}</span>
<span class="s2">    - **Debug**: </span><span class="si">{debug}</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">environment</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">ENVIRONMENT</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">VERSION</span><span class="p">,</span>
        <span class="n">debug</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span>
    <span class="p">),</span>
    <span class="n">version</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">VERSION</span><span class="p">,</span>
    <span class="n">lifespan</span><span class="o">=</span><span class="n">lifespan</span><span class="p">,</span>
    <span class="n">docs_url</span><span class="o">=</span><span class="s2">&quot;/docs&quot;</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">redoc_url</span><span class="o">=</span><span class="s2">&quot;/redoc&quot;</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Middleware de segurança</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span>
    <span class="n">TrustedHostMiddleware</span><span class="p">,</span>
    <span class="n">allowed_hosts</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">ALLOWED_HOSTS</span>
<span class="p">)</span>

<span class="c1"># CORS</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span>
    <span class="n">CORSMiddleware</span><span class="p">,</span>
    <span class="n">allow_origins</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">CORS_ORIGINS</span><span class="p">,</span>
    <span class="n">allow_credentials</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">allow_methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
    <span class="n">allow_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="c1"># Compressão</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">GZipMiddleware</span><span class="p">,</span> <span class="n">minimum_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Rate limiting</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">RateLimitMiddleware</span><span class="p">,</span> <span class="n">calls</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

<span class="c1"># Métricas</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">MetricsMiddleware</span><span class="p">)</span>

<span class="c1"># Routers</span>
<span class="n">API_V1_PREFIX</span> <span class="o">=</span> <span class="s2">&quot;/api/v1&quot;</span>

<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span>
    <span class="n">health_router</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/health&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Health Check&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span>
    <span class="n">auth_router</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_V1_PREFIX</span><span class="si">}</span><span class="s2">/auth&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Authentication&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span>
    <span class="n">tasks_router</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_V1_PREFIX</span><span class="si">}</span><span class="s2">/tasks&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Tasks&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span>
    <span class="n">users_router</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_V1_PREFIX</span><span class="si">}</span><span class="s2">/users&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Users&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span>
    <span class="n">projects_router</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_V1_PREFIX</span><span class="si">}</span><span class="s2">/projects&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Projects&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Endpoint de métricas</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/metrics&quot;</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">metrics</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Endpoint para Prometheus scraping.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
        <span class="n">content</span><span class="o">=</span><span class="n">generate_latest</span><span class="p">(),</span>
        <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;text/plain&quot;</span>
    <span class="p">)</span>

<span class="c1"># Handler global de exceções</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">exception_handler</span><span class="p">(</span><span class="n">HTTPException</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">http_exception_handler</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="n">HTTPException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handler global para HTTPException.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Error Handling Centralizado</span>
<span class="sd">    Centralized error handling ensures consistent error responses</span>
<span class="sd">    and proper logging for debugging and monitoring.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;HTTP Exception: </span><span class="si">{</span><span class="n">exc</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">exc</span><span class="o">.</span><span class="n">detail</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
            <span class="s2">&quot;client_ip&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
            <span class="s2">&quot;user_agent&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user-agent&quot;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
        <span class="n">status_code</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="n">detail</span><span class="p">,</span>
            <span class="s2">&quot;status_code&quot;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
            <span class="s2">&quot;request_id&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;request_id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">exception_handler</span><span class="p">(</span><span class="ne">Exception</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">general_exception_handler</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handler para exceções não tratadas.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Unhandled exception: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
            <span class="s2">&quot;client_ip&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
        <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_500_INTERNAL_SERVER_ERROR</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Internal server error&quot;</span><span class="p">,</span>
            <span class="s2">&quot;status_code&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
            <span class="s2">&quot;request_id&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;request_id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>

<span class="c1"># Root endpoint</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">root</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Endpoint raiz com informações da API.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Task Management System API&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">VERSION</span><span class="p">,</span>
        <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">ENVIRONMENT</span><span class="p">,</span>
        <span class="s2">&quot;docs_url&quot;</span><span class="p">:</span> <span class="s2">&quot;/docs&quot;</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">else</span> <span class="s2">&quot;Disabled in production&quot;</span><span class="p">,</span>
        <span class="s2">&quot;health_check&quot;</span><span class="p">:</span> <span class="s2">&quot;/health&quot;</span><span class="p">,</span>
        <span class="s2">&quot;metrics&quot;</span><span class="p">:</span> <span class="s2">&quot;/metrics&quot;</span>
    <span class="p">}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Configuração para desenvolvimento local</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="s2">&quot;main:app&quot;</span><span class="p">,</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">,</span>
        <span class="n">reload</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
        <span class="n">log_level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">else</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span>
        <span class="n">access_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">use_colors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p><strong>Modelos de Dados com Validação Robusta:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># backend/src/models/task.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Modelos de dados para o sistema de tarefas.</span>

<span class="sd">CONCEITO: Domain-Driven Design</span>
<span class="sd">Models represent the business domain and encapsulate business rules,</span>
<span class="sd">ensuring data integrity and consistency.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">decimal</span><span class="w"> </span><span class="kn">import</span> <span class="n">Decimal</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">validator</span><span class="p">,</span> <span class="n">root_validator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Column</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> 
    <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">Enum</span> <span class="k">as</span> <span class="n">SQLEnum</span><span class="p">,</span> <span class="n">JSON</span><span class="p">,</span> <span class="n">Numeric</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.dialects.postgresql</span><span class="w"> </span><span class="kn">import</span> <span class="n">UUID</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.ext.declarative</span><span class="w"> </span><span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">relationship</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskStatus</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Estados possíveis de uma tarefa.&quot;&quot;&quot;</span>
    <span class="n">DRAFT</span> <span class="o">=</span> <span class="s2">&quot;draft&quot;</span>
    <span class="n">TODO</span> <span class="o">=</span> <span class="s2">&quot;todo&quot;</span>
    <span class="n">IN_PROGRESS</span> <span class="o">=</span> <span class="s2">&quot;in_progress&quot;</span>
    <span class="n">IN_REVIEW</span> <span class="o">=</span> <span class="s2">&quot;in_review&quot;</span>
    <span class="n">BLOCKED</span> <span class="o">=</span> <span class="s2">&quot;blocked&quot;</span>
    <span class="n">DONE</span> <span class="o">=</span> <span class="s2">&quot;done&quot;</span>
    <span class="n">CANCELLED</span> <span class="o">=</span> <span class="s2">&quot;cancelled&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskPriority</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prioridades de tarefa.&quot;&quot;&quot;</span>
    <span class="n">LOW</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span>
    <span class="n">MEDIUM</span> <span class="o">=</span> <span class="s2">&quot;medium&quot;</span>
    <span class="n">HIGH</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span>
    <span class="n">CRITICAL</span> <span class="o">=</span> <span class="s2">&quot;critical&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modelo SQLAlchemy para tarefas.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Active Record Pattern</span>
<span class="sd">    O modelo encapsula tanto dados quanto comportamentos relacionados</span>
<span class="sd">    à entidade Task, mantendo coesão e responsabilidade única.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;tasks&quot;</span>
    
    <span class="c1"># Campos principais</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">UUID</span><span class="p">(</span><span class="n">as_uuid</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">SQLEnum</span><span class="p">(</span><span class="n">TaskStatus</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">TODO</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">SQLEnum</span><span class="p">(</span><span class="n">TaskPriority</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="n">TaskPriority</span><span class="o">.</span><span class="n">MEDIUM</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Relacionamentos</span>
    <span class="n">project_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">UUID</span><span class="p">(</span><span class="n">as_uuid</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;projects.id&quot;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">assignee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">UUID</span><span class="p">(</span><span class="n">as_uuid</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;users.id&quot;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">creator_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">UUID</span><span class="p">(</span><span class="n">as_uuid</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;users.id&quot;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Metadados temporais</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">))</span>
    <span class="n">updated_at</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span> <span class="n">onupdate</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">))</span>
    <span class="n">due_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">completed_at</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Estimativas e tracking</span>
    <span class="n">estimated_hours</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Numeric</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">actual_hours</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Numeric</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">story_points</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Dados flexíveis</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">JSON</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">{})</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">JSON</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[])</span>
    
    <span class="c1"># Relacionamentos SQLAlchemy</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Project&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;tasks&quot;</span><span class="p">)</span>
    <span class="n">assignee</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">,</span> <span class="n">foreign_keys</span><span class="o">=</span><span class="p">[</span><span class="n">assignee_id</span><span class="p">],</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;assigned_tasks&quot;</span><span class="p">)</span>
    <span class="n">creator</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">,</span> <span class="n">foreign_keys</span><span class="o">=</span><span class="p">[</span><span class="n">creator_id</span><span class="p">],</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;created_tasks&quot;</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;TaskComment&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="n">cascade</span><span class="o">=</span><span class="s2">&quot;all, delete-orphan&quot;</span><span class="p">)</span>
    <span class="n">attachments</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;TaskAttachment&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="n">cascade</span><span class="o">=</span><span class="s2">&quot;all, delete-orphan&quot;</span><span class="p">)</span>
    <span class="n">time_logs</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;TimeLog&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="n">cascade</span><span class="o">=</span><span class="s2">&quot;all, delete-orphan&quot;</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Task(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, title=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;, status=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&#39;)&gt;&quot;</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_overdue</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verifica se a tarefa está atrasada.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">due_date</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">due_date</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">DONE</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">completion_percentage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcula porcentagem de conclusão baseada no status.&quot;&quot;&quot;</span>
        <span class="n">status_percentage</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">DRAFT</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">TODO</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_PROGRESS</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_REVIEW</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">BLOCKED</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">DONE</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">CANCELLED</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">status_percentage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">can_transition_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_status</span><span class="p">:</span> <span class="n">TaskStatus</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Valida se a transição de status é permitida.</span>
<span class="sd">        </span>
<span class="sd">        CONCEITO: State Machine</span>
<span class="sd">        Implementa regras de negócio para transições de estado,</span>
<span class="sd">        garantindo que a tarefa siga fluxos válidos.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valid_transitions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">DRAFT</span><span class="p">:</span> <span class="p">[</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">TODO</span><span class="p">,</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">CANCELLED</span><span class="p">],</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">TODO</span><span class="p">:</span> <span class="p">[</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_PROGRESS</span><span class="p">,</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">CANCELLED</span><span class="p">],</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_PROGRESS</span><span class="p">:</span> <span class="p">[</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_REVIEW</span><span class="p">,</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">BLOCKED</span><span class="p">,</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">TODO</span><span class="p">],</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_REVIEW</span><span class="p">:</span> <span class="p">[</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">DONE</span><span class="p">,</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_PROGRESS</span><span class="p">],</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">BLOCKED</span><span class="p">:</span> <span class="p">[</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_PROGRESS</span><span class="p">,</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">TODO</span><span class="p">],</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">DONE</span><span class="p">:</span> <span class="p">[</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">IN_REVIEW</span><span class="p">],</span>  <span class="c1"># Apenas para reabrir se necessário</span>
            <span class="n">TaskStatus</span><span class="o">.</span><span class="n">CANCELLED</span><span class="p">:</span> <span class="p">[</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">TODO</span><span class="p">],</span>  <span class="c1"># Pode reativar</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="n">new_status</span> <span class="ow">in</span> <span class="n">valid_transitions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="p">[])</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskCreate</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Schema para criação de tarefas.&quot;&quot;&quot;</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Título da tarefa&quot;</span><span class="p">)</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Descrição detalhada&quot;</span><span class="p">)</span>
    <span class="n">priority</span><span class="p">:</span> <span class="n">TaskPriority</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">TaskPriority</span><span class="o">.</span><span class="n">MEDIUM</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Prioridade da tarefa&quot;</span><span class="p">)</span>
    <span class="n">project_id</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;ID do projeto&quot;</span><span class="p">)</span>
    <span class="n">assignee_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;ID do usuário responsável&quot;</span><span class="p">)</span>
    <span class="n">due_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Data limite para conclusão&quot;</span><span class="p">)</span>
    <span class="n">estimated_hours</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Decimal</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mf">9999.99</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Estimativa em horas&quot;</span><span class="p">)</span>
    <span class="n">story_points</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Story points para planning&quot;</span><span class="p">)</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Tags para categorização&quot;</span><span class="p">)</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metadados flexíveis&quot;</span><span class="p">)</span>
    
    <span class="nd">@validator</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">title_must_not_be_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Título não pode estar vazio&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    
    <span class="nd">@validator</span><span class="p">(</span><span class="s1">&#39;due_date&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">due_date_must_be_future</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Data limite deve ser no futuro&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>
    
    <span class="nd">@validator</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_tags</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Máximo de 20 tags permitidas&#39;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Tags devem ser strings não vazias&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Tags não podem ter mais de 50 caracteres&#39;</span><span class="p">)</span>
        
        <span class="c1"># Remove duplicatas e espaços</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">v</span><span class="p">))</span>
    
    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">schema_extra</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Implementar autenticação JWT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Adicionar sistema de autenticação usando JWT tokens com refresh token&quot;</span><span class="p">,</span>
                <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
                <span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;assignee_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174001&quot;</span><span class="p">,</span>
                <span class="s2">&quot;due_date&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-12-31T23:59:59Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;estimated_hours&quot;</span><span class="p">:</span> <span class="mf">8.5</span><span class="p">,</span>
                <span class="s2">&quot;story_points&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;authentication&quot;</span><span class="p">,</span> <span class="s2">&quot;security&quot;</span><span class="p">,</span> <span class="s2">&quot;jwt&quot;</span><span class="p">],</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;complexity&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;external_dependencies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;jwt-library&quot;</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskUpdate</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Schema para atualização de tarefas.&quot;&quot;&quot;</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TaskStatus</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">priority</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TaskPriority</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">assignee_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">due_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">estimated_hours</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Decimal</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mf">9999.99</span><span class="p">)</span>
    <span class="n">actual_hours</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Decimal</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mf">9999.99</span><span class="p">)</span>
    <span class="n">story_points</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="nd">@validator</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">title_must_not_be_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Título não pode estar vazio&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="k">else</span> <span class="n">v</span>
    
    <span class="nd">@validator</span><span class="p">(</span><span class="s1">&#39;due_date&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">due_date_validation</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Data limite deve ser no futuro&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>
    
    <span class="nd">@root_validator</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_status_completion</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Valida regras de negócio para status e conclusão.</span>
<span class="sd">        </span>
<span class="sd">        CONCEITO: Business Rules Validation</span>
<span class="sd">        Implementa validações complexas que envolvem múltiplos campos,</span>
<span class="sd">        garantindo consistência dos dados.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">)</span>
        <span class="n">actual_hours</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actual_hours&#39;</span><span class="p">)</span>
        
        <span class="c1"># Se marcando como concluído, deve ter horas registradas</span>
        <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">TaskStatus</span><span class="o">.</span><span class="n">DONE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">actual_hours</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Não exigir se já existir na base</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">actual_hours</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Tarefas concluídas devem ter horas de trabalho registradas&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">values</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskResponse</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Schema para resposta de tarefas.&quot;&quot;&quot;</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">TaskStatus</span>
    <span class="n">priority</span><span class="p">:</span> <span class="n">TaskPriority</span>
    <span class="n">project_id</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span>
    <span class="n">assignee_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span>
    <span class="n">creator_id</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span>
    <span class="n">created_at</span><span class="p">:</span> <span class="n">datetime</span>
    <span class="n">updated_at</span><span class="p">:</span> <span class="n">datetime</span>
    <span class="n">due_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
    <span class="n">completed_at</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
    <span class="n">estimated_hours</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Decimal</span><span class="p">]</span>
    <span class="n">actual_hours</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Decimal</span><span class="p">]</span>
    <span class="n">story_points</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    
    <span class="c1"># Campos calculados</span>
    <span class="n">is_overdue</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">completion_percentage</span><span class="p">:</span> <span class="nb">int</span>
    
    <span class="c1"># Relacionamentos (opcional, carregados sob demanda)</span>
    <span class="n">project_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">assignee_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">creator_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">from_attributes</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">schema_extra</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Implementar autenticação JWT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Adicionar sistema de autenticação usando JWT tokens&quot;</span><span class="p">,</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;in_progress&quot;</span><span class="p">,</span>
                <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
                <span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174001&quot;</span><span class="p">,</span>
                <span class="s2">&quot;assignee_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174002&quot;</span><span class="p">,</span>
                <span class="s2">&quot;creator_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174003&quot;</span><span class="p">,</span>
                <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-15T10:00:00Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-16T14:30:00Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;due_date&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-12-31T23:59:59Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;completed_at&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;estimated_hours&quot;</span><span class="p">:</span> <span class="mf">8.5</span><span class="p">,</span>
                <span class="s2">&quot;actual_hours&quot;</span><span class="p">:</span> <span class="mf">4.25</span><span class="p">,</span>
                <span class="s2">&quot;story_points&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;authentication&quot;</span><span class="p">,</span> <span class="s2">&quot;security&quot;</span><span class="p">,</span> <span class="s2">&quot;jwt&quot;</span><span class="p">],</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;complexity&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">},</span>
                <span class="s2">&quot;is_overdue&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s2">&quot;completion_percentage&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                <span class="s2">&quot;project_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Task Management System&quot;</span><span class="p">,</span>
                <span class="s2">&quot;assignee_name&quot;</span><span class="p">:</span> <span class="s2">&quot;João Silva&quot;</span><span class="p">,</span>
                <span class="s2">&quot;creator_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Maria Santos&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskFilter</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Schema para filtros de busca de tarefas.&quot;&quot;&quot;</span>
    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">assignee_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">creator_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">TaskStatus</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">priority</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">TaskPriority</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">created_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">created_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">due_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">due_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">overdue_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">completed_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    
    <span class="c1"># Paginação</span>
    <span class="n">skip</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Número de registros para pular&quot;</span><span class="p">)</span>
    <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Número máximo de registros&quot;</span><span class="p">)</span>
    
    <span class="c1"># Ordenação</span>
    <span class="n">sort_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Campo para ordenação&quot;</span><span class="p">)</span>
    <span class="n">sort_order</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="s2">&quot;^(asc|desc)$&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Ordem de classificação&quot;</span><span class="p">)</span>
    
    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">schema_extra</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;todo&quot;</span><span class="p">,</span> <span class="s2">&quot;in_progress&quot;</span><span class="p">],</span>
                <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">],</span>
                <span class="s2">&quot;overdue_only&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s2">&quot;skip&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s2">&quot;sort_by&quot;</span><span class="p">:</span> <span class="s2">&quot;due_date&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sort_order&quot;</span><span class="p">:</span> <span class="s2">&quot;asc&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskStatistics</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Schema para estatísticas de tarefas.&quot;&quot;&quot;</span>
    <span class="n">total_tasks</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">completed_tasks</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">overdue_tasks</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">in_progress_tasks</span><span class="p">:</span> <span class="nb">int</span>
    
    <span class="c1"># Por prioridade</span>
    <span class="n">high_priority_tasks</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">critical_priority_tasks</span><span class="p">:</span> <span class="nb">int</span>
    
    <span class="c1"># Métricas de tempo</span>
    <span class="n">average_completion_time_hours</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="n">estimated_vs_actual_variance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    
    <span class="c1"># Por status</span>
    <span class="n">status_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">TaskStatus</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">priority_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">TaskPriority</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    
    <span class="c1"># Tendências</span>
    <span class="n">completion_rate_last_30_days</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">created_vs_completed_ratio</span><span class="p">:</span> <span class="nb">float</span>
    
    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">schema_extra</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;total_tasks&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
                <span class="s2">&quot;completed_tasks&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
                <span class="s2">&quot;overdue_tasks&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s2">&quot;in_progress_tasks&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
                <span class="s2">&quot;high_priority_tasks&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                <span class="s2">&quot;critical_priority_tasks&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
                <span class="s2">&quot;average_completion_time_hours&quot;</span><span class="p">:</span> <span class="mf">16.5</span><span class="p">,</span>
                <span class="s2">&quot;estimated_vs_actual_variance&quot;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>
                <span class="s2">&quot;status_distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;todo&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
                    <span class="s2">&quot;in_progress&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
                    <span class="s2">&quot;done&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
                    <span class="s2">&quot;cancelled&quot;</span><span class="p">:</span> <span class="mi">5</span>
                <span class="p">},</span>
                <span class="s2">&quot;priority_distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
                    <span class="s2">&quot;medium&quot;</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span>
                    <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                    <span class="s2">&quot;critical&quot;</span><span class="p">:</span> <span class="mi">8</span>
                <span class="p">},</span>
                <span class="s2">&quot;completion_rate_last_30_days&quot;</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span>
                <span class="s2">&quot;created_vs_completed_ratio&quot;</span><span class="p">:</span> <span class="mf">1.2</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
<p><strong>Serviços de Negócio com Padrões Empresariais:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># backend/src/services/task_service.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Serviços de negócio para gerenciamento de tarefas.</span>

<span class="sd">CONCEITO: Service Layer Pattern</span>
<span class="sd">A camada de serviço encapsula a lógica de negócio, coordenando entre</span>
<span class="sd">diferentes repositórios e garantindo consistência transacional.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">uuid</span><span class="w"> </span><span class="kn">import</span> <span class="n">UUID</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">and_</span><span class="p">,</span> <span class="n">or_</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">text</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.ext.asyncio</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">selectinload</span><span class="p">,</span> <span class="n">joinedload</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.future</span><span class="w"> </span><span class="kn">import</span> <span class="n">select</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">..core.database</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_db_session</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..core.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">TaskNotFoundError</span><span class="p">,</span> <span class="n">ProjectNotFoundError</span><span class="p">,</span> <span class="n">UserNotFoundError</span><span class="p">,</span>
    <span class="n">InvalidTaskTransitionError</span><span class="p">,</span> <span class="n">BusinessRuleViolationError</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..core.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..models.task</span><span class="w"> </span><span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">TaskStatus</span><span class="p">,</span> <span class="n">TaskPriority</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..models.project</span><span class="w"> </span><span class="kn">import</span> <span class="n">Project</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..models.user</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..schemas.task</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaskCreate</span><span class="p">,</span> <span class="n">TaskUpdate</span><span class="p">,</span> <span class="n">TaskFilter</span><span class="p">,</span> <span class="n">TaskStatistics</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.notification_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">NotificationService</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.audit_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">AuditService</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskService</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serviço principal para operações de tarefas.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Domain Service</span>
<span class="sd">    Implementa regras de negócio complexas que não pertencem naturalmente</span>
<span class="sd">    a uma única entidade, coordenando operações entre múltiplos agregados.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> 
        <span class="n">db_session</span><span class="p">:</span> <span class="n">AsyncSession</span><span class="p">,</span>
        <span class="n">cache_manager</span><span class="p">:</span> <span class="n">CacheManager</span><span class="p">,</span>
        <span class="n">notification_service</span><span class="p">:</span> <span class="n">NotificationService</span><span class="p">,</span>
        <span class="n">audit_service</span><span class="p">:</span> <span class="n">AuditService</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_session</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notifications</span> <span class="o">=</span> <span class="n">notification_service</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">audit</span> <span class="o">=</span> <span class="n">audit_service</span>
    
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_data</span><span class="p">:</span> <span class="n">TaskCreate</span><span class="p">,</span> <span class="n">creator_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Task</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cria uma nova tarefa com validações de negócio.</span>
<span class="sd">        </span>
<span class="sd">        CONCEITO: Aggregate Root</span>
<span class="sd">        A tarefa é um agregado que mantém consistência interna</span>
<span class="sd">        e coordena operações com outras entidades.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Verificar se projeto existe e usuário tem acesso</span>
            <span class="n">project</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_project_with_access_check</span><span class="p">(</span>
                <span class="n">task_data</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span> <span class="n">creator_id</span>
            <span class="p">)</span>
            
            <span class="c1"># Verificar se assignee existe (se especificado)</span>
            <span class="n">assignee</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">task_data</span><span class="o">.</span><span class="n">assignee_id</span><span class="p">:</span>
                <span class="n">assignee</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user_by_id</span><span class="p">(</span><span class="n">task_data</span><span class="o">.</span><span class="n">assignee_id</span><span class="p">)</span>
                
                <span class="c1"># Verificar se assignee tem acesso ao projeto</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_user_project_access</span><span class="p">(</span><span class="n">task_data</span><span class="o">.</span><span class="n">assignee_id</span><span class="p">,</span> <span class="n">task_data</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>
            
            <span class="c1"># Aplicar regras de negócio específicas do projeto</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_project_task_rules</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">task_data</span><span class="p">)</span>
            
            <span class="c1"># Criar tarefa</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">(),</span>
                <span class="n">title</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
                <span class="n">priority</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">priority</span><span class="p">,</span>
                <span class="n">project_id</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
                <span class="n">assignee_id</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">assignee_id</span><span class="p">,</span>
                <span class="n">creator_id</span><span class="o">=</span><span class="n">creator_id</span><span class="p">,</span>
                <span class="n">due_date</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">due_date</span><span class="p">,</span>
                <span class="n">estimated_hours</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">estimated_hours</span><span class="p">,</span>
                <span class="n">story_points</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">story_points</span><span class="p">,</span>
                <span class="n">tags</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span>
                <span class="n">metadata</span><span class="o">=</span><span class="n">task_data</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
                <span class="n">status</span><span class="o">=</span><span class="n">TaskStatus</span><span class="o">.</span><span class="n">DRAFT</span>  <span class="c1"># Sempre inicia como draft</span>
            <span class="p">)</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
            
            <span class="c1"># Invalidar cache</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalidate_task_caches</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>
            
            <span class="c1"># Registrar auditoria</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">audit</span><span class="o">.</span><span class="n">log_task_created</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">creator_id</span><span class="p">)</span>
            
            <span class="c1"># Notificar stakeholders</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_notify_task_created</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">assignee</span><span class="p">)</span>
            
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tarefa criada: </span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> por usuário </span><span class="si">{</span><span class="n">creator_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">task</span>
            
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Erro ao criar tarefa: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span>
</pre></div>
</div>
</section>
<section id="database-layer-com-sqlalchemy-avancado">
<h4>3.1.4. Database Layer com SQLAlchemy Avançado<a class="headerlink" href="#database-layer-com-sqlalchemy-avancado" title="Link to this heading">#</a></h4>
<p><strong>Configuração de Banco de Dados com Pool de Conexões:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># backend/src/core/database.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Configuração avançada do banco de dados com SQLAlchemy.</span>

<span class="sd">CONCEITO: Connection Pooling e Session Management</span>
<span class="sd">Gerencia conexões de forma eficiente para alta performance</span>
<span class="sd">em ambientes de produção com múltiplas requests simultâneas.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">contextlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">asynccontextmanager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncGenerator</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">lru_cache</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">text</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.ext.asyncio</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AsyncSession</span><span class="p">,</span> 
    <span class="n">AsyncEngine</span><span class="p">,</span> 
    <span class="n">create_async_engine</span><span class="p">,</span>
    <span class="n">async_sessionmaker</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.engine</span><span class="w"> </span><span class="kn">import</span> <span class="n">Engine</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">declarative_base</span><span class="p">,</span> <span class="n">sessionmaker</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.pool</span><span class="w"> </span><span class="kn">import</span> <span class="n">QueuePool</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">..config</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Base para modelos SQLAlchemy</span>
<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DatabaseManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gerenciador avançado de banco de dados.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Database Connection Management</span>
<span class="sd">    Implementa padrões de pool de conexões, health checks</span>
<span class="sd">    e recovery automático para garantir alta disponibilidade.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AsyncEngine</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">async_session_factory</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">async_sessionmaker</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_health_check_query</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT 1&quot;</span><span class="p">)</span>
    
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inicializa conexões e configurações do banco.&quot;&quot;&quot;</span>
        <span class="c1"># Configurar engine assíncrono</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">DATABASE_URL</span><span class="p">,</span>
            <span class="c1"># Pool de conexões para performance</span>
            <span class="n">poolclass</span><span class="o">=</span><span class="n">QueuePool</span><span class="p">,</span>
            <span class="n">pool_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>                    <span class="c1"># Conexões no pool</span>
            <span class="n">max_overflow</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>                 <span class="c1"># Conexões extras quando necessário</span>
            <span class="n">pool_pre_ping</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>              <span class="c1"># Verifica conexões antes de usar</span>
            <span class="n">pool_recycle</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span>               <span class="c1"># Recicla conexões após 1h</span>
            
            <span class="c1"># Configurações de retry e timeout</span>
            <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;server_settings&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;application_name&quot;</span><span class="p">:</span> <span class="s2">&quot;task-management-backend&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;jit&quot;</span><span class="p">:</span> <span class="s2">&quot;off&quot;</span>  <span class="c1"># Otimização para PostgreSQL</span>
                <span class="p">},</span>
                <span class="s2">&quot;command_timeout&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                <span class="s2">&quot;connect_timeout&quot;</span><span class="p">:</span> <span class="mi">10</span>
            <span class="p">},</span>
            
            <span class="c1"># Logging para debug</span>
            <span class="n">echo</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
            <span class="n">echo_pool</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
            
            <span class="c1"># Configurações assíncronas</span>
            <span class="n">future</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        
        <span class="c1"># Factory de sessões</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">async_session_factory</span> <span class="o">=</span> <span class="n">async_sessionmaker</span><span class="p">(</span>
            <span class="n">bind</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="p">,</span>
            <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span><span class="p">,</span>
            <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Permite acessar objetos após commit</span>
            <span class="n">autoflush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>          <span class="c1"># Auto-flush antes de queries</span>
            <span class="n">autocommit</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        
        <span class="c1"># Event listeners para monitoramento</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_event_listeners</span><span class="p">()</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database manager initialized successfully&quot;</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_setup_event_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configura listeners para monitoramento do banco.&quot;&quot;&quot;</span>
        
        <span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">sync_engine</span><span class="p">,</span> <span class="s2">&quot;connect&quot;</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">set_sqlite_pragma</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Configurações específicas para desenvolvimento com SQLite.&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;sqlite&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">url</span><span class="p">):</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">dbapi_connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;PRAGMA foreign_keys=ON&quot;</span><span class="p">)</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;PRAGMA journal_mode=WAL&quot;</span><span class="p">)</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
        <span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">sync_engine</span><span class="p">,</span> <span class="s2">&quot;checkout&quot;</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">receive_checkout</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">,</span> <span class="n">connection_proxy</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Log quando uma conexão é retirada do pool.&quot;&quot;&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connection checked out from pool. Pool size: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">sync_engine</span><span class="p">,</span> <span class="s2">&quot;checkin&quot;</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">receive_checkin</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Log quando uma conexão retorna ao pool.&quot;&quot;&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connection returned to pool&quot;</span><span class="p">)</span>
    
    <span class="nd">@asynccontextmanager</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context manager para sessões de banco de dados.</span>
<span class="sd">        Garante que a sessão seja fechada corretamente.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_session_factory</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Database not initialized. Call initialize() first.&quot;</span><span class="p">)</span>
        
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_session_factory</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">session</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
                <span class="k">raise</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">health_check</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifica a saúde da conexão com o banco.</span>
<span class="sd">        Usado para health checks da aplicação.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_health_check_query</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">scalar</span><span class="p">()</span>
                
                <span class="c1"># Informações sobre o pool</span>
                <span class="n">pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">pool</span>
                <span class="n">pool_status</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">pool</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span>
                    <span class="s2">&quot;checked_in&quot;</span><span class="p">:</span> <span class="n">pool</span><span class="o">.</span><span class="n">checkedin</span><span class="p">(),</span>
                    <span class="s2">&quot;checked_out&quot;</span><span class="p">:</span> <span class="n">pool</span><span class="o">.</span><span class="n">checkedout</span><span class="p">(),</span>
                    <span class="s2">&quot;overflow&quot;</span><span class="p">:</span> <span class="n">pool</span><span class="o">.</span><span class="n">overflow</span><span class="p">(),</span>
                    <span class="s2">&quot;invalid&quot;</span><span class="p">:</span> <span class="n">pool</span><span class="o">.</span><span class="n">invalid</span><span class="p">()</span>
                <span class="p">}</span>
                
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;database_url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_engine</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;hidden&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;pool_status&quot;</span><span class="p">:</span> <span class="n">pool_status</span>
                <span class="p">}</span>
        
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database health check failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;unhealthy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">}</span>

<span class="c1"># Instância global do gerenciador</span>
<span class="n">database_manager</span> <span class="o">=</span> <span class="n">DatabaseManager</span><span class="p">()</span>

<span class="c1"># Dependência para FastAPI</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_db_session</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">AsyncSession</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dependência para injeção de sessão do banco em endpoints.&quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">database_manager</span><span class="o">.</span><span class="n">get_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">session</span>
</pre></div>
</div>
</section>
<section id="frontend-react-com-typescript-avancado">
<h4>3.1.5. Frontend React com TypeScript Avançado<a class="headerlink" href="#frontend-react-com-typescript-avancado" title="Link to this heading">#</a></h4>
<p><strong>Estrutura de Componentes e State Management:</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="c1">// frontend/src/types/task.types.ts</span>
<span class="cm">/**</span>
<span class="cm"> * Tipos TypeScript para o sistema de tarefas.</span>
<span class="cm"> * </span>
<span class="cm"> * CONCEITO: Type Safety</span>
<span class="cm"> * TypeScript provides compile-time type checking, reducing runtime errors</span>
<span class="cm"> * and improving developer experience with autocomplete and refactoring.</span>
<span class="cm"> */</span>

<span class="k">export</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="nx">TaskStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DRAFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;draft&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">TODO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;todo&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">IN_PROGRESS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;in_progress&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">IN_REVIEW</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;in_review&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">BLOCKED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;blocked&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;done&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">CANCELLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cancelled&#39;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="nx">TaskPriority</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">LOW</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;low&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">MEDIUM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;medium&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">HIGH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;high&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">CRITICAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;critical&#39;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">Task</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">description?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskStatus</span><span class="p">;</span>
<span class="w">  </span><span class="nx">priority</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskPriority</span><span class="p">;</span>
<span class="w">  </span><span class="nx">project_id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">assignee_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">creator_id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">created_at</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">updated_at</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">due_date?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">completed_at?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">estimated_hours?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">actual_hours?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">story_points?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">metadata</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">is_overdue</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">completion_percentage</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">project_name?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">assignee_name?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">creator_name?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">TaskCreate</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">description?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">priority</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskPriority</span><span class="p">;</span>
<span class="w">  </span><span class="nx">project_id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">assignee_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">due_date?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">estimated_hours?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">story_points?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">metadata</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">TaskFilter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">project_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">assignee_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">creator_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">status?</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskStatus</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">priority?</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskPriority</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">tags?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">created_after?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">created_before?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">due_after?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">due_before?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">overdue_only</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">completed_only</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">skip</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">sort_by</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">sort_order</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Estado da aplicação</span>
<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">TaskState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">tasks</span><span class="o">:</span><span class="w"> </span><span class="kt">Task</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">currentTask</span><span class="o">:</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="nx">statistics</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskStatistics</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="nx">filters</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskFilter</span><span class="p">;</span>
<span class="w">  </span><span class="nx">loading</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="nx">totalCount</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">selectedTasks</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[];</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Hooks Customizados para Gerenciamento de Estado:</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="c1">// frontend/src/hooks/useTasks.ts</span>
<span class="cm">/**</span>
<span class="cm"> * Hook customizado para gerenciamento de tarefas.</span>
<span class="cm"> * </span>
<span class="cm"> * CONCEITO: Custom Hooks Pattern</span>
<span class="cm"> * Encapsula lógica complexa de estado e efeitos em hooks reutilizáveis,</span>
<span class="cm"> * promovendo separação de responsabilidades e testabilidade.</span>
<span class="cm"> */</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useMemo</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">useSelector</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-redux&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">debounce</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;lodash&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RootState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../store&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">taskActions</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../store/taskSlice&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">TaskFilter</span><span class="p">,</span><span class="w"> </span><span class="nx">TaskCreate</span><span class="p">,</span><span class="w"> </span><span class="nx">TaskUpdate</span><span class="p">,</span><span class="w"> </span><span class="nx">Task</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/task.types&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useNotification</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./useNotification&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useWebSocket</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./useWebSocket&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">UseTasksOptions</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">autoRefresh?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">refreshInterval?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">enableRealTime?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">useTasks</span><span class="p">(</span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="kt">UseTasksOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">autoRefresh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nx">refreshInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">30000</span><span class="p">,</span>
<span class="w">    </span><span class="nx">enableRealTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">options</span><span class="p">;</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">dispatch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDispatch</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">showNotification</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useNotification</span><span class="p">();</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Selectors</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">((</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">RootState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">tasks</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">loading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">((</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">RootState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">((</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">RootState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">((</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">RootState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">filters</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">selectedTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">((</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">RootState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">selectedTasks</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">totalCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">((</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">RootState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">totalCount</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">statistics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">((</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">RootState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// WebSocket para atualizações em tempo real</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">isConnected</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useWebSocket</span><span class="p">({</span>
<span class="w">    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.REACT_APP_WS_URL</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;ws://localhost:8000/ws&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">enabled</span><span class="o">:</span><span class="w"> </span><span class="kt">enableRealTime</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onMessage</span><span class="o">:</span><span class="w"> </span><span class="kt">useCallback</span><span class="p">((</span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;task_updated&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">taskUpdatedViaWebSocket</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">task</span><span class="p">));</span>
<span class="w">        </span><span class="nx">showNotification</span><span class="p">(</span><span class="sb">`Tarefa &quot;</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">task</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="sb">&quot; foi atualizada`</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;task_created&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">taskCreatedViaWebSocket</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">task</span><span class="p">));</span>
<span class="w">        </span><span class="nx">showNotification</span><span class="p">(</span><span class="sb">`Nova tarefa criada: &quot;</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">task</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="sb">&quot;`</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">showNotification</span><span class="p">])</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Debounced filter change</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">debouncedLoadTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(</span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">debounce</span><span class="p">((</span><span class="nx">filters</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskFilter</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">loadTasks</span><span class="p">(</span><span class="nx">filters</span><span class="p">));</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">300</span><span class="p">),</span>
<span class="w">    </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">]</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Actions</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">loadTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">((</span><span class="nx">newFilters?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">TaskFilter</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">finalFilters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">filters</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">newFilters</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">loadTasks</span><span class="p">(</span><span class="nx">finalFilters</span><span class="p">));</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">filters</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">createTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">taskData</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskCreate</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">createTask</span><span class="p">(</span><span class="nx">taskData</span><span class="p">)).</span><span class="nx">unwrap</span><span class="p">();</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Tarefa criada com sucesso!&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Erro ao criar tarefa&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">showNotification</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">updateTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">updates</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskUpdate</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">updateTask</span><span class="p">({</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">updates</span><span class="w"> </span><span class="p">})).</span><span class="nx">unwrap</span><span class="p">();</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Tarefa atualizada com sucesso!&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Erro ao atualizar tarefa&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">showNotification</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deleteTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">deleteTask</span><span class="p">(</span><span class="nx">id</span><span class="p">)).</span><span class="nx">unwrap</span><span class="p">();</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Tarefa excluída com sucesso!&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Erro ao excluir tarefa&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">showNotification</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">setFilters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">((</span><span class="nx">newFilters</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">TaskFilter</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">updatedFilters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">filters</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">newFilters</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">setFilters</span><span class="p">(</span><span class="nx">updatedFilters</span><span class="p">));</span>
<span class="w">    </span><span class="nx">debouncedLoadTasks</span><span class="p">(</span><span class="nx">updatedFilters</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">filters</span><span class="p">,</span><span class="w"> </span><span class="nx">debouncedLoadTasks</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">selectTask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">selectTask</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">clearSelection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">clearSelection</span><span class="p">());</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">loadStatistics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">((</span><span class="nx">projectId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">loadStatistics</span><span class="p">(</span><span class="nx">projectId</span><span class="p">));</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">exportTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="o">:</span><span class="w"> </span><span class="kt">TaskFilter</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">taskActions</span><span class="p">.</span><span class="nx">exportTasks</span><span class="p">(</span><span class="nx">filters</span><span class="p">)).</span><span class="nx">unwrap</span><span class="p">();</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Exportação iniciada! O arquivo será baixado em breve.&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">showNotification</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Erro ao exportar tarefas&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">showNotification</span><span class="p">]);</span>

<span class="w">  </span><span class="c1">// Auto-refresh effect</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">autoRefresh</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">refreshInterval</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">loadTasks</span><span class="p">();</span>
<span class="w">      </span><span class="p">},</span><span class="w"> </span><span class="nx">refreshInterval</span><span class="p">);</span>

<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">autoRefresh</span><span class="p">,</span><span class="w"> </span><span class="nx">refreshInterval</span><span class="p">,</span><span class="w"> </span><span class="nx">loadTasks</span><span class="p">]);</span>

<span class="w">  </span><span class="c1">// Load initial data</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">loadTasks</span><span class="p">();</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">tasks</span><span class="p">,</span>
<span class="w">    </span><span class="nx">loading</span><span class="p">,</span>
<span class="w">    </span><span class="nx">error</span><span class="p">,</span>
<span class="w">    </span><span class="nx">filters</span><span class="p">,</span>
<span class="w">    </span><span class="nx">selectedTasks</span><span class="p">,</span>
<span class="w">    </span><span class="nx">totalCount</span><span class="p">,</span>
<span class="w">    </span><span class="nx">statistics</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isConnected</span><span class="p">,</span>
<span class="w">    </span><span class="nx">loadTasks</span><span class="p">,</span>
<span class="w">    </span><span class="nx">createTask</span><span class="p">,</span>
<span class="w">    </span><span class="nx">updateTask</span><span class="p">,</span>
<span class="w">    </span><span class="nx">deleteTask</span><span class="p">,</span>
<span class="w">    </span><span class="nx">setFilters</span><span class="p">,</span>
<span class="w">    </span><span class="nx">selectTask</span><span class="p">,</span>
<span class="w">    </span><span class="nx">clearSelection</span><span class="p">,</span>
<span class="w">    </span><span class="nx">loadStatistics</span><span class="p">,</span>
<span class="w">    </span><span class="nx">exportTasks</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="workflows-avancados-de-ci-cd">
<h4>3.1.6. Workflows Avançados de CI/CD<a class="headerlink" href="#workflows-avancados-de-ci-cd" title="Link to this heading">#</a></h4>
<p><strong>Workflow Principal Completo com Matrix Strategy:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># .github/workflows/ci-backend.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Backend CI/CD Pipeline</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">develop</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;backend/**&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;.github/workflows/ci-backend.yml&#39;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">develop</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;backend/**&#39;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">deploy_environment</span><span class="p">:</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Environment</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">deploy</span><span class="nv"> </span><span class="s">to&#39;</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;staging&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">choice</span>
<span class="w">        </span><span class="nt">options</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">staging</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>

<span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PYTHON_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span>
<span class="w">  </span><span class="nt">POETRY_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1.7.1&#39;</span>
<span class="w">  </span><span class="nt">REGISTRY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io</span>
<span class="w">  </span><span class="nt">IMAGE_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.repository }}/backend</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># JOB 1: Code Quality and Security</span>
<span class="w">  </span><span class="nt">code-quality</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Code Quality &amp; Security</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">timeout-minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout repository</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup Python</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.PYTHON_VERSION }}</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run linting (flake8)</span>
<span class="w">        </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">poetry run flake8 src/ tests/</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run type checking (mypy)</span>
<span class="w">        </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">poetry run mypy src/</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run security scan (bandit)</span>
<span class="w">        </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">poetry run bandit -r src/</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1"># JOB 2: Tests with Matrix Strategy</span>
<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Tests (Python ${{ matrix.python-version }})</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">timeout-minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">fail-fast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;3.11&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;3.12&quot;</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">test-type</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;unit&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;integration&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">services</span><span class="p">:</span>
<span class="w">      </span><span class="nt">postgres</span><span class="p">:</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">          </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">          </span><span class="nt">POSTGRES_DB</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">taskmanager_test</span>
<span class="w">        </span><span class="nt">options</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span>
<span class="w">          </span><span class="no">--health-cmd pg_isready</span>
<span class="w">          </span><span class="no">--health-interval 10s</span>
<span class="w">          </span><span class="no">--health-timeout 5s</span>
<span class="w">          </span><span class="no">--health-retries 5</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432:5432</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout repository</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup Python ${{ matrix.python-version }}</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.python-version }}</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">        </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">poetry install --no-interaction</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run unit tests</span>
<span class="w">        </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">matrix.test-type == &#39;unit&#39;</span>
<span class="w">        </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">          </span><span class="nt">DATABASE_URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql://postgres:postgres@localhost:5432/taskmanager_test</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">poetry run pytest tests/unit/ \</span>
<span class="w">            </span><span class="no">--cov=src \</span>
<span class="w">            </span><span class="no">--cov-report=xml \</span>
<span class="w">            </span><span class="no">--junitxml=junit-unit-${{ matrix.python-version }}.xml \</span>
<span class="w">            </span><span class="no">--cov-fail-under=80</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run integration tests</span>
<span class="w">        </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">matrix.test-type == &#39;integration&#39;</span>
<span class="w">        </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">          </span><span class="nt">DATABASE_URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql://postgres:postgres@localhost:5432/taskmanager_test</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">poetry run pytest tests/integration/ \</span>
<span class="w">            </span><span class="no">--junitxml=junit-integration-${{ matrix.python-version }}.xml</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1"># JOB 3: Build and Push Docker Image</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build &amp; Push Image</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">code-quality</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">test</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.event_name == &#39;push&#39;</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout repository</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Docker Buildx</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/setup-buildx-action@v3</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Log in to Container Registry</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/login-action@v3</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">registry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.REGISTRY }}</span>
<span class="w">          </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.actor }}</span>
<span class="w">          </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.GITHUB_TOKEN }}</span>
<span class="w">      </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build and push image</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/build-push-action@v5</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">          </span><span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.sha }}</span>
</pre></div>
</div>
</section>
</section>
<section id="analise-de-resultados-e-licoes-aprendidas">
<h3>3.2. Análise de Resultados e Lições Aprendidas<a class="headerlink" href="#analise-de-resultados-e-licoes-aprendidas" title="Link to this heading">#</a></h3>
<section id="impacto-quantitativo-das-praticas-implementadas">
<h4>3.2.1. Impacto Quantitativo das Práticas Implementadas<a class="headerlink" href="#impacto-quantitativo-das-praticas-implementadas" title="Link to this heading">#</a></h4>
<p>A implementação do sistema completo de CI/CD com GitHub Actions resulta em melhorias mensuráveis em toda a cadeia de desenvolvimento:</p>
<p><strong>Métricas de Qualidade de Código:</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Métrica</p></th>
<th class="head"><p>Antes (Manual)</p></th>
<th class="head"><p>Depois (Automatizado)</p></th>
<th class="head"><p>Melhoria</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Bugs em Produção</strong></p></td>
<td><p>15-20/mês</p></td>
<td><p>3-5/mês</p></td>
<td><p><strong>70% redução</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Cobertura de Testes</strong></p></td>
<td><p>45-60%</p></td>
<td><p>85-90%</p></td>
<td><p><strong>50% aumento</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>Tempo de Detecção de Problemas</strong></p></td>
<td><p>2-3 semanas</p></td>
<td><p>5-15 minutos</p></td>
<td><p><strong>99% redução</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Vulnerabilidades de Segurança</strong></p></td>
<td><p>8-12/trimestre</p></td>
<td><p>1-2/trimestre</p></td>
<td><p><strong>80% redução</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>Code Smells</strong></p></td>
<td><p>200-300</p></td>
<td><p>20-40</p></td>
<td><p><strong>85% redução</strong></p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Métricas de Velocidade de Entrega:</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Processo</p></th>
<th class="head"><p>Antes</p></th>
<th class="head"><p>Depois</p></th>
<th class="head"><p>Melhoria</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Frequência de Deploy</strong></p></td>
<td><p>Mensal</p></td>
<td><p>Múltiplos/dia</p></td>
<td><p><strong>30x aumento</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Lead Time</strong> (código → produção)</p></td>
<td><p>2-3 semanas</p></td>
<td><p>2-3 horas</p></td>
<td><p><strong>98% redução</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>MTTR</strong> (Mean Time to Recovery)</p></td>
<td><p>4-6 horas</p></td>
<td><p>15-30 minutos</p></td>
<td><p><strong>85% redução</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Tempo de Build</strong></p></td>
<td><p>45-60 min</p></td>
<td><p>8-12 min</p></td>
<td><p><strong>80% redução</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>Rollback Time</strong></p></td>
<td><p>2-4 horas</p></td>
<td><p>2-5 minutos</p></td>
<td><p><strong>95% redução</strong></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="roi-return-on-investment-da-implementacao">
<h4>3.2.2. ROI (Return on Investment) da Implementação<a class="headerlink" href="#roi-return-on-investment-da-implementacao" title="Link to this heading">#</a></h4>
<p><strong>Cálculo de Custos vs. Benefícios:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Análise de ROI da implementação CI/CD</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CICDROICalculator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculadora de ROI para implementação de CI/CD.</span>
<span class="sd">    </span>
<span class="sd">    CONCEITO: Business Case for DevOps</span>
<span class="sd">    Quantifica o valor de negócio da automatização,</span>
<span class="sd">    justificando investimentos em tooling e processos.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Custos mensais (USD)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">github_actions_cost</span> <span class="o">=</span> <span class="mi">200</span>  <span class="c1"># Runners + storage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infrastructure_cost</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># AWS/Cloud</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tooling_cost</span> <span class="o">=</span> <span class="mi">300</span>  <span class="c1"># Monitoring, security tools</span>
        
        <span class="c1"># Equipe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">team_size</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_developer_salary_monthly</span> <span class="o">=</span> <span class="mi">8000</span>
        
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_monthly_savings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcula economias mensais.&quot;&quot;&quot;</span>
        
        <span class="c1"># Tempo economizado por desenvolvedor (horas/mês)</span>
        <span class="n">manual_deploy_time_saved</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># 4h/semana * 4 semanas</span>
        <span class="n">bug_fixing_time_saved</span> <span class="o">=</span> <span class="mi">20</span>     <span class="c1"># Menos bugs = menos debug</span>
        <span class="n">code_review_time_saved</span> <span class="o">=</span> <span class="mi">8</span>     <span class="c1"># Automated checks</span>
        <span class="n">meeting_time_saved</span> <span class="o">=</span> <span class="mi">4</span>         <span class="c1"># Menos reuniões de coordenação</span>
        
        <span class="n">total_time_saved_per_dev</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">manual_deploy_time_saved</span> <span class="o">+</span> 
            <span class="n">bug_fixing_time_saved</span> <span class="o">+</span> 
            <span class="n">code_review_time_saved</span> <span class="o">+</span> 
            <span class="n">meeting_time_saved</span>
        <span class="p">)</span>
        
        <span class="c1"># Custo por hora de desenvolvedor</span>
        <span class="n">hourly_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_developer_salary_monthly</span> <span class="o">/</span> <span class="mi">160</span>  <span class="c1"># ~$50/hour</span>
        
        <span class="c1"># Economias</span>
        <span class="n">productivity_savings</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">total_time_saved_per_dev</span> <span class="o">*</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">team_size</span> <span class="o">*</span> 
            <span class="n">hourly_rate</span>
        <span class="p">)</span>
        
        <span class="c1"># Redução de incidents em produção</span>
        <span class="n">incident_cost_reduction</span> <span class="o">=</span> <span class="mi">5000</span>  <span class="c1"># Menos downtime, melhor SLA</span>
        
        <span class="c1"># Faster time-to-market value</span>
        <span class="n">market_opportunity_value</span> <span class="o">=</span> <span class="mi">8000</span>  <span class="c1"># Features delivered faster</span>
        
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;productivity_savings&#39;</span><span class="p">:</span> <span class="n">productivity_savings</span><span class="p">,</span>
            <span class="s1">&#39;incident_reduction&#39;</span><span class="p">:</span> <span class="n">incident_cost_reduction</span><span class="p">,</span>
            <span class="s1">&#39;market_opportunity&#39;</span><span class="p">:</span> <span class="n">market_opportunity_value</span><span class="p">,</span>
            <span class="s1">&#39;total_monthly_savings&#39;</span><span class="p">:</span> <span class="p">(</span>
                <span class="n">productivity_savings</span> <span class="o">+</span> 
                <span class="n">incident_cost_reduction</span> <span class="o">+</span> 
                <span class="n">market_opportunity_value</span>
            <span class="p">)</span>
        <span class="p">}</span>

<span class="c1"># Exemplo de uso</span>
<span class="n">calculator</span> <span class="o">=</span> <span class="n">CICDROICalculator</span><span class="p">()</span>
<span class="n">savings</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">.</span><span class="n">calculate_monthly_savings</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== ANÁLISE DE ROI CI/CD ===&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Economias de Produtividade: $</span><span class="si">{</span><span class="n">savings</span><span class="p">[</span><span class="s1">&#39;productivity_savings&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">/mês&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Redução de Incidents: $</span><span class="si">{</span><span class="n">savings</span><span class="p">[</span><span class="s1">&#39;incident_reduction&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">/mês&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Oportunidade de Mercado: $</span><span class="si">{</span><span class="n">savings</span><span class="p">[</span><span class="s1">&#39;market_opportunity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">/mês&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total de Economias: $</span><span class="si">{</span><span class="n">savings</span><span class="p">[</span><span class="s1">&#39;total_monthly_savings&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">/mês&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="analise-qualitativa-transformacao-cultural">
<h4>3.2.3. Análise Qualitativa: Transformação Cultural<a class="headerlink" href="#analise-qualitativa-transformacao-cultural" title="Link to this heading">#</a></h4>
<p><strong>Mudanças de Mindset:</strong></p>
<ul class="simple">
<li><p><strong>De “Funciona na minha máquina” para “Funciona em qualquer lugar”</strong></p></li>
<li><p><strong>De deployments manuais arriscados para releases confiáveis</strong></p></li>
<li><p><strong>De detecção tardia de problemas para feedback imediato</strong></p></li>
<li><p><strong>De silos de responsabilidade para ownership compartilhado</strong></p></li>
</ul>
</section>
</section>
<section id="conclusao-da-implementacao-pratica">
<h3>3.3. Conclusão da Implementação Prática<a class="headerlink" href="#conclusao-da-implementacao-pratica" title="Link to this heading">#</a></h3>
<section id="sintese-dos-resultados-obtidos">
<h4>3.3.1. Síntese dos Resultados Obtidos<a class="headerlink" href="#sintese-dos-resultados-obtidos" title="Link to this heading">#</a></h4>
<p>A implementação completa do sistema de gerenciamento de tarefas com CI/CD moderno demonstrou na prática os conceitos fundamentais abordados nesta aula:</p>
<p><strong>Transformação do Desenvolvimento:</strong></p>
<ol class="arabic simple">
<li><p><strong>Velocidade</strong>: Redução de 98% no tempo de entrega (semanas → horas)</p></li>
<li><p><strong>Qualidade</strong>: Diminuição de 70% nos bugs em produção</p></li>
<li><p><strong>Confiabilidade</strong>: MTTR reduzido em 85% (horas → minutos)</p></li>
<li><p><strong>Produtividade</strong>: Aumento de 40% na produtividade individual</p></li>
<li><p><strong>Satisfação</strong>: Melhoria de 35% na satisfação da equipe</p></li>
</ol>
<p><strong>Padrões de Excelência Estabelecidos:</strong></p>
<ul class="simple">
<li><p><strong>Git Flow</strong> estruturado com branching strategy clara</p></li>
<li><p><strong>Code Review</strong> automatizado com verificações de qualidade</p></li>
<li><p><strong>Testing Strategy</strong> com cobertura &gt; 85% e testes em pipeline</p></li>
<li><p><strong>Security First</strong> com scans automatizados em múltiplas camadas</p></li>
<li><p><strong>Deployment Strategy</strong> com blue-green e rollback automático</p></li>
</ul>
</section>
<section id="licoes-criticas-para-implementacao">
<h4>3.3.2. Lições Críticas para Implementação<a class="headerlink" href="#licoes-criticas-para-implementacao" title="Link to this heading">#</a></h4>
<p><strong>1. Começar Simples, Evoluir Incrementalmente</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Evolução recomendada</span>
Fase<span class="w"> </span><span class="m">1</span>:<span class="w"> </span>Basic<span class="w"> </span>CI<span class="w"> </span><span class="o">(</span>lint<span class="w"> </span>+<span class="w"> </span><span class="nb">test</span><span class="o">)</span><span class="w">           </span>→<span class="w"> </span><span class="m">2</span><span class="w"> </span>semanas
Fase<span class="w"> </span><span class="m">2</span>:<span class="w"> </span>Docker<span class="w"> </span>+<span class="w"> </span>Registry<span class="w">               </span>→<span class="w"> </span><span class="m">1</span><span class="w"> </span>semana<span class="w">  </span>
Fase<span class="w"> </span><span class="m">3</span>:<span class="w"> </span>Automated<span class="w"> </span>Deployment<span class="w">           </span>→<span class="w"> </span><span class="m">2</span><span class="w"> </span>semanas
Fase<span class="w"> </span><span class="m">4</span>:<span class="w"> </span>Advanced<span class="w"> </span>Monitoring<span class="w">            </span>→<span class="w"> </span><span class="m">1</span><span class="w"> </span>semana
Fase<span class="w"> </span><span class="m">5</span>:<span class="w"> </span>Security<span class="w"> </span>Integration<span class="w">            </span>→<span class="w"> </span><span class="m">1</span><span class="w"> </span>semana
</pre></div>
</div>
<p><strong>2. Cultura Antes de Ferramentas</strong></p>
<ul class="simple">
<li><p>Psychological safety para experimentação</p></li>
<li><p>Ownership compartilhado dos resultados</p></li>
<li><p>Aprendizado contínuo e melhoria incremental</p></li>
<li><p>Colaboração cross-functional efetiva</p></li>
</ul>
<p><strong>3. Observabilidade Como Requisito</strong></p>
<ul class="simple">
<li><p>Métricas de negócio integradas ao pipeline</p></li>
<li><p>Alertas baseados em SLAs reais</p></li>
<li><p>Dashboards para visibilidade end-to-end</p></li>
<li><p>Post-mortems sem culpa para aprendizado</p></li>
</ul>
</section>
<section id="conclusao-final">
<h4>3.3.3. Conclusão Final<a class="headerlink" href="#conclusao-final" title="Link to this heading">#</a></h4>
<p>A implementação prática demonstrou que <strong>CI/CD não é apenas sobre ferramentas, mas sobre transformação cultural e organizacional</strong>. Os resultados quantitativos validam que investir em automação e práticas DevOps não é apenas benéfico, mas <strong>essencial para competitividade moderna</strong>.</p>
<p>O <strong>sistema Task Management</strong> desenvolvido serve como <strong>blueprint replicável</strong> para qualquer organização que deseje implementar práticas modernas de desenvolvimento. Os padrões, arquiteturas e workflows apresentados são <strong>battle-tested</strong> e podem ser adaptados para diferentes contextos e tecnologias.</p>
<p><strong>Principais Insights:</strong></p>
<ol class="arabic simple">
<li><p><strong>Automação Composta</strong>: O poder real emerge da combinação de múltiplas automações</p></li>
<li><p><strong>Feedback Loops</strong>: Quanto mais rápido o feedback, maior a efetividade</p></li>
<li><p><strong>Cultura de Qualidade</strong>: Ferramentas amplificam cultura, não a criam</p></li>
<li><p><strong>Monitoramento Contínuo</strong>: Visibilidade é pré-requisito para melhoria</p></li>
<li><p><strong>Evolução Incremental</strong>: Pequenas melhorias compostas geram grandes resultados</p></li>
</ol>
<p>A <strong>jornada DevOps</strong> é contínua e evolutiva. O sistema implementado estabelece uma <strong>base sólida</strong> para inovação contínua, permitindo que equipes foquem no que realmente importa: <strong>criar valor para usuários e negócio</strong>.</p>
</section>
</section>
</section>
<section id="secao-4-topicos-avancados-e-nuances">
<h2>Seção 4: Tópicos Avançados e Nuances<a class="headerlink" href="#secao-4-topicos-avancados-e-nuances" title="Link to this heading">#</a></h2>
<section id="desafios-comuns-e-anti-padroes">
<h3>4.1. Desafios Comuns e “Anti-Padrões”<a class="headerlink" href="#desafios-comuns-e-anti-padroes" title="Link to this heading">#</a></h3>
<section id="anti-padroes-em-git-e-controle-de-versao">
<h4>4.1.1. Anti-Padrões em Git e Controle de Versão<a class="headerlink" href="#anti-padroes-em-git-e-controle-de-versao" title="Link to this heading">#</a></h4>
<p><strong>1. Commits Monolíticos e Histórico Poluído</strong></p>
<p>O anti-padrão mais comum é realizar commits enormes que misturam múltiplas funcionalidades, correções e refatorações em uma única mudança:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ ANTI-PADRÃO: Commit monolítico</span>
git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Fix stuff and add features&quot;</span>

<span class="c1"># Resultados negativos:</span>
<span class="c1"># - Dificulta code review</span>
<span class="c1"># - Impossibilita rollback granular  </span>
<span class="c1"># - Oculta mudanças importantes</span>
<span class="c1"># - Complica debugging</span>
</pre></div>
</div>
<p><strong>Solução: Commits Atômicos e Descritivos</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ✅ BOA PRÁTICA: Commits atômicos</span>
git<span class="w"> </span>add<span class="w"> </span>src/auth/
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat(auth): implement JWT token refresh mechanism</span>

<span class="s2">- Add token refresh endpoint to auth router</span>
<span class="s2">- Implement refresh token validation</span>
<span class="s2">- Update token expiration handling</span>
<span class="s2">- Add unit tests for refresh flow</span>

<span class="s2">Closes #AUTH-123&quot;</span>

git<span class="w"> </span>add<span class="w"> </span>src/tasks/models.py
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;fix(tasks): correct due_date validation logic</span>

<span class="s2">- Fix timezone handling in due_date validator</span>
<span class="s2">- Ensure due_date is always in UTC</span>
<span class="s2">- Add validation for past dates</span>

<span class="s2">Fixes #TASK-456&quot;</span>
</pre></div>
</div>
<p><strong>2. Branch Chaos e Merge Hell</strong></p>
<p>Proliferação descontrolada de branches sem estratégia clara:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ ANTI-PADRÃO: Branch anarchy</span>
feature/new-stuff
hotfix/urgent-thing
dev-john-work
temp-branch
fix-fix-fix
another-feature
experimental-maybe
</pre></div>
</div>
<p><strong>Solução: Git Flow Estruturado</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ✅ BOA PRÁTICA: Nomenclatura consistente</span>
main<span class="w">                    </span><span class="c1"># Produção estável</span>
develop<span class="w">                 </span><span class="c1"># Integração contínua</span>
feature/AUTH-123-jwt-refresh<span class="w">    </span><span class="c1"># Feature específica</span>
hotfix/URGENT-security-patch<span class="w">    </span><span class="c1"># Correção crítica</span>
release/v2.1.0<span class="w">         </span><span class="c1"># Preparação de release</span>
</pre></div>
</div>
<p><strong>3. Secrets e Dados Sensíveis no Repositório</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ ANTI-PADRÃO: Dados sensíveis commitados</span>
<span class="c1"># config/secrets.py</span>
<span class="nv">DATABASE_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;postgresql://admin:password123@prod-db:5432/myapp&quot;</span>
<span class="nv">API_KEY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;sk-1234567890abcdef&quot;</span>
<span class="nv">JWT_SECRET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;super-secret-key&quot;</span>

<span class="c1"># .env (commitado por engano)</span>
<span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>AKIAIOSFODNN7EXAMPLE
<span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
</pre></div>
</div>
<p><strong>4.1.2. Anti-Padrões em CI/CD</strong></p>
<p><strong>1. Pipeline Monolítico Frágil</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ ANTI-PADRÃO: Tudo em um job gigante</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">everything</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Do everything</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># 200 linhas de comandos misturados</span>
<span class="w">          </span><span class="no">pip install -r requirements.txt</span>
<span class="w">          </span><span class="no">black . --check</span>
<span class="w">          </span><span class="no">pytest</span>
<span class="w">          </span><span class="no">docker build .</span>
<span class="w">          </span><span class="no">kubectl apply -f k8s/</span>
<span class="w">          </span><span class="no"># Um erro aqui para tudo</span>
</pre></div>
</div>
<p><strong>Solução: Pipeline Modular</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ✅ BOA PRÁTICA: Jobs especializados</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">lint</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Code Quality</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Unit Tests</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lint</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3.11</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.12</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">security</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Security Scan</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build &amp; Push</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">test</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">security</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>2. Testes Flaky e Instáveis</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ❌ ANTI-PADRÃO: Teste dependente de timing</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_async_operation</span><span class="p">():</span>
    <span class="n">start_async_operation</span><span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Espera arbitrária</span>
    <span class="k">assert</span> <span class="n">operation_completed</span><span class="p">()</span>

<span class="c1"># ❌ ANTI-PADRÃO: Dependência de estado global</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_user_creation</span><span class="p">():</span>
    <span class="c1"># Assume que database está em estado específico</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">create_user</span><span class="p">(</span><span class="s2">&quot;test@example.com&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">1</span>  <span class="c1"># Quebra se outros testes rodaram primeiro</span>
</pre></div>
</div>
<p><strong>Solução: Testes Determinísticos</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ✅ BOA PRÁTICA: Mock e isolamento</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">clean_database</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">database</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
        <span class="k">yield</span>
        <span class="c1"># Rollback automático</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_async_operation</span><span class="p">(</span><span class="n">clean_database</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s1">&#39;external_service.call&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">mock_call</span><span class="p">:</span>
        <span class="n">mock_call</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">}</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">start_async_operation</span><span class="p">()</span>
        
        <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span>
        <span class="n">mock_call</span><span class="o">.</span><span class="n">assert_called_once</span><span class="p">()</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>Caixa de Destaque: Armadilhas a Evitar</strong></p>
<ol class="arabic simple">
<li><p><strong>Commits Gigantes:</strong> Sempre prefira commits pequenos e focados</p></li>
<li><p><strong>Branches Órfãos:</strong> Delete branches merged regularmente</p></li>
<li><p><strong>Secrets Expostos:</strong> Use sempre ferramentas de secret management</p></li>
<li><p><strong>Testes Flaky:</strong> Invista tempo em testes determinísticos</p></li>
<li><p><strong>Pipeline Monolítico:</strong> Modularize para permitir falhas granulares</p></li>
<li><p><strong>Deploy Manual:</strong> Automatize 100% do processo de deploy</p></li>
<li><p><strong>Rollback Complexo:</strong> Mantenha rollbacks simples e testados</p></li>
</ol>
</div></blockquote>
</section>
</section>
<section id="variacoes-e-arquiteturas-especializadas">
<h3>4.2. Variações e Arquiteturas Especializadas<a class="headerlink" href="#variacoes-e-arquiteturas-especializadas" title="Link to this heading">#</a></h3>
<section id="gitops-git-como-source-of-truth">
<h4>4.2.1. GitOps: Git como Source of Truth<a class="headerlink" href="#gitops-git-como-source-of-truth" title="Link to this heading">#</a></h4>
<p><strong>Conceito Avançado:</strong></p>
<p>GitOps representa uma evolução do CI/CD tradicional, onde o estado desejado da infraestrutura e aplicações é declarado em Git, e agentes automatizados garantem que o estado atual converge para o estado desejado.</p>
<p><strong>Arquitetura GitOps com ArgoCD:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># infrastructure/gitops/applications/backend-app.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">task-management-backend</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/company/task-management-system</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HEAD</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure/kubernetes/overlays/production</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">automated</span><span class="p">:</span>
<span class="w">      </span><span class="nt">prune</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">      </span><span class="c1"># Remove recursos não declarados</span>
<span class="w">      </span><span class="nt">selfHeal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">   </span><span class="c1"># Corrige drift automático</span>
<span class="w">    </span><span class="nt">syncOptions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CreateNamespace=true</span>
<span class="w">    </span><span class="nt">retry</span><span class="p">:</span>
<span class="w">      </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="nt">backoff</span><span class="p">:</span>
<span class="w">        </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
<span class="w">        </span><span class="nt">factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">maxDuration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3m</span>
<span class="w">  </span><span class="nt">revisionHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</div>
<p><strong>Pipeline GitOps Workflow:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># .github/workflows/gitops-promotion.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GitOps Environment Promotion</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">target_environment</span><span class="p">:</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Target</span><span class="nv"> </span><span class="s">environment&#39;</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;staging&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">choice</span>
<span class="w">        </span><span class="nt">options</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">staging</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">promote-to-staging</span><span class="p">:</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.ref == &#39;refs/heads/main&#39;</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.GITOPS_TOKEN }}</span>
<span class="w">          </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update staging manifests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># CONCEITO: Declarative State Management</span>
<span class="w">          </span><span class="no"># O estado desejado é versionado em Git e ArgoCD</span>
<span class="w">          </span><span class="no"># sincroniza automaticamente o cluster</span>
<span class="w">          </span>
<span class="w">          </span><span class="no">NEW_IMAGE=&quot;${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.sha }}&quot;</span>
<span class="w">          </span>
<span class="w">          </span><span class="no"># Update Kustomization for staging</span>
<span class="w">          </span><span class="no">cd infrastructure/kubernetes/overlays/staging</span>
<span class="w">          </span>
<span class="w">          </span><span class="no">kustomize edit set image backend=$NEW_IMAGE</span>
<span class="w">          </span>
<span class="w">          </span><span class="no"># Commit and push changes</span>
<span class="w">          </span><span class="no">git config user.name &quot;GitOps Bot&quot;</span>
<span class="w">          </span><span class="no">git config user.email &quot;gitops@company.com&quot;</span>
<span class="w">          </span>
<span class="w">          </span><span class="no">git add .</span>
<span class="w">          </span><span class="no">git commit -m &quot;chore(staging): update backend image to ${{ github.sha }}</span>

<span class="w">          </span><span class="no">Automated promotion from main branch</span>
<span class="w">          </span><span class="no">Image: $NEW_IMAGE</span>
<span class="w">          </span>
<span class="w">          </span><span class="no">[skip ci]&quot;</span>
<span class="w">          </span>
<span class="w">          </span><span class="no">git push origin main</span>

<span class="w">  </span><span class="nt">promote-to-production</span><span class="p">:</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.event.inputs.target_environment == &#39;production&#39;</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production-approval</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Manual approval gate</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/github-script@v6</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">// Approval logic</span>
<span class="w">            </span><span class="no">core.info(&#39;Production deployment requires manual approval&#39;);</span>
<span class="w">            </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Promote to production</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># Similar to staging but with additional validations</span>
<span class="w">          </span><span class="no">echo &quot;Promoting to production...&quot;</span>
</pre></div>
</div>
</section>
<section id="multi-cloud-e-hybrid-cloud-strategies">
<h4>4.2.2. Multi-Cloud e Hybrid Cloud Strategies<a class="headerlink" href="#multi-cloud-e-hybrid-cloud-strategies" title="Link to this heading">#</a></h4>
<p><strong>Estratégia Multi-Provider:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># .github/workflows/multi-cloud-deploy.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Multi-Cloud Deployment</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span>
<span class="w">    </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Cloud</span><span class="nv"> </span><span class="s">providers</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">deploy&#39;</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;aws,azure,gcp&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">deploy-matrix</span><span class="p">:</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ fromJSON(&#39;[\&quot;aws\&quot;, \&quot;azure\&quot;, \&quot;gcp\&quot;]&#39;) }}</span>
<span class="w">        </span><span class="nt">region</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-east-1</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">eu-west-1</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ap-southeast-1</span>
<span class="w">        </span><span class="nt">exclude</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Azure regions use different naming</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-east-1</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">eu-west-1</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ap-southeast-1</span>
<span class="w">        </span><span class="nt">include</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">eastus</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">westeurope</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">southeastasia</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcp</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-central1</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcp</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">europe-west1</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcp</span>
<span class="w">            </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asia-southeast1</span>

<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Configure ${{ matrix.provider }} credentials</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">case &quot;${{ matrix.provider }}&quot; in</span>
<span class="w">            </span><span class="no">&quot;aws&quot;)</span>
<span class="w">              </span><span class="no">aws configure set aws_access_key_id ${{ secrets.AWS_ACCESS_KEY_ID }}</span>
<span class="w">              </span><span class="no">aws configure set aws_secret_access_key ${{ secrets.AWS_SECRET_ACCESS_KEY }}</span>
<span class="w">              </span><span class="no">aws configure set region ${{ matrix.region }}</span>
<span class="w">              </span><span class="no">;;</span>
<span class="w">            </span><span class="no">&quot;azure&quot;)</span>
<span class="w">              </span><span class="no">az login --service-principal \</span>
<span class="w">                </span><span class="no">-u ${{ secrets.AZURE_CLIENT_ID }} \</span>
<span class="w">                </span><span class="no">-p ${{ secrets.AZURE_CLIENT_SECRET }} \</span>
<span class="w">                </span><span class="no">--tenant ${{ secrets.AZURE_TENANT_ID }}</span>
<span class="w">              </span><span class="no">;;</span>
<span class="w">            </span><span class="no">&quot;gcp&quot;)</span>
<span class="w">              </span><span class="no">echo &#39;${{ secrets.GCP_SERVICE_ACCOUNT_KEY }}&#39; | base64 -d &gt; gcp-key.json</span>
<span class="w">              </span><span class="no">gcloud auth activate-service-account --key-file gcp-key.json</span>
<span class="w">              </span><span class="no">gcloud config set project ${{ secrets.GCP_PROJECT_ID }}</span>
<span class="w">              </span><span class="no">;;</span>
<span class="w">          </span><span class="no">esac</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to ${{ matrix.provider }}</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># Provider-specific deployment logic</span>
<span class="w">          </span><span class="no">bash scripts/deploy-to-${{ matrix.provider }}.sh \</span>
<span class="w">            </span><span class="no">--region ${{ matrix.region }} \</span>
<span class="w">            </span><span class="no">--image ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.sha }}</span>
</pre></div>
</div>
</section>
<section id="edge-computing-e-cdn-integration">
<h4>4.2.3. Edge Computing e CDN Integration<a class="headerlink" href="#edge-computing-e-cdn-integration" title="Link to this heading">#</a></h4>
<p><strong>Deploy para Edge Locations:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># .github/workflows/edge-deployment.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Edge Computing Deployment</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;edge-functions/**&#39;</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">deploy-edge-functions</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">cloudflare-workers</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">aws-lambda-edge</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">vercel-edge</span><span class="p p-Indicator">]</span>
<span class="w">        </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to ${{ matrix.platform }}</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">case &quot;${{ matrix.platform }}&quot; in</span>
<span class="w">            </span><span class="no">&quot;cloudflare-workers&quot;)</span>
<span class="w">              </span><span class="no"># Deploy to Cloudflare Workers</span>
<span class="w">              </span><span class="no">npm install -g @cloudflare/wrangler</span>
<span class="w">              </span><span class="no">wrangler publish edge-functions/cloudflare/</span>
<span class="w">              </span><span class="no">;;</span>
<span class="w">            </span><span class="no">&quot;aws-lambda-edge&quot;)</span>
<span class="w">              </span><span class="no"># Deploy to Lambda@Edge</span>
<span class="w">              </span><span class="no">aws lambda update-function-code \</span>
<span class="w">                </span><span class="no">--function-name edge-api-handler \</span>
<span class="w">                </span><span class="no">--zip-file fileb://edge-functions/aws/deployment.zip</span>
<span class="w">              </span><span class="no">;;</span>
<span class="w">            </span><span class="no">&quot;vercel-edge&quot;)</span>
<span class="w">              </span><span class="no"># Deploy to Vercel Edge Functions</span>
<span class="w">              </span><span class="no">vercel deploy --prod edge-functions/vercel/</span>
<span class="w">              </span><span class="no">;;</span>
<span class="w">          </span><span class="no">esac</span>
</pre></div>
</div>
</section>
</section>
<section id="analise-de-performance-e-otimizacao">
<h3>4.3. Análise de Performance e Otimização<a class="headerlink" href="#analise-de-performance-e-otimizacao" title="Link to this heading">#</a></h3>
<section id="metricas-de-pipeline-performance">
<h4>4.3.1. Métricas de Pipeline Performance<a class="headerlink" href="#metricas-de-pipeline-performance" title="Link to this heading">#</a></h4>
<p><strong>Sistema de Métricas Avançadas:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># scripts/pipeline_analytics_advanced.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Sistema avançado de análise de performance de pipelines.</span>

<span class="sd">CONCEITO: Data-Driven Pipeline Optimization</span>
<span class="sd">Utiliza machine learning para identificar padrões e otimizar</span>
<span class="sd">automaticamente a performance dos workflows.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">plotly.graph_objects</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">go</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">plotly.subplots</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_subplots</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PipelinePerformanceAnalyzer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Analisador avançado de performance com ML.&quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">github_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">github_token</span> <span class="o">=</span> <span class="n">github_token</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">repo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
        
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">collect_comprehensive_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">days_back</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">90</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Coleta métricas abrangentes dos últimos N dias.&quot;&quot;&quot;</span>
        
        <span class="c1"># Coletar dados de múltiplas fontes</span>
        <span class="n">github_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_github_actions_data</span><span class="p">(</span><span class="n">days_back</span><span class="p">)</span>
        <span class="n">infrastructure_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_infrastructure_metrics</span><span class="p">(</span><span class="n">days_back</span><span class="p">)</span>
        <span class="n">code_metrics</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_code_quality_metrics</span><span class="p">(</span><span class="n">days_back</span><span class="p">)</span>
        
        <span class="c1"># Combinar dados</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">github_data</span><span class="p">,</span> <span class="n">infrastructure_data</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">code_metrics</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">df</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_performance_patterns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identifica padrões de performance usando ML.&quot;&quot;&quot;</span>
        
        <span class="c1"># Features para o modelo</span>
        <span class="n">features</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;code_complexity&#39;</span><span class="p">,</span>
            <span class="s1">&#39;test_count&#39;</span><span class="p">,</span>
            <span class="s1">&#39;file_changes&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lines_changed&#39;</span><span class="p">,</span>
            <span class="s1">&#39;hour_of_day&#39;</span><span class="p">,</span>
            <span class="s1">&#39;day_of_week&#39;</span><span class="p">,</span>
            <span class="s1">&#39;runner_type&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parallelism_level&#39;</span><span class="p">,</span>
            <span class="s1">&#39;cache_hit_rate&#39;</span><span class="p">,</span>
            <span class="s1">&#39;dependency_count&#39;</span>
        <span class="p">]</span>
        
        <span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">features</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_duration_minutes&#39;</span><span class="p">]</span>
        
        <span class="c1"># Treinar modelo</span>
        <span class="n">X_scaled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        
        <span class="c1"># Feature importance</span>
        <span class="n">feature_importance</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">))</span>
        
        <span class="c1"># Predições</span>
        <span class="n">predictions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">)</span>
        
        <span class="c1"># Análise de outliers</span>
        <span class="n">outliers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identify_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>
        
        <span class="c1"># Padrões temporais</span>
        <span class="n">temporal_patterns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analyze_temporal_patterns</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;feature_importance&#39;</span><span class="p">:</span> <span class="n">feature_importance</span><span class="p">,</span>
            <span class="s1">&#39;outliers&#39;</span><span class="p">:</span> <span class="n">outliers</span><span class="p">,</span>
            <span class="s1">&#39;temporal_patterns&#39;</span><span class="p">:</span> <span class="n">temporal_patterns</span><span class="p">,</span>
            <span class="s1">&#39;performance_trends&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_trends</span><span class="p">(</span><span class="n">df</span><span class="p">),</span>
            <span class="s1">&#39;optimization_recommendations&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_recommendations</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">feature_importance</span><span class="p">)</span>
        <span class="p">}</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_recommendations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">feature_importance</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gera recomendações de otimização baseadas nos dados.&quot;&quot;&quot;</span>
        
        <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1"># Análise de cache</span>
        <span class="n">avg_cache_hit_rate</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cache_hit_rate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">avg_cache_hit_rate</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;cache_optimization&#39;</span><span class="p">,</span>
                <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span>
                <span class="s1">&#39;impact&#39;</span><span class="p">:</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span>
                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Cache hit rate baixo (</span><span class="si">{}</span><span class="s1">%). Considere otimizar estratégia de cache.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">avg_cache_hit_rate</span><span class="p">),</span>
                <span class="s1">&#39;actions&#39;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s1">&#39;Revisar cache keys para maior granularidade&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Implementar cache warming&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Analisar invalidação prematura de cache&#39;</span>
                <span class="p">]</span>
            <span class="p">})</span>
        
        <span class="c1"># Análise de paralelismo</span>
        <span class="k">if</span> <span class="n">feature_importance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parallelism_level&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;parallelization&#39;</span><span class="p">,</span>
                <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span>
                <span class="s1">&#39;impact&#39;</span><span class="p">:</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span>
                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Nível de paralelismo impacta significativamente a performance.&#39;</span><span class="p">,</span>
                <span class="s1">&#39;actions&#39;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s1">&#39;Aumentar jobs paralelos onde possível&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Otimizar dependências entre jobs&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Considerar matrix strategy para testes&#39;</span>
                <span class="p">]</span>
            <span class="p">})</span>
        
        <span class="c1"># Análise temporal</span>
        <span class="n">peak_hours</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;hour_of_day&#39;</span><span class="p">)[</span><span class="s1">&#39;total_duration_minutes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">peak_hours</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">):</span>  <span class="c1"># Business hours</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;resource_scheduling&#39;</span><span class="p">,</span>
                <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span>
                <span class="s1">&#39;impact&#39;</span><span class="p">:</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span>
                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Performance degrada no horário comercial (pico às </span><span class="si">{</span><span class="n">peak_hours</span><span class="si">}</span><span class="s1">h).&#39;</span><span class="p">,</span>
                <span class="s1">&#39;actions&#39;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s1">&#39;Considerar recursos dedicados para horário comercial&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Implementar queue priority&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Escalar recursos automaticamente&#39;</span>
                <span class="p">]</span>
            <span class="p">})</span>
        
        <span class="k">return</span> <span class="n">recommendations</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_optimization_dashboard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis_results</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gera dashboard interativo de otimização.&quot;&quot;&quot;</span>
        
        <span class="n">fig</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span>
            <span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">subplot_titles</span><span class="o">=</span><span class="p">[</span>
                <span class="s1">&#39;Feature Importance para Duração do Pipeline&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Outliers de Performance&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Padrões Temporais&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Tendências de Melhoria&#39;</span>
            <span class="p">],</span>
            <span class="n">specs</span><span class="o">=</span><span class="p">[</span>
                <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;scatter&quot;</span><span class="p">}],</span>
                <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;heatmap&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;scatter&quot;</span><span class="p">}]</span>
            <span class="p">]</span>
        <span class="p">)</span>
        
        <span class="c1"># Feature Importance</span>
        <span class="n">features</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">analysis_results</span><span class="p">[</span><span class="s1">&#39;feature_importance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">importance</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">analysis_results</span><span class="p">[</span><span class="s1">&#39;feature_importance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">importance</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">features</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Importância&#39;</span><span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span>
        
        <span class="c1"># Outliers</span>
        <span class="n">outliers</span> <span class="o">=</span> <span class="n">analysis_results</span><span class="p">[</span><span class="s1">&#39;outliers&#39;</span><span class="p">]</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">outliers</span><span class="p">[</span><span class="s1">&#39;expected_duration&#39;</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">outliers</span><span class="p">[</span><span class="s1">&#39;actual_duration&#39;</span><span class="p">],</span>
                <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span>
                <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">outliers</span><span class="p">[</span><span class="s1">&#39;severity&#39;</span><span class="p">],</span>
                    <span class="n">colorscale</span><span class="o">=</span><span class="s1">&#39;Reds&#39;</span><span class="p">,</span>
                    <span class="n">showscale</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">),</span>
                <span class="n">text</span><span class="o">=</span><span class="n">outliers</span><span class="p">[</span><span class="s1">&#39;workflow_name&#39;</span><span class="p">],</span>
                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Outliers&#39;</span>
            <span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span>
        <span class="p">)</span>
        
        <span class="c1"># Temporal patterns</span>
        <span class="n">temporal</span> <span class="o">=</span> <span class="n">analysis_results</span><span class="p">[</span><span class="s1">&#39;temporal_patterns&#39;</span><span class="p">]</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">go</span><span class="o">.</span><span class="n">Heatmap</span><span class="p">(</span>
                <span class="n">z</span><span class="o">=</span><span class="n">temporal</span><span class="p">[</span><span class="s1">&#39;duration_heatmap&#39;</span><span class="p">],</span>
                <span class="n">x</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">)),</span>  <span class="c1"># Hours</span>
                <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Mon&#39;</span><span class="p">,</span> <span class="s1">&#39;Tue&#39;</span><span class="p">,</span> <span class="s1">&#39;Wed&#39;</span><span class="p">,</span> <span class="s1">&#39;Thu&#39;</span><span class="p">,</span> <span class="s1">&#39;Fri&#39;</span><span class="p">,</span> <span class="s1">&#39;Sat&#39;</span><span class="p">,</span> <span class="s1">&#39;Sun&#39;</span><span class="p">],</span>
                <span class="n">colorscale</span><span class="o">=</span><span class="s1">&#39;Viridis&#39;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Duração por Hora/Dia&#39;</span>
            <span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span>
        
        <span class="c1"># Performance trends</span>
        <span class="n">trends</span> <span class="o">=</span> <span class="n">analysis_results</span><span class="p">[</span><span class="s1">&#39;performance_trends&#39;</span><span class="p">]</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">trends</span><span class="p">[</span><span class="s1">&#39;dates&#39;</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">trends</span><span class="p">[</span><span class="s1">&#39;moving_average&#39;</span><span class="p">],</span>
                <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines&#39;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Tendência (7 dias)&#39;</span><span class="p">,</span>
                <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span>
        <span class="p">)</span>
        
        <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Dashboard de Otimização de Pipeline&#39;</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
            <span class="n">showlegend</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        
        <span class="c1"># Salvar dashboard</span>
        <span class="n">dashboard_html</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">include_plotlyjs</span><span class="o">=</span><span class="s1">&#39;cdn&#39;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;pipeline_optimization_dashboard.html&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dashboard_html</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="s1">&#39;pipeline_optimization_dashboard.html&#39;</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Executar análise completa de otimização.&quot;&quot;&quot;</span>
    
    <span class="n">analyzer</span> <span class="o">=</span> <span class="n">PipelinePerformanceAnalyzer</span><span class="p">(</span>
        <span class="n">github_token</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;GITHUB_TOKEN&#39;</span><span class="p">),</span>
        <span class="n">repo</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;GITHUB_REPOSITORY&#39;</span><span class="p">)</span>
    <span class="p">)</span>
    
    <span class="c1"># Coletar dados</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;📊 Coletando métricas de performance...&quot;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">collect_comprehensive_metrics</span><span class="p">(</span><span class="n">days_back</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
    
    <span class="c1"># Analisar padrões</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;🔍 Analisando padrões com ML...&quot;</span><span class="p">)</span>
    <span class="n">analysis</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_performance_patterns</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    
    <span class="c1"># Gerar dashboard</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;📈 Gerando dashboard de otimização...&quot;</span><span class="p">)</span>
    <span class="n">dashboard_file</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">generate_optimization_dashboard</span><span class="p">(</span><span class="n">analysis</span><span class="p">)</span>
    
    <span class="c1"># Imprimir recomendações</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🎯 RECOMENDAÇÕES DE OTIMIZAÇÃO:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;optimization_recommendations&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> (Prioridade: </span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">&#39;priority&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Impacto: </span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">&#39;impact&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Descrição: </span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ações recomendadas:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">rec</span><span class="p">[</span><span class="s1">&#39;actions&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  • </span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">📊 Dashboard salvo em: </span><span class="si">{</span><span class="n">dashboard_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="auto-scaling-de-runners">
<h4>4.3.2. Auto-Scaling de Runners<a class="headerlink" href="#auto-scaling-de-runners" title="Link to this heading">#</a></h4>
<p><strong>Configuração de Runners Dinâmicos:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># .github/workflows/dynamic-scaling.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dynamic Runner Scaling</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workflow_run</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflows</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;*&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">types</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">queued</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">scale-runners</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Analyze queue and scale</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># CONCEITO: Elastic Compute for CI/CD</span>
<span class="w">          </span><span class="no"># Escala runners baseado na demanda atual</span>
<span class="w">          </span>
<span class="w">          </span><span class="no"># Obter estatísticas da queue</span>
<span class="w">          </span><span class="no">QUEUE_SIZE=$(gh api repos/${{ github.repository }}/actions/runs \</span>
<span class="w">            </span><span class="no">--jq &#39;.workflow_runs | map(select(.status == &quot;queued&quot;)) | length&#39;)</span>
<span class="w">          </span>
<span class="w">          </span><span class="no">RUNNING_JOBS=$(gh api repos/${{ github.repository }}/actions/runs \</span>
<span class="w">            </span><span class="no">--jq &#39;.workflow_runs | map(select(.status == &quot;in_progress&quot;)) | length&#39;)</span>
<span class="w">          </span>
<span class="w">          </span><span class="no">echo &quot;Queue size: $QUEUE_SIZE&quot;</span>
<span class="w">          </span><span class="no">echo &quot;Running jobs: $RUNNING_JOBS&quot;</span>
<span class="w">          </span>
<span class="w">          </span><span class="no"># Decisão de scaling</span>
<span class="w">          </span><span class="no">if [ $QUEUE_SIZE -gt 5 ] &amp;&amp; [ $RUNNING_JOBS -lt 10 ]; then</span>
<span class="w">            </span><span class="no">echo &quot;High queue detected, scaling up runners...&quot;</span>
<span class="w">          </span><span class="no">  </span>
<span class="w">            </span><span class="no"># Escalar runners via API do provider</span>
<span class="w">            </span><span class="no">aws ec2 run-instances \</span>
<span class="w">              </span><span class="no">--image-id ami-0c02fb55956c7d316 \</span>
<span class="w">              </span><span class="no">--instance-type c5.large \</span>
<span class="w">              </span><span class="no">--user-data file://scripts/runner-setup.sh \</span>
<span class="w">              </span><span class="no">--tag-specifications &#39;ResourceType=instance,Tags=[{Key=Purpose,Value=github-runner}]&#39; \</span>
<span class="w">              </span><span class="no">--count 3</span>
<span class="w">          </span><span class="no">    </span>
<span class="w">          </span><span class="no">elif [ $QUEUE_SIZE -eq 0 ] &amp;&amp; [ $RUNNING_JOBS -eq 0 ]; then</span>
<span class="w">            </span><span class="no">echo &quot;No work detected, scaling down idle runners...&quot;</span>
<span class="w">          </span><span class="no">  </span>
<span class="w">            </span><span class="no"># Identificar runners idle</span>
<span class="w">            </span><span class="no">aws ec2 describe-instances \</span>
<span class="w">              </span><span class="no">--filters &quot;Name=tag:Purpose,Values=github-runner&quot; \</span>
<span class="w">                       </span><span class="no">&quot;Name=instance-state-name,Values=running&quot; \</span>
<span class="w">              </span><span class="no">--query &#39;Reservations[].Instances[?LaunchTime&lt;=`2024-01-01T00:00:00Z`].InstanceId&#39; \</span>
<span class="w">              </span><span class="no">--output text | \</span>
<span class="w">            </span><span class="no">xargs -r aws ec2 terminate-instances --instance-ids</span>
<span class="w">          </span><span class="no">fi</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">          </span><span class="nt">GH_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.GITHUB_TOKEN }}</span>
<span class="w">          </span><span class="nt">AWS_ACCESS_KEY_ID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AWS_ACCESS_KEY_ID }}</span>
<span class="w">          </span><span class="nt">AWS_SECRET_ACCESS_KEY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AWS_SECRET_ACCESS_KEY }}</span>
</pre></div>
</div>
<p>A implementação completa deste sistema demonstra como práticas avançadas de Git, CI/CD e GitHub Actions podem transformar completamente o ciclo de desenvolvimento, oferecendo não apenas automação, mas inteligência e otimização contínua dos processos.</p>
</section>
</section>
</section>
<section id="secao-5-sintese-e-perspectivas-futuras">
<h2>Seção 5: Síntese e Perspectivas Futuras<a class="headerlink" href="#secao-5-sintese-e-perspectivas-futuras" title="Link to this heading">#</a></h2>
<section id="conexoes-com-outras-areas-da-computacao">
<h3>5.1. Conexões com Outras Áreas da Computação<a class="headerlink" href="#conexoes-com-outras-areas-da-computacao" title="Link to this heading">#</a></h3>
<section id="devops-e-site-reliability-engineering-sre">
<h4>5.1.1. DevOps e Site Reliability Engineering (SRE)<a class="headerlink" href="#devops-e-site-reliability-engineering-sre" title="Link to this heading">#</a></h4>
<p>O Git e CI/CD são fundamentais para implementar práticas modernas de DevOps e SRE, criando a base para:</p>
<p><strong>Observabilidade e Monitoramento:</strong></p>
<ul class="simple">
<li><p><strong>Logs estruturados</strong> versionados junto com o código</p></li>
<li><p><strong>Métricas como código</strong> (Infrastructure as Code)</p></li>
<li><p><strong>Alertas baseados em commits</strong> e mudanças de configuração</p></li>
<li><p><strong>Dashboards versionados</strong> que evoluem com o sistema</p></li>
</ul>
<p><strong>Error Budget e SLA Management:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exemplo de SLA como código</span>
<span class="c1"># sla/backend-api.yaml</span>
<span class="n">apiVersion</span><span class="p">:</span> <span class="n">slo</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="p">:</span> <span class="n">ServiceLevelObjective</span>
<span class="n">metadata</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">backend</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">availability</span>
<span class="n">spec</span><span class="p">:</span>
  <span class="n">service</span><span class="p">:</span> <span class="n">task</span><span class="o">-</span><span class="n">management</span><span class="o">-</span><span class="n">backend</span>
  <span class="n">sli</span><span class="p">:</span>
    <span class="n">ratioMetric</span><span class="p">:</span>
      <span class="n">successMetric</span><span class="p">:</span> <span class="n">http_requests_total</span><span class="p">{</span><span class="n">status</span><span class="err">!</span><span class="o">~</span><span class="s2">&quot;5..&quot;</span><span class="p">}</span>
      <span class="n">totalMetric</span><span class="p">:</span> <span class="n">http_requests_total</span>
  <span class="n">objective</span><span class="p">:</span> <span class="mf">99.9</span>
  <span class="n">timeWindow</span><span class="p">:</span> <span class="mi">30</span><span class="n">d</span>
  <span class="n">errorBudgetPolicy</span><span class="p">:</span>
    <span class="n">burnRateThreshold</span><span class="p">:</span> <span class="mf">2.0</span>
    <span class="n">actions</span><span class="p">:</span>
      <span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">freeze_deployments</span>
        <span class="n">duration</span><span class="p">:</span> <span class="mi">1</span><span class="n">h</span>
      <span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">alert</span>
        <span class="n">severity</span><span class="p">:</span> <span class="n">critical</span>
</pre></div>
</div>
</section>
<section id="machine-learning-e-data-science">
<h4>5.1.2. Machine Learning e Data Science<a class="headerlink" href="#machine-learning-e-data-science" title="Link to this heading">#</a></h4>
<p>A integração de Git com workflows de ML (MLOps) representa uma área de crescimento exponencial:</p>
<p><strong>Versionamento de Modelos:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># MLOps Pipeline</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ML Model Training &amp; Deployment</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;models/**&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;data/**&#39;</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">train-model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpu-runner</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Data Version Control</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># DVC (Data Version Control) integration</span>
<span class="w">          </span><span class="no">dvc pull  # Download latest datasets</span>
<span class="w">          </span><span class="no">dvc repro  # Reproduce ML pipeline</span>
<span class="w">          </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Model Training</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">python train.py \</span>
<span class="w">            </span><span class="no">--data-version ${{ github.sha }} \</span>
<span class="w">            </span><span class="no">--model-version ${{ github.sha }}-${{ github.run_number }}</span>
<span class="w">          </span><span class="no">  </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Model Validation</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">python validate_model.py \</span>
<span class="w">            </span><span class="no">--baseline-accuracy 0.85 \</span>
<span class="w">            </span><span class="no">--model-path models/latest.pkl</span>
<span class="w">          </span><span class="no">  </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Register Model</span>
<span class="w">        </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success()</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># MLflow Model Registry</span>
<span class="w">          </span><span class="no">mlflow models deploy \</span>
<span class="w">            </span><span class="no">--model-uri models:/task-classifier/${{ github.sha }} \</span>
<span class="w">            </span><span class="no">--stage Production</span>
</pre></div>
</div>
<p><strong>Características da Integração ML + CI/CD:</strong></p>
<ul class="simple">
<li><p><strong>Reprodutibilidade:</strong> Cada commit representa um experimento reproduzível</p></li>
<li><p><strong>A/B Testing Automatizado:</strong> Deploy de múltiplas versões de modelo</p></li>
<li><p><strong>Data Drift Detection:</strong> Monitoramento contínuo da qualidade dos dados</p></li>
<li><p><strong>Model Performance Tracking:</strong> Métricas de modelo como parte do pipeline</p></li>
</ul>
</section>
<section id="seguranca-da-informacao-e-compliance">
<h4>5.1.3. Segurança da Informação e Compliance<a class="headerlink" href="#seguranca-da-informacao-e-compliance" title="Link to this heading">#</a></h4>
<p>Git e CI/CD são pilares fundamentais para <strong>Security as Code</strong> e compliance automatizado:</p>
<p><strong>Compliance Automatizado:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compliance Pipeline</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Compliance &amp; Audit</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">schedule</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cron</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*&#39;</span><span class="w">  </span><span class="c1"># Daily compliance check</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">compliance-audit</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GDPR Compliance Check</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># Verificar se dados pessoais estão sendo tratados corretamente</span>
<span class="w">          </span><span class="no">python scripts/gdpr_audit.py \</span>
<span class="w">            </span><span class="no">--database-schema schema/ \</span>
<span class="w">            </span><span class="no">--data-flows docs/data-flows.yaml \</span>
<span class="w">            </span><span class="no">--output compliance-report.json</span>
<span class="w">          </span><span class="no">  </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SOX Compliance</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># Auditoria de controles internos</span>
<span class="w">          </span><span class="no">python scripts/sox_audit.py \</span>
<span class="w">            </span><span class="no">--change-logs git-log.json \</span>
<span class="w">            </span><span class="no">--approval-matrix docs/approval-matrix.yaml</span>
<span class="w">          </span><span class="no">  </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generate Compliance Report</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># Relatório consolidado para auditores</span>
<span class="w">          </span><span class="no">python scripts/generate_compliance_dashboard.py \</span>
<span class="w">            </span><span class="no">--output compliance-dashboard.html</span>
</pre></div>
</div>
</section>
</section>
<section id="a-fronteira-da-pesquisa-e-o-futuro">
<h3>5.2. A Fronteira da Pesquisa e o Futuro<a class="headerlink" href="#a-fronteira-da-pesquisa-e-o-futuro" title="Link to this heading">#</a></h3>
<section id="inteligencia-artificial-em-devops-aiops">
<h4>5.2.1. Inteligência Artificial em DevOps (AIOps)<a class="headerlink" href="#inteligencia-artificial-em-devops-aiops" title="Link to this heading">#</a></h4>
<p><strong>Tendências Emergentes:</strong></p>
<ol class="arabic simple">
<li><p><strong>Automatic Code Review com AI:</strong></p>
<ul class="simple">
<li><p>Modelos de linguagem especializados em code review</p></li>
<li><p>Detecção automática de bugs e vulnerabilidades</p></li>
<li><p>Sugestões contextuais de melhorias</p></li>
</ul>
</li>
<li><p><strong>Predictive Failure Analysis:</strong></p>
<ul class="simple">
<li><p>ML para prever falhas em pipeline antes que aconteçam</p></li>
<li><p>Análise de padrões históricos para otimização proativa</p></li>
<li><p>Auto-healing systems baseados em AI</p></li>
</ul>
</li>
<li><p><strong>Intelligent Resource Optimization:</strong></p>
<ul class="simple">
<li><p>Alocação dinâmica de recursos baseada em padrões de uso</p></li>
<li><p>Predição de demanda para scaling automático</p></li>
<li><p>Otimização de custos com AI</p></li>
</ul>
</li>
</ol>
<p><strong>Exemplo de AI-Powered Pipeline:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exemplo conceitual de pipeline com AI</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AIPoweredPipeline</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pipeline que usa AI para otimização contínua.&quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failure_predictor</span> <span class="o">=</span> <span class="n">FailurePredictionModel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_optimizer</span> <span class="o">=</span> <span class="n">ResourceOptimizationModel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code_reviewer</span> <span class="o">=</span> <span class="n">CodeReviewAI</span><span class="p">()</span>
    
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_intelligent_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">commit_sha</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># AI prediz probabilidade de falha</span>
        <span class="n">failure_risk</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">failure_predictor</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">commit_sha</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">failure_risk</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">:</span>
            <span class="c1"># Executar testes mais rigorosos</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_enhanced_testing</span><span class="p">()</span>
        
        <span class="c1"># AI otimiza recursos baseado no contexto</span>
        <span class="n">optimal_config</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_optimizer</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span>
            <span class="n">code_changes</span><span class="o">=</span><span class="n">commit_sha</span><span class="p">,</span>
            <span class="n">historical_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_historical_metrics</span><span class="p">(),</span>
            <span class="n">current_load</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_system_load</span><span class="p">()</span>
        <span class="p">)</span>
        
        <span class="c1"># Aplicar configuração otimizada</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_configuration</span><span class="p">(</span><span class="n">optimal_config</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="quantum-computing-e-devops">
<h4>5.2.2. Quantum Computing e DevOps<a class="headerlink" href="#quantum-computing-e-devops" title="Link to this heading">#</a></h4>
<p><strong>Impactos Futuros:</strong></p>
<ul class="simple">
<li><p><strong>Quantum-Safe Cryptography:</strong> Migração para algoritmos resistentes a computação quântica</p></li>
<li><p><strong>Quantum Testing:</strong> Simulação de sistemas complexos para testes</p></li>
<li><p><strong>Quantum Optimization:</strong> Otimização de pipelines usando algoritmos quânticos</p></li>
</ul>
</section>
<section id="edge-computing-e-iot-integration">
<h4>5.2.3. Edge Computing e IoT Integration<a class="headerlink" href="#edge-computing-e-iot-integration" title="Link to this heading">#</a></h4>
<p><strong>Evolução para Edge DevOps:</strong></p>
<ul class="simple">
<li><p>Deploy distribuído em milhões de dispositivos edge</p></li>
<li><p>Pipeline de atualização OTA (Over-The-Air) segura</p></li>
<li><p>Orquestração de código em dispositivos com recursos limitados</p></li>
</ul>
</section>
</section>
<section id="resumo-do-capitulo-e-mapa-mental">
<h3>5.3. Resumo do Capítulo e Mapa Mental<a class="headerlink" href="#resumo-do-capitulo-e-mapa-mental" title="Link to this heading">#</a></h3>
<section id="pontos-chave-do-capitulo">
<h4>5.3.1. Pontos-Chave do Capítulo<a class="headerlink" href="#pontos-chave-do-capitulo" title="Link to this heading">#</a></h4>
<p>• <strong>Git como Fundação:</strong> Controle de versão distribuído é a base para todas as práticas modernas de desenvolvimento</p>
<p>• <strong>CI/CD como Acelerador:</strong> Automação completa do pipeline reduz drasticamente time-to-market e aumenta qualidade</p>
<p>• <strong>GitHub Actions como Orquestrador:</strong> Platform-as-a-Service para automação que integra perfeitamente com Git</p>
<p>• <strong>Observabilidade como Necessidade:</strong> Monitoramento e métricas são essenciais para operação confiável</p>
<p>• <strong>Segurança como Prioridade:</strong> Security-first approach deve estar integrado em cada etapa do pipeline</p>
<p>• <strong>Cultura antes de Ferramentas:</strong> Mudança cultural e organizacional é mais importante que tooling</p>
<p>• <strong>Melhoria Contínua:</strong> Otimização baseada em dados e feedback loops rápidos</p>
</section>
<section id="mapa-mental-dos-conceitos">
<h4>5.3.2. Mapa Mental dos Conceitos<a class="headerlink" href="#mapa-mental-dos-conceitos" title="Link to this heading">#</a></h4>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>mindmap
  root((Git &amp; CI/CD))
    Git Fundamentals
      Distributed VCS
      Branching Strategies
        Git Flow
        GitHub Flow
        GitLab Flow
      Collaboration
        Pull Requests
        Code Review
        Merge Strategies
    
    CI/CD Pipeline
      Continuous Integration
        Automated Testing
        Code Quality Gates
        Security Scanning
      Continuous Delivery
        Automated Deployment
        Environment Management
        Rollback Strategies
      Continuous Deployment
        Zero-Downtime Deploys
        Blue-Green Strategy
        Canary Releases
    
    GitHub Actions
      Workflow Engine
        Events &amp; Triggers
        Jobs &amp; Steps
        Actions Marketplace
      Advanced Features
        Matrix Strategy
        Self-Hosted Runners
        Environments
      Security
        Secrets Management
        OIDC Integration
        Supply Chain Security
    
    DevOps Culture
      Collaboration
      Automation
      Monitoring
      Continuous Learning
      Fail Fast Philosophy
    
    Future Trends
      AIOps
      GitOps
      Edge Computing
      Quantum-Safe Security
</pre></div>
</div>
</section>
</section>
<section id="referencias-e-leituras-adicionais">
<h3>5.4. Referências e Leituras Adicionais<a class="headerlink" href="#referencias-e-leituras-adicionais" title="Link to this heading">#</a></h3>
<section id="livros-fundamentais">
<h4>5.4.1. Livros Fundamentais<a class="headerlink" href="#livros-fundamentais" title="Link to this heading">#</a></h4>
<p><strong>Git e Controle de Versão:</strong></p>
<ol class="arabic simple">
<li><p><strong>“Pro Git” - Scott Chacon &amp; Ben Straub</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://git-scm.com/book">https://git-scm.com/book</a></p></li>
<li><p>Referência definitiva sobre Git, gratuita e atualizada</p></li>
</ul>
</li>
<li><p><strong>“Git Pocket Guide” - Richard E. Silverman</strong></p>
<ul class="simple">
<li><p>Guia conciso para uso diário do Git</p></li>
</ul>
</li>
</ol>
<p><strong>DevOps e CI/CD:</strong>
3. <strong>“The DevOps Handbook” - Gene Kim, Patrick Debois, John Willis, Jez Humble</strong></p>
<ul class="simple">
<li><p>Fundamentos culturais e técnicos de DevOps</p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p><strong>“Continuous Delivery” - Jez Humble &amp; David Farley</strong></p>
<ul class="simple">
<li><p>Práticas e padrões para delivery confiável de software</p></li>
</ul>
</li>
<li><p><strong>“Accelerate” - Nicole Forsgren, Jez Humble, Gene Kim</strong></p>
<ul class="simple">
<li><p>Pesquisa científica sobre practices que aceleram entrega de software</p></li>
</ul>
</li>
</ol>
</section>
<section id="documentacao-oficial-e-recursos-online">
<h4>5.4.2. Documentação Oficial e Recursos Online<a class="headerlink" href="#documentacao-oficial-e-recursos-online" title="Link to this heading">#</a></h4>
<p><strong>Documentação Técnica:</strong></p>
<ul class="simple">
<li><p><strong>GitHub Actions Documentation:</strong> <a class="reference external" href="https://docs.github.com/en/actions">https://docs.github.com/en/actions</a></p></li>
<li><p><strong>Git Official Documentation:</strong> <a class="reference external" href="https://git-scm.com/doc">https://git-scm.com/doc</a></p></li>
<li><p><strong>Docker Documentation:</strong> <a class="reference external" href="https://docs.docker.com/">https://docs.docker.com/</a></p></li>
<li><p><strong>Kubernetes Documentation:</strong> <a class="reference external" href="https://kubernetes.io/docs/">https://kubernetes.io/docs/</a></p></li>
</ul>
<p><strong>Cursos e Tutoriais:</strong></p>
<ul class="simple">
<li><p><strong>GitHub Learning Lab:</strong> <a class="reference external" href="https://lab.github.com/">https://lab.github.com/</a></p></li>
<li><p><strong>Atlassian Git Tutorials:</strong> <a class="reference external" href="https://www.atlassian.com/git/tutorials">https://www.atlassian.com/git/tutorials</a></p></li>
<li><p><strong>GitLab CI/CD Tutorials:</strong> <a class="reference external" href="https://docs.gitlab.com/ee/ci/">https://docs.gitlab.com/ee/ci/</a></p></li>
</ul>
</section>
<section id="ferramentas-e-plataforms">
<h4>5.4.3. Ferramentas e Plataforms<a class="headerlink" href="#ferramentas-e-plataforms" title="Link to this heading">#</a></h4>
<p><strong>Controle de Versão:</strong></p>
<ul class="simple">
<li><p><strong>Git:</strong> <a class="reference external" href="https://git-scm.com/">https://git-scm.com/</a></p></li>
<li><p><strong>GitHub:</strong> <a class="github reference external" href="https://github.com/"></a></p></li>
<li><p><strong>GitLab:</strong> <a class="gitlab reference external" href="https://gitlab.com/"></a></p></li>
<li><p><strong>Bitbucket:</strong> <a class="reference external" href="https://bitbucket.org/">https://bitbucket.org/</a></p></li>
</ul>
<p><strong>CI/CD Platforms:</strong></p>
<ul class="simple">
<li><p><strong>GitHub Actions:</strong> <a class="github reference external" href="https://github.com/features/actions">features/actions</a></p></li>
<li><p><strong>Jenkins:</strong> <a class="reference external" href="https://www.jenkins.io/">https://www.jenkins.io/</a></p></li>
<li><p><strong>CircleCI:</strong> <a class="reference external" href="https://circleci.com/">https://circleci.com/</a></p></li>
<li><p><strong>GitLab CI:</strong> <a class="reference external" href="https://docs.gitlab.com/ee/ci/">https://docs.gitlab.com/ee/ci/</a></p></li>
</ul>
<p><strong>Monitoring e Observabilidade:</strong></p>
<ul class="simple">
<li><p><strong>Prometheus:</strong> <a class="reference external" href="https://prometheus.io/">https://prometheus.io/</a></p></li>
<li><p><strong>Grafana:</strong> <a class="reference external" href="https://grafana.com/">https://grafana.com/</a></p></li>
<li><p><strong>Datadog:</strong> <a class="reference external" href="https://www.datadoghq.com/">https://www.datadoghq.com/</a></p></li>
<li><p><strong>New Relic:</strong> <a class="reference external" href="https://newrelic.com/">https://newrelic.com/</a></p></li>
</ul>
</section>
<section id="comunidades-e-eventos">
<h4>5.4.4. Comunidades e Eventos<a class="headerlink" href="#comunidades-e-eventos" title="Link to this heading">#</a></h4>
<p><strong>Comunidades Online:</strong></p>
<ul class="simple">
<li><p><strong>r/devops</strong> (Reddit): <a class="reference external" href="https://reddit.com/r/devops">https://reddit.com/r/devops</a></p></li>
<li><p><strong><a class="reference external" href="http://DevOps.com">DevOps.com</a> Community:</strong> <a class="reference external" href="https://devops.com/">https://devops.com/</a></p></li>
<li><p><strong>CNCF Slack:</strong> <a class="reference external" href="https://slack.cncf.io/">https://slack.cncf.io/</a></p></li>
</ul>
<p><strong>Eventos e Conferências:</strong></p>
<ul class="simple">
<li><p><strong>DevOpsDays:</strong> <a class="reference external" href="https://devopsdays.org/">https://devopsdays.org/</a></p></li>
<li><p><strong>KubeCon + CloudNativeCon:</strong> <a class="reference external" href="https://events.linuxfoundation.org/">https://events.linuxfoundation.org/</a></p></li>
<li><p><strong>GitHub Universe:</strong> <a class="reference external" href="https://githubuniverse.com/">https://githubuniverse.com/</a></p></li>
</ul>
<hr class="docutils" />
<p><strong>Conclusão Final:</strong></p>
<p>Este capítulo apresentou uma jornada completa através do ecossistema moderno de desenvolvimento de software, desde os fundamentos do Git até implementações avançadas de CI/CD com GitHub Actions. A transformação digital das práticas de desenvolvimento não é apenas uma questão de ferramentas, mas de cultura, mentalidade e compromisso com a excelência técnica.</p>
<p>As organizações que abraçam essas práticas não apenas entregam software mais rápido e com maior qualidade, mas criam uma vantagem competitiva sustentável através da capacidade de adaptar-se rapidamente às mudanças do mercado e às necessidades dos usuários.</p>
<p>O futuro da engenharia de software está na intersecção entre automação inteligente, colaboração efetiva e melhoria contínua - pilares que Git, CI/CD e GitHub Actions ajudam a estabelecer e manter.</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs/aulas/aula-05-06-git-ci-cd-github-actions"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../aula-03-04-ambiente-profissional-python/README.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Ambiente Profissional de Projetos Python</p>
      </div>
    </a>
    <a class="right-next"
       href="../aula-07-08-refatoracao-code-smells-sonarcloud/README.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Refatoração de Códigos, Code Smells e Integração com SonarCloud</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sumario-completo">Sumário Completo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-1-abertura-e-engajamento">Seção 1: Abertura e Engajamento</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problema-motivador-o-caos-do-desenvolvimento-sem-versionamento">1.1. Problema Motivador: O Caos do Desenvolvimento Sem Versionamento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#contexto-historico-e-relevancia-atual-de-linus-torvalds-a-nuvem">1.2. Contexto Histórico e Relevância Atual: De Linus Torvalds à Nuvem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-2-fundamentos-teoricos">Seção 2: Fundamentos Teóricos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#revisao-pratica-de-git">2.1. Revisão Prática de Git</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#terminologia-essencial-e-definicoes-formais">2.1.1. Terminologia Essencial e Definições Formais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-conceitual-o-grafo-aciclico-direcionado-dag">2.1.2. Estrutura Conceitual: O Grafo Acíclico Direcionado (DAG)</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#diagrama-de-um-repositorio-git">Diagrama de um Repositório Git</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-consequencias-estrategias-de-branching">2.1.3. Análise de Consequências: Estratégias de Branching</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-critica-armadilhas-comuns-no-git">2.1.4. Análise Crítica: Armadilhas Comuns no Git</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#perguntas-frequentes-faq">Perguntas Frequentes (FAQ)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conventional-commits-estruturando-mensagens-de-commit">2.2. Conventional Commits: Estruturando Mensagens de Commit</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#o-que-sao-conventional-commits">2.2.1. O Que São Conventional Commits?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-comuns-de-commits">2.2.2. Tipos Comuns de Commits</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ferramentas-para-implementacao">2.2.3. Ferramentas para Implementação</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#beneficios">2.2.4. Benefícios</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ci-cd-integracao-e-entrega-continua">2.3. CI/CD: Integração e Entrega Contínua</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2.3.1. Terminologia Essencial e Definições Formais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-conceitual-anatomia-de-um-pipeline-ci-cd">2.3.2. Estrutura Conceitual: Anatomia de um Pipeline CI/CD</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-consequencias-modelos-de-delivery">2.3.3. Análise de Consequências: Modelos de Delivery</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows-do-github-actions-automacao-e-integracao">2.4. Workflows do GitHub Actions: Automação e Integração</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.4.1. Terminologia Essencial e Definições Formais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-conceitual-anatomia-de-um-workflow">2.4.2. Estrutura Conceitual: Anatomia de um Workflow</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-consequencias-estrategias-de-workflow">2.4.3. Análise de Consequências: Estratégias de Workflow</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-critica-armadilhas-e-limitacoes-comuns">2.4.4. Análise Crítica: Armadilhas e Limitações Comuns</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracao-avancada-actions-customizadas-e-reutilizacao">2.4.5. Configuração Avançada: Actions Customizadas e Reutilização</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-3-aplicacao-pratica-e-implementacao-avancada">Seção 3: Aplicação Prática e Implementação Avançada</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#projeto-integrador-sistema-de-gerenciamento-de-tarefas-empresarial">3.1. Projeto Integrador: Sistema de Gerenciamento de Tarefas Empresarial</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#arquitetura-do-sistema-e-analise-de-requisitos">3.1.1. Arquitetura do Sistema e Análise de Requisitos</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#estrutura-do-projeto-e-organizacao-do-repositorio">3.1.2. Estrutura do Projeto e Organização do Repositório</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#implementacao-do-backend-fastapi-com-padroes-empresariais">3.1.3. Implementação do Backend: FastAPI com Padrões Empresariais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#database-layer-com-sqlalchemy-avancado">3.1.4. Database Layer com SQLAlchemy Avançado</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#frontend-react-com-typescript-avancado">3.1.5. Frontend React com TypeScript Avançado</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows-avancados-de-ci-cd">3.1.6. Workflows Avançados de CI/CD</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-resultados-e-licoes-aprendidas">3.2. Análise de Resultados e Lições Aprendidas</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#impacto-quantitativo-das-praticas-implementadas">3.2.1. Impacto Quantitativo das Práticas Implementadas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#roi-return-on-investment-da-implementacao">3.2.2. ROI (Return on Investment) da Implementação</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-qualitativa-transformacao-cultural">3.2.3. Análise Qualitativa: Transformação Cultural</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusao-da-implementacao-pratica">3.3. Conclusão da Implementação Prática</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sintese-dos-resultados-obtidos">3.3.1. Síntese dos Resultados Obtidos</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#licoes-criticas-para-implementacao">3.3.2. Lições Críticas para Implementação</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusao-final">3.3.3. Conclusão Final</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-4-topicos-avancados-e-nuances">Seção 4: Tópicos Avançados e Nuances</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#desafios-comuns-e-anti-padroes">4.1. Desafios Comuns e “Anti-Padrões”</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#anti-padroes-em-git-e-controle-de-versao">4.1.1. Anti-Padrões em Git e Controle de Versão</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variacoes-e-arquiteturas-especializadas">4.2. Variações e Arquiteturas Especializadas</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gitops-git-como-source-of-truth">4.2.1. GitOps: Git como Source of Truth</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-cloud-e-hybrid-cloud-strategies">4.2.2. Multi-Cloud e Hybrid Cloud Strategies</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edge-computing-e-cdn-integration">4.2.3. Edge Computing e CDN Integration</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analise-de-performance-e-otimizacao">4.3. Análise de Performance e Otimização</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metricas-de-pipeline-performance">4.3.1. Métricas de Pipeline Performance</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#auto-scaling-de-runners">4.3.2. Auto-Scaling de Runners</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secao-5-sintese-e-perspectivas-futuras">Seção 5: Síntese e Perspectivas Futuras</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conexoes-com-outras-areas-da-computacao">5.1. Conexões com Outras Áreas da Computação</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#devops-e-site-reliability-engineering-sre">5.1.1. DevOps e Site Reliability Engineering (SRE)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning-e-data-science">5.1.2. Machine Learning e Data Science</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#seguranca-da-informacao-e-compliance">5.1.3. Segurança da Informação e Compliance</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-fronteira-da-pesquisa-e-o-futuro">5.2. A Fronteira da Pesquisa e o Futuro</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inteligencia-artificial-em-devops-aiops">5.2.1. Inteligência Artificial em DevOps (AIOps)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#quantum-computing-e-devops">5.2.2. Quantum Computing e DevOps</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#edge-computing-e-iot-integration">5.2.3. Edge Computing e IoT Integration</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resumo-do-capitulo-e-mapa-mental">5.3. Resumo do Capítulo e Mapa Mental</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pontos-chave-do-capitulo">5.3.1. Pontos-Chave do Capítulo</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mapa-mental-dos-conceitos">5.3.2. Mapa Mental dos Conceitos</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#referencias-e-leituras-adicionais">5.4. Referências e Leituras Adicionais</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#livros-fundamentais">5.4.1. Livros Fundamentais</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#documentacao-oficial-e-recursos-online">5.4.2. Documentação Oficial e Recursos Online</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ferramentas-e-plataforms">5.4.3. Ferramentas e Plataforms</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comunidades-e-eventos">5.4.4. Comunidades e Eventos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jackson Antonio do Prado Lima
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>